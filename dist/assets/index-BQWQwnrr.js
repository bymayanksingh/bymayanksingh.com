import{r as e,a as t,u as n,L as s,b as i,B as r,R as a,c as o,d as l}from"./vendor-CYNZuFbr.js";import{C as c,T as h,G as u,A as d,F as m,a as p,S as f,B as g,b as y,c as v,M as x,P as w,d as b,I as N,e as T,f as E,Z as j,g as S,R as C,h as A,i as _,E as I,U as k,j as D,L as P,k as R,l as M,m as L,n as O,o as V,p as F,q as B,r as U,s as $,t as q,u as z}from"./ui-DEXr-bS5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var K={exports:{}},G={},H=e,W=Symbol.for("react.element"),Q=Symbol.for("react.fragment"),Y=Object.prototype.hasOwnProperty,X=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,J={key:!0,ref:!0,__self:!0,__source:!0};function Z(e,t,n){var s,i={},r=null,a=null;for(s in void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(a=t.ref),t)Y.call(t,s)&&!J.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:W,type:e,key:r,ref:a,props:i,_owner:X.current}}G.Fragment=Q,G.jsx=Z,G.jsxs=Z,K.exports=G;var ee,te=K.exports,ne=t;ee=ne.createRoot,ne.hydrateRoot;var se={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&s+1<e.length&&56320==(64512&e.charCodeAt(s+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++s)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const t=e[i],r=i+1<e.length,a=r?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,h=(3&t)<<4|a>>4;let u=(15&a)<<2|l>>6,d=63&l;o||(d=64,r||(u=64)),s.push(n[c],n[h],n[u],n[d])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ie(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((31&i)<<6|63&r)}else if(i>239&&i<365){const r=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[s++]=String.fromCharCode(55296+(r>>10)),t[s++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],a=e[n++];t[s++]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],r=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==r||null==a||null==o)throw new ae;const l=t<<2|r>>4;if(s.push(l),64!==a){const e=r<<4&240|a>>2;if(s.push(e),64!==o){const e=a<<6&192|o;s.push(e)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oe=function(e){return function(e){const t=ie(e);return re.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const le=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ce=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&function(e){try{return re.decodeString(e,!0)}catch(n){}return null}(e[1]);return t&&JSON.parse(t)},he=()=>{try{return le()||(()=>{if("undefined"==typeof process)return;const e=se.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||ce()}catch(e){return}},ue=e=>{const t=(e=>{var t,n;return null===(n=null===(t=he())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),s]:[t.substring(0,n),s]},de=()=>{var e;return null===(e=he())||void 0===e?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(){return!function(){var e;const t=null===(e=he())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){try{return"object"==typeof indexedDB}catch(e){return!1}}function ge(){return new Promise(((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class ye extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ve.prototype.create)}}class ve{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],r=i?function(e,t){return e.replace(xe,((e,n)=>{const s=t[n];return null!=s?String(s):`<${n}?>`}))}(i,n):"Error",a=`${this.serviceName}: ${r} (${s}).`;return new ye(s,a,n)}}const xe=/\{\$([^}]+)}/g;function we(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const n=e[i],r=t[i];if(be(n)&&be(r)){if(!we(n,r))return!1}else if(n!==r)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function be(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(e,t=1e3,n=2){const s=t*Math.pow(n,e),i=Math.round(.5*s*(Math.random()-.5)*2);return Math.min(144e5,s+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(e){return e&&e._delegate?e._delegate:e}class Ee{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new me;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),s=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:je})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:s});n.resolve(e)}catch(t){}}}}clearInstance(e=je){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=je){return this.instances.has(e)}getOptions(e=je){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,r]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&r.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=e,s===je?void 0:s),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var s;return n||null}normalizeInstanceIdentifier(e=je){return this.component?this.component.multipleInstances?e:je:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Se(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,_e;(_e=Ae||(Ae={}))[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT";const Ie={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},ke=Ae.INFO,De={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},Pe=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!De[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Re{constructor(e){this.name=e,this._logLevel=ke,this._logHandler=Pe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Ie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}let Me,Le;const Oe=new WeakMap,Ve=new WeakMap,Fe=new WeakMap,Be=new WeakMap,Ue=new WeakMap;let $e={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ve.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Fe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ke(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function qe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Le||(Le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Ge(this),t),Ke(Oe.get(this))}:function(...t){return Ke(e.apply(Ge(this),t))}:function(t,...n){const s=e.call(Ge(this),t,...n);return Fe.set(s,t.sort?t.sort():[t]),Ke(s)}}function ze(e){return"function"==typeof e?qe(e):(e instanceof IDBTransaction&&function(e){if(Ve.has(e))return;const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",r),e.removeEventListener("abort",r)},i=()=>{t(),s()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",r),e.addEventListener("abort",r)}));Ve.set(e,t)}(e),t=e,(Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,$e):e);var t}function Ke(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",r)},i=()=>{t(Ke(e.result)),s()},r=()=>{n(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&Oe.set(t,e)})).catch((()=>{})),Ue.set(t,e),t}(e);if(Be.has(e))return Be.get(e);const t=ze(e);return t!==e&&(Be.set(e,t),Ue.set(t,e)),t}const Ge=e=>Ue.get(e);function He(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const a=indexedDB.open(e,t),o=Ke(a);return s&&a.addEventListener("upgradeneeded",(e=>{s(Ke(a.result),e.oldVersion,e.newVersion,Ke(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{r&&e.addEventListener("close",(()=>r())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}const We=["get","getKey","getAll","getAllKeys","count"],Qe=["put","add","delete","clear"],Ye=new Map;function Xe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ye.get(t))return Ye.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=Qe.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!i&&!We.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,i?"readwrite":"readonly");let a=r.store;return s&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&r.done]))[0]};return Ye.set(t,r),r}$e=(e=>({...e,get:(t,n,s)=>Xe(t,n)||e.get(t,n,s),has:(t,n)=>!!Xe(t,n)||e.has(t,n)}))($e);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Je{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Ze="@firebase/app",et="0.10.13",tt=new Re("@firebase/app"),nt="@firebase/app-compat",st="@firebase/analytics-compat",it="@firebase/analytics",rt="@firebase/app-check-compat",at="@firebase/app-check",ot="@firebase/auth",lt="@firebase/auth-compat",ct="@firebase/database",ht="@firebase/data-connect",ut="@firebase/database-compat",dt="@firebase/functions",mt="@firebase/functions-compat",pt="@firebase/installations",ft="@firebase/installations-compat",gt="@firebase/messaging",yt="@firebase/messaging-compat",vt="@firebase/performance",xt="@firebase/performance-compat",wt="@firebase/remote-config",bt="@firebase/remote-config-compat",Nt="@firebase/storage",Tt="@firebase/storage-compat",Et="@firebase/firestore",jt="@firebase/vertexai-preview",St="@firebase/firestore-compat",Ct="firebase",At="[DEFAULT]",_t={[Ze]:"fire-core",[nt]:"fire-core-compat",[it]:"fire-analytics",[st]:"fire-analytics-compat",[at]:"fire-app-check",[rt]:"fire-app-check-compat",[ot]:"fire-auth",[lt]:"fire-auth-compat",[ct]:"fire-rtdb",[ht]:"fire-data-connect",[ut]:"fire-rtdb-compat",[dt]:"fire-fn",[mt]:"fire-fn-compat",[pt]:"fire-iid",[ft]:"fire-iid-compat",[gt]:"fire-fcm",[yt]:"fire-fcm-compat",[vt]:"fire-perf",[xt]:"fire-perf-compat",[wt]:"fire-rc",[bt]:"fire-rc-compat",[Nt]:"fire-gcs",[Tt]:"fire-gcs-compat",[Et]:"fire-fst",[St]:"fire-fst-compat",[jt]:"fire-vertex","fire-js":"fire-js",[Ct]:"fire-js-all"},It=new Map,kt=new Map,Dt=new Map;function Pt(e,t){try{e.container.addComponent(t)}catch(n){tt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Rt(e){const t=e.name;if(Dt.has(t))return tt.debug(`There were multiple attempts to register component ${t}.`),!1;Dt.set(t,e);for(const n of It.values())Pt(n,e);for(const n of kt.values())Pt(n,e);return!0}function Mt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=new ve("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ot{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ee("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const s=Object.assign({name:At,automaticDataCollectionEnabled:!1},t),i=s.name;if("string"!=typeof i||!i)throw Lt.create("bad-app-name",{appName:String(i)});if(n||(n=de()),!n)throw Lt.create("no-options");const r=It.get(i);if(r){if(we(n,r.options)&&we(s,r.config))return r;throw Lt.create("duplicate-app",{appName:i})}const a=new Ce(i);for(const l of Dt.values())a.addComponent(l);const o=new Ot(n,s,a);return It.set(i,o),o}function Ft(e=At){const t=It.get(e);if(!t&&e===At&&de())return Vt();if(!t)throw Lt.create("no-app",{appName:e});return t}function Bt(e,t,n){var s;let i=null!==(s=_t[e])&&void 0!==s?s:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),a=t.match(/\s|\//);if(r||a){const e=[`Unable to register library "${i}" with version "${t}":`];return r&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void tt.warn(e.join(" "))}Rt(new Ee(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="firebase-heartbeat-store";let $t=null;function qt(){return $t||($t=He("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ut)}catch(n){}}}).catch((e=>{throw Lt.create("idb-open",{originalErrorMessage:e.message})}))),$t}async function zt(e,t){try{const n=(await qt()).transaction(Ut,"readwrite"),s=n.objectStore(Ut);await s.put(t,Kt(e)),await n.done}catch(n){if(n instanceof ye)tt.warn(n.message);else{const e=Lt.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});tt.warn(e.message)}}}function Kt(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Wt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ht();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some((e=>e.date===s)))return;return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){tt.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ht(),{heartbeatsToSend:n,unsentEntries:s}=function(e,t=1024){const n=[];let s=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Qt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Qt(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),i=oe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return tt.warn(t),""}}}function Ht(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!fe()&&ge().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await qt()).transaction(Ut),n=await t.objectStore(Ut).get(Kt(e));return await t.done,n}catch(t){if(t instanceof ye)tt.warn(t.message);else{const e=Lt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});tt.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Qt(e){return oe(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;Yt="",Rt(new Ee("platform-logger",(e=>new Je(e)),"PRIVATE")),Rt(new Ee("heartbeat",(e=>new Gt(e)),"PRIVATE")),Bt(Ze,et,Yt),Bt(Ze,et,"esm2017"),Bt("fire-js","");var Xt,Jt,Zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var s=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)s[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var r=e.g[3],a=t+(r^n&(i^r))+s[0]+3614090360&4294967295;a=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=(n=(i=(r=(t=n+(a<<7&4294967295|a>>>25))+((a=r+(i^t&(n^i))+s[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^r&(t^n))+s[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(r^t))+s[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^n&(i^r))+s[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=r+(i^t&(n^i))+s[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^r&(t^n))+s[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(r^t))+s[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^n&(i^r))+s[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=r+(i^t&(n^i))+s[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^r&(t^n))+s[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(r^t))+s[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^n&(i^r))+s[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=r+(i^t&(n^i))+s[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^r&(t^n))+s[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(r^t))+s[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^r&(n^i))+s[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^i&(t^n))+s[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(r^t))+s[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^t&(i^r))+s[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^r&(n^i))+s[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^i&(t^n))+s[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(r^t))+s[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^t&(i^r))+s[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^r&(n^i))+s[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^i&(t^n))+s[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(r^t))+s[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^t&(i^r))+s[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^r&(n^i))+s[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=r+(n^i&(t^n))+s[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(r^t))+s[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(r^t&(i^r))+s[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^r)+s[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=r+(t^n^i)+s[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(r^t^n)+s[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^r^t)+s[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^r)+s[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=r+(t^n^i)+s[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(r^t^n)+s[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^r^t)+s[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^r)+s[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=r+(t^n^i)+s[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(r^t^n)+s[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^r^t)+s[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^r)+s[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=r+(t^n^i)+s[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(r^t^n)+s[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^r^t)+s[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~r))+s[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(t|~i))+s[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(r|~n))+s[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(i|~t))+s[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~r))+s[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(t|~i))+s[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(r|~n))+s[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(i|~t))+s[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~r))+s[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(t|~i))+s[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(r|~n))+s[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(r^(i|~t))+s[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((r=(t=n+((a=t+(i^(n|~r))+s[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=r+(n^(t|~i))+s[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=r+((a=i+(t^(r|~n))+s[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+s[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+r&4294967295}function s(e,t){this.h=t;for(var n=[],s=!0,i=e.length-1;0<=i;i--){var r=0|e[i];s&&r==t||(n[i]=r,s=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,s){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var s=t-this.blockSize,i=this.B,r=this.h,a=0;a<t;){if(0==r)for(;a<=s;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(i[r++]=e.charCodeAt(a++),r==this.blockSize){n(this,i),r=0;break}}else for(;a<t;)if(i[r++]=e[a++],r==this.blockSize){n(this,i),r=0;break}}this.h=r,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var s=0;32>s;s+=8)e[n++]=this.g[t]>>>s&255;return e};var i={};function r(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new s([0|e],0>e?-1:0)})):new s([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new s(t,0)}var o=r(0),l=r(1),c=r(16777216);function h(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function u(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new s(n,~e.h).add(l)}function m(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(h(t))throw Error("division by zero");if(h(e))return new f(o,o);if(u(e))return t=g(d(e),t),new f(d(t.g),d(t.h));if(u(t))return t=g(e,d(t)),new f(d(t.g),t.h);if(30<e.g.length){if(u(e)||u(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,s=t;0>=s.l(e);)n=y(n),s=y(s);var i=v(n,1),r=v(s,1);for(s=v(s,2),n=v(n,2);!h(s);){var c=r.add(s);0>=c.l(e)&&(i=i.add(n),r=c),s=v(s,1),n=v(n,1)}return t=m(e,i.j(t)),new f(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),c=(r=a(n)).j(t);u(c)||0<c.l(e);)c=(r=a(n-=s)).j(t);h(r)&&(r=l),i=i.add(r),e=m(e,c)}return new f(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new s(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],a=0;a<i;a++)r[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new s(r,e.h)}(e=s.prototype).m=function(){if(u(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var s=this.i(n);e+=(0<=s?s:4294967296+s)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(u(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,s="";;){var i=g(n,t).g,r=((0<(n=m(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(h(n=i))return r+s;for(;6>r.length;)r="0"+r;s=r+s}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return u(e=m(this,e))?-1:h(e)?0:1},e.abs=function(){return u(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var a=i+(65535&this.i(r))+(65535&e.i(r)),o=(a>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=o>>>16,a&=65535,o&=65535,n[r]=o<<16|a}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(h(this)||h(e))return o;if(u(this))return u(e)?d(this).j(d(e)):d(d(this).j(e));if(u(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var l=this.i(i)>>>16,m=65535&this.i(i),f=e.i(r)>>>16,g=65535&e.i(r);n[2*i+2*r]+=m*g,p(n,2*i+2*r),n[2*i+2*r+1]+=l*g,p(n,2*i+2*r+1),n[2*i+2*r+1]+=m*f,p(n,2*i+2*r+1),n[2*i+2*r+2]+=l*f,p(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new s(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Jt=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=a,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=a(Math.pow(n,8)),i=o,r=0;r<t.length;r+=8){var l=Math.min(8,t.length-r),c=parseInt(t.substring(r,r+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(s)).add(a(c))}return i},Xt=s}).apply(void 0!==Zt?Zt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var en,tn,nn,sn,rn,an,on,ln,cn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof cn&&cn];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,s){if(s)e:{var i=n;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];if(!(a in i))break e;i=i[a]}(s=s(r=i[e=e[e.length-1]]))!=r&&null!=s&&t(i,e,{configurable:!0,writable:!0,value:s})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,s=!1,i={next:function(){if(!s&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return s=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var s=s||{},i=this||self;function r(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function h(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,s){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function m(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(r(t)){const n=e.length||0,s=t.length||0;e.length=n+s;for(let i=0;i<s;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function f(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==f().indexOf("Gecko")||-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge")||-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE")||-1!=f().indexOf("Edge"));function v(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,s;for(let i=1;i<arguments.length;i++){for(n in s=arguments[i],s)e[n]=s[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function T(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=_;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var j=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new S),(e=>e.reset()));class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,A=!1,_=new class{constructor(){this.h=this.g=null}add(e,t){const n=j.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(k)}};var k=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){T(n)}var t=j;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function D(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(r){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}u(M,P);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),V=0;function F(e,t,n,s,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.ha=i,this.key=++V,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function U(e){this.src=e,this.g={},this.h=0}function $(e,t){var n=t.type;if(n in e.g){var s,i=e.g[n],r=Array.prototype.indexOf.call(i,t,void 0);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,s){for(var i=0;i<e.length;++i){var r=e[i];if(!r.da&&r.listener==t&&r.capture==!!n&&r.ha==s)return i}return-1}U.prototype.add=function(e,t,n,s,i){var r=e.toString();(e=this.g[r])||(e=this.g[r]=[],this.h++);var a=q(e,t,s,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new F(t,this.src,r,!!s,i)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),K={};function G(e,t,n,s,i){if(Array.isArray(t)){for(var r=0;r<t.length;r++)G(e,t[r],n,s,i);return null}return n=Z(n),e&&e[O]?e.K(t,n,a(s)?!!s.capture:!!s,i):function(e,t,n,s,i,r){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=X(e);if(l||(e[z]=l=new U(e)),n=l.add(t,n,s,o,r),n.proxy)return n;if(s=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Y;return e}(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)R||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),s,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),s);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(s)}return n}(e,t,n,!1,s,i)}function H(e,t,n,s,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)H(e,t[r],n,s,i);else s=a(s)?!!s.capture:!!s,n=Z(n),e&&e[O]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(r=e.g[t],n,s,i))&&(B(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete e.g[t],e.h--)))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,s,i)),(n=-1<e?t[e]:null)&&W(n))}function W(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[O])$(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(Q(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=X(t))?($(n,e),0==n.h&&(n.src=null,t[z]=null)):B(e)}}}function Q(e){return e in K?K[e]:K[e]="on"+e}function Y(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,s=e.ha||e.src;e.fa&&W(e),e=n.call(s,t)}return e}function X(e){return(e=e[z])instanceof U?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){D.call(this),this.i=new U(this),this.M=this,this.F=null}function te(e,t){var n,s=e.F;if(s)for(n=[];s;s=s.F)n.push(s);if(e=e.M,s=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;b(t=new P(s,e),i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var a=t.g=n[r];i=ne(a,s,!0,t)&&i}if(i=ne(a=t.g=e,s,!0,t)&&i,i=ne(a,s,!1,t)&&i,n)for(r=0;r<n.length;r++)i=ne(a=t.g=n[r],s,!1,t)&&i}function ne(e,t,n,s){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,r=0;r<t.length;++r){var a=t[r];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&$(e.i,a),i=!1!==o.call(l,s)&&i}}return i&&!s.defaultPrevented}function se(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ie(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ee,D),ee.prototype[O]=!0,ee.prototype.removeEventListener=function(e,t,n,s){H(this,e,t,n,s)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)B(n[s]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)},ee.prototype.L=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};class re extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(e){D.call(this),this.h=e,this.g={}}u(ae,D);var oe=[];function le(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&W(e)}),e),e.g={}}ae.prototype.N=function(){ae.aa.N.call(this),le(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=i.JSON.stringify,he=i.JSON.parse,ue=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function de(){}function me(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){P.call(this,"d")}function ye(){P.call(this,"c")}u(ge,P),u(ye,P);var ve={},xe=null;function we(){return xe=xe||new ee}function be(e){P.call(this,ve.La,e)}function Ne(e){const t=we();te(t,new be(t))}function Te(e,t){P.call(this,ve.STAT_EVENT,e),this.stat=t}function Ee(e){const t=we();te(t,new Te(t,e))}function je(e,t){P.call(this,ve.Ma,e),this.size=t}function Se(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ce(){this.g=!0}function Ae(e,t,n,s){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var a=1;a<i.length;a++)i[a]=""}}}return ce(n)}catch(o){return t}}(e,n)+(s?" "+s:"")}))}ve.La="serverreachability",u(be,P),ve.STAT_EVENT="statevent",u(Te,P),ve.Ma="timingevent",u(je,P),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var _e,Ie={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ke={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Pe(e,t,n,s){this.j=e,this.i=t,this.l=n,this.R=s||1,this.U=new ae(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}u(De,de),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},_e=new De;var Me={},Le={};function Oe(e,t,n){e.L=1,e.v=ct(it(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Ue(e),e.A=it(e.v);var n=e.A,s=e.R;Array.isArray(s)||(s=[String(s)]),Nt(n.i,"t",s),e.C=0,n=e.j.J,e.h=new Re,e.g=xn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new re(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,s=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(oe[0]=i.toString()),i=oe);for(var r=0;r<i.length;r++){var a=G(n,i[r],s||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ne(),function(e,t,n,s,i,r){e.info((function(){if(e.g)if(r)for(var a="",o=r.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var h=c[0];c=c[1];var u=h.split("_");a=2<=u.length&&"type"==u[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Fe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,s=t.indexOf("\n",n);return-1==s?Le:(n=Number(t.substring(n,s)),isNaN(n)?Me:(s+=1)+n>t.length?Le:(t=t.slice(s,s+n),e.C=s+n,t))}function Ue(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Se(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function ze(e){0==e.j.G||e.J||pn(e.j,e)}function Ke(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Xe(n.h,e)))if(!e.K&&Xe(n.h,e)&&3==n.G){try{var s=n.Da.g.parse(t)}catch(h){s=null}if(Array.isArray(s)&&3==s.length){var i=s;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;mn(n),Ht(n)}hn(n),Ee(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Se(c(n.Za,n),6e3));if(1>=Ye(n.h)&&n.ca){try{n.ca()}catch(h){}n.ca=void 0}}else gn(n,11)}else if((e.K||n.g==e)&&mn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(s=1.5*h,n.L=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const u=e.g;if(u){const e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var r=s.h;r.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(Je(r,r.h),r.h=null))}if(s.D){const e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(s.ya=e,lt(s.I,s.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((s=n).qa=vn(s,s.J?s.ia:null,s.W),a.K){Ze(s.h,a);var o=a,l=s.L;l&&(o.I=l),o.B&&(qe(o),Ue(o)),s.g=a}else Zt(s);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||gn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?gn(n,7):Gt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ne()}catch(h){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==$t(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=$t(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=d||7==t||Ne(),qe(this);var n=this.g.Z();this.X=n;t:if(Fe(this)){var s=qt(this.g);e="";var r=s.length,a=4==$t(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ke(this),ze(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:!(a&&t==r-1)});s.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,s,i,r,a){e.info((function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+r+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var h=l;break t}}h=null}if(!(n=h)){this.o=!1,this.s=3,Ee(12),Ke(this),ze(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Le){4==d&&(this.s=4,Ee(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ee(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ge(this,e)}if(Fe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var u=this.j;u.g==this&&u.ba&&!u.M&&(u.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),un(u),u.M=!0,Ee(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),ze(this)}else Ae(this.i,this.l,o,null),Ge(this,o);4==d&&Ke(this),this.o&&!this.J&&(4==d?pn(this.j,this):(this.o=!1,Ue(this)))}else(function(e){const t={};e=(e.g&&2<=$t(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<e.length;s++){if(p(e[s]))continue;var n=N(e[s]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const r=t[i]||[];t[i]=r,r.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Ke(this),ze(this)}}}catch(d){}},Pe.prototype.cancel=function(){this.J=!0,Ke(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ne(),Ee(17)),Ke(this),this.s=2,ze(this)):$e(this,this.S-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ye(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(r(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(r(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const s in e)t[n++]=s;return t}}}(e),s=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(r(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}for(s in t=[],n=0,e)t[n++]=e[s];return t}(e),i=s.length,a=0;a<i;a++)t.call(void 0,s[a],n&&n[a],e)}We.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,rt(this,e.j),this.o=e.o,this.g=e.g,at(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,rt(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),at(this,t[4]),this.l=ht(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function it(e){return new st(e)}function rt(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function at(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),Nt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ut(t,gt)),e.i=new vt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ut(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ut(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ut(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ut(n,"/"==n.charAt(0)?ft:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ut(n,yt)),e.join("")};var mt=/[#\/\?@]/g,pt=/[#\?:]/g,ft=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),i=null;if(0<=s){var r=e[n].substring(0,s);i=e[n].substring(s+1)}else r=e[n];t(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wt(e,t){xt(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function bt(e,t){return xt(e),t=Tt(e,t),e.g.has(t)}function Nt(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),d(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,s,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),s(n)}catch(r){}}function jt(){this.g=new ue}function St(e,t,n){const s=n||"";try{tt(e,(function(e,n){let i=e;a(e)&&(i=ce(e)),t.push(s+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(s+"type="+encodeURIComponent("_badmap")),i}}function Ct(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function _t(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function It(e){e.readyState=4,e.l=null,e.j=null,e.v=null,kt(e)}function kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Pt(e,t,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Dt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Rt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){xt(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,s){n.forEach((function(n){e.call(t,n,s,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let s=0;s<t.length;s++){const i=e[s];for(let e=0;e<i.length;e++)n.push(t[s])}return n},e.V=function(e){xt(this);let t=[];if("string"==typeof e)bt(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,bt(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var s=t[n];const r=encodeURIComponent(String(s)),a=this.V(s);for(s=0;s<a.length;s++){var i=r;""!==a[s]&&(i+="="+encodeURIComponent(String(a[s]))),e.push(i)}}return this.i=e.join("&")},u(Ct,de),Ct.prototype.g=function(){return new At(this.l,this.j)},Ct.prototype.i=function(e){return function(){return e}}({}),u(At,ee),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,It(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kt(this)),this.g&&(this.readyState=3,kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_t(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?It(this):kt(this),3==this.readyState&&_t(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,It(this))},e.Qa=function(e){this.g&&(this.response=e,It(this))},e.ga=function(){this.g&&It(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Rt,ee);var Mt=/^https?$/i,Lt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Bt(e)}function Vt(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ft(e){if(e.h&&void 0!==s&&(!e.v[1]||4!=$t(e)||2!=e.Z()))if(e.u&&4==$t(e))se(e.Ea,0,e);else if(te(e,"readystatechange"),4==$t(e)){e.h=!1;try{const s=e.Z();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){var a=String(e.D).match(nt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),r=!Mt.test(a?a.toLowerCase():"")}n=r}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<$t(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Vt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){Ut(e);const s=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{s.onreadystatechange=i}catch(n){}}}function Ut(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function $t(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zt("baseRetryDelayMs",5e3,e),this.cb=zt("retryDelaySeedMs",1e4,e),this.Wa=zt("forwardChannelMaxRetries",2,e),this.wa=zt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new We(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Wt(e),3==e.G){var t=e.U++,n=it(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Xt(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=ct(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(s){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=xn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ue(t)}yn(e)}function Ht(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function Wt(e){Ht(e),e.u&&(i.clearTimeout(e.u),e.u=null),mn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||I(),A||(C(),A=!0),_.add(t,e),e.B=0}}function Yt(e,t){var n;n=t?t.l:e.U++;const s=it(e.I);lt(s,"SID",e.K),lt(s,"RID",n),lt(s,"AID",e.T),Xt(e,s),e.m&&e.o&&Pt(s,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Jt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Oe(n,s,t)}function Xt(e,t){e.H&&v(e.H,(function(e,n){lt(t,n,e)})),e.l&&tt({},(function(e,n){lt(t,n,e)}))}function Jt(e,t,n){n=Math.min(e.i.length,n);var s=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=i[o].g;const l=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),a=!1;else try{St(l,e,"req"+n+"_")}catch(r){s&&s(l)}}if(a){s=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,s}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||I(),A||(C(),A=!0),_.add(t,e),e.v=0}}function hn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Se(c(e.Fa,e),fn(e,e.v)),e.v++,!0)}function un(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function dn(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Xt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(it(t)),n.m=null,n.P=!0,Ve(n,e)}function mn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function pn(e,t){var n=null;if(e.g==t){mn(e),un(e),e.g=null;var s=2}else{if(!Xe(e.h,t))return;n=t.D,Ze(e.h,t),s=1}if(0!=e.G)if(t.o)if(1==s){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(s=we(),new je(s,n)),Qt(e)}else Zt(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==s&&function(e,t){return!(Ye(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Se(c(e.Ga,e,t),fn(e,e.B)),e.B++,0)))}(e,t)||2==s&&hn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:gn(e,5);break;case 4:gn(e,10);break;case 3:gn(e,6);break;default:gn(e,2)}}function fn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function gn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),s=e.Xa;const t=!s;s=new st(s||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||rt(s,"https"),ct(s),t?function(e,t){const n=new Ce;if(i.Image){const s=new Image;s.onload=h(Et,n,"TestLoadImage: loaded",!0,t,s),s.onerror=h(Et,n,"TestLoadImage: error",!1,t,s),s.onabort=h(Et,n,"TestLoadImage: abort",!1,t,s),s.ontimeout=h(Et,n,"TestLoadImage: timeout",!1,t,s),i.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=e}else t(!1)}(s.toString(),n):function(e,t){new Ce;const n=new AbortController,s=setTimeout((()=>{n.abort(),Et(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(s),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)})).catch((()=>{clearTimeout(s),Et(0,0,!1,t)}))}(s.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),yn(e),Wt(e)}function yn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(m(e.ka,t),m(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function vn(e,t,n){var s=n instanceof st?it(n):new st(n);if(""!=s.g)t&&(s.g=t+"."+s.g),at(s,s.s);else{var r=i.location;s=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var a=new st(null);s&&rt(a,s),t&&(a.g=t),r&&at(a,r),n&&(a.l=n),s=a}return n=e.D,t=e.ya,n&&t&&lt(s,n,t),lt(s,"VER",e.la),Xt(e,s),s}function xn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Rt(new Ct({eb:n})):new Rt(e.pa)).Ha(e.J),t}function wn(){}function bn(){}function Nn(e,t){ee.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new jn(this)}function Tn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function En(){ye.call(this),this.status=1}function jn(e){this.g=e}(e=Rt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_e.g(),this.v=this.o?me(this.o):me(_e),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ot(this,a)}if(e=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const e of s.keys())n.set(e,s.get(e))}s=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),r=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Lt,t,void 0))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ut(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ot(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Rt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ft(this):this.bb())},e.bb=function(){Ft(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<$t(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,s){Ee(0),this.W=e,this.H=t||{},n&&void 0!==s&&(this.H.OSID=n,this.H.OAID=s),this.F=this.X,this.I=vn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Pe(this,this.j,e);let r=this.o;if(this.S&&(r?(r=x(r),b(r,this.S)):r=this.S),null!==this.m||this.O||(i.H=r,r=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var s=this.i[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(t+=s)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,i,t),lt(n=it(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Xt(this,n),r&&(this.O?t="headers="+encodeURIComponent(String(Dt(r)))+"&"+t:this.m&&Pt(n,this.m,r)),Je(this.h,i),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),i.T=!0,Oe(i,n,null)):Oe(i,n,t),this.G=2}}else 3==this.G&&(e?Yt(this,e):0==this.i.length||Qe(this.h)||Yt(this))},e.Fa=function(){if(this.u=null,dn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Se(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),Ht(this),dn(this))},e.Za=function(){null!=this.C&&(this.C=null,Ht(this),hn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=wn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},bn.prototype.g=function(e,t){return new Nn(e,t)},u(Nn,ee),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Gt(this.g)},Nn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.G&&Qt(t)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,Nn.aa.N.call(this)},u(Tn,ge),u(En,ye),u(jn,wn),jn.prototype.ua=function(){te(this.g,"a")},jn.prototype.ta=function(e){te(this.g,new Tn(e))},jn.prototype.sa=function(e){te(this.g,new En)},jn.prototype.ra=function(){te(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,ln=function(){return new bn},on=function(){return we()},an=ve,rn={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,sn=Ie,ke.COMPLETE="complete",nn=ke,pe.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",ee.prototype.listen=ee.prototype.K,tn=pe,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,en=Rt}).apply(void 0!==cn?cn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const hn="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let dn="10.14.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new Re("@firebase/firestore");function pn(){return mn.logLevel}function fn(e,...t){if(mn.logLevel<=Ae.DEBUG){const n=t.map(vn);mn.debug(`Firestore (${dn}): ${e}`,...n)}}function gn(e,...t){if(mn.logLevel<=Ae.ERROR){const n=t.map(vn);mn.error(`Firestore (${dn}): ${e}`,...n)}}function yn(e,...t){if(mn.logLevel<=Ae.WARN){const n=t.map(vn);mn.warn(`Firestore (${dn}): ${e}`,...n)}}function vn(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(e="Unexpected state"){const t=`FIRESTORE (${dn}) INTERNAL ASSERTION FAILED: `+e;throw gn(t),new Error(t)}function wn(e,t){e||xn()}function bn(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tn extends ye{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class Cn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class An{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wn(void 0===this.o);let n=this.i;const s=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new En;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new En,e.enqueueRetryable((()=>s(this.currentUser)))};const r=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await s(this.currentUser)}))},a=e=>{fn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(fn("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new En)}}),0),r()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(fn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(wn("string"==typeof t.accessToken),new jn(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wn(null===e||"string"==typeof e),new un(e)}}class _n{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class In{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new _n(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dn{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){wn(void 0===this.o);const n=e=>{null!=e.error&&fn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,fn("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const s=e=>{fn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>s(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?s(e):fn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(wn("string"==typeof e.token),this.R=e.token,new kn(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const s=Pn(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%62))}return n}}function Mn(e,t){return e<t?-1:e>t?1:0}function Ln(e,t,n){return e.length===t.length&&e.every(((e,s)=>n(e,t[s])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Tn(Nn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Tn(Nn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Tn(Nn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tn(Nn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new On(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mn(this.nanoseconds,e.nanoseconds):Mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vn(e)}static min(){return new Vn(new On(0,0))}static max(){return new Vn(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t,n){void 0===t?t=0:t>e.length&&xn(),void 0===n?n=e.length-t:n>e.length-t&&xn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Fn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fn?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const n=e.get(s),i=t.get(s);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Bn extends Fn{construct(e,t,n){return new Bn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Tn(Nn.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Bn(t)}static emptyPath(){return new Bn([])}}const Un=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends Fn{construct(e,t,n){return new $n(e,t,n)}static isValidIdentifier(e){return Un.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $n(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(0===n.length)throw new Tn(Nn.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let r=!1;for(;s<e.length;){const t=e[s];if("\\"===t){if(s+1===e.length)throw new Tn(Nn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[s+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Tn(Nn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,s+=2}else"`"===t?(r=!r,s++):"."!==t||r?(n+=t,s++):(i(),s++)}if(i(),r)throw new Tn(Nn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(t)}static emptyPath(){return new $n([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.path=e}static fromPath(e){return new qn(Bn.fromString(e))}static fromName(e){return new qn(Bn.fromString(e).popFirst(5))}static empty(){return new qn(Bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qn(new Bn(e.slice()))}}function zn(e){return new Kn(e.readTime,e.key,-1)}class Kn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Kn(Vn.min(),qn.empty(),-1)}static max(){return new Kn(Vn.max(),qn.empty(),-1)}}function Gn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=qn.comparator(e.documentKey,t.documentKey),0!==n?n:Mn(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Hn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wn(e){if(e.code!==Nn.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;fn("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Qn(((n,s)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,s)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Qn?t:Qn.resolve(t)}catch(t){return Qn.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Qn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Qn.reject(t)}static resolve(e){return new Qn(((t,n)=>{t(e)}))}static reject(e){return new Qn(((t,n)=>{n(e)}))}static waitFor(e){return new Qn(((t,n)=>{let s=0,i=0,r=!1;e.forEach((e=>{++s,e.next((()=>{++i,r&&i===s&&t()}),(e=>n(e)))})),r=!0,i===s&&t()}))}static or(e){let t=Qn.resolve(!1);for(const n of e)t=t.next((e=>e?Qn.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,s)=>{n.push(t.call(this,e,s))})),this.waitFor(n)}static mapArray(e,t){return new Qn(((n,s)=>{const i=e.length,r=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next((e=>{r[l]=e,++a,a===i&&n(r)}),(e=>s(e)))}}))}static doWhile(e,t){return new Qn(((n,s)=>{const i=()=>{!0===e()?t().next((()=>{i()}),s):n()};i()}))}}function Yn(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Jn(e){return null==e}function Zn(e){return 0===e&&1/e==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function es(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ts(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ns(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.oe=-1;class ss{constructor(e,t){this.comparator=e,this.root=t||rs.EMPTY}insert(e,t){return new ss(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rs.BLACK,null,null))}remove(e){return new ss(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(0===s)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new is(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new is(this.root,e,this.comparator,!1)}getReverseIterator(){return new is(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new is(this.root,e,this.comparator,!0)}}class is{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rs{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=null!=n?n:rs.RED,this.left=null!=s?s:rs.EMPTY,this.right=null!=i?i:rs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new rs(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):0===i?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return rs.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xn();if(this.right.isRed())throw xn();const e=this.left.check();if(e!==this.right.check())throw xn();return e+(this.isRed()?0:1)}}rs.EMPTY=null,rs.RED=!0,rs.BLACK=!1,rs.EMPTY=new class{constructor(){this.size=0}get key(){throw xn()}get value(){throw xn()}get color(){throw xn()}get left(){throw xn()}get right(){throw xn()}copy(e,t,n,s,i){return this}insert(e,t,n){return new rs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class as{constructor(e){this.comparator=e,this.data=new ss(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new os(this.data.getIterator())}getIteratorFrom(e){return new os(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof as))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(0!==this.comparator(e,s))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new as(this.comparator);return t.data=e,t}}class os{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new ls([])}unionWith(e){let t=new as($n.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ln(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new cs("Invalid base64 string: "+t):t}}(e);return new hs(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new hs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hs.EMPTY_BYTE_STRING=new hs("");const us=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(e){if(wn(!!e),"string"==typeof e){let t=0;const n=us.exec(e);if(wn(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ms(e.seconds),nanos:ms(e.nanos)}}function ms(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ps(e){return"string"==typeof e?hs.fromBase64String(e):hs.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gs(e){const t=e.mapValue.fields.__previous_value__;return fs(t)?gs(t):t}function ys(e){const t=ds(e.mapValue.fields.__local_write_time__.timestampValue);return new On(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,n,s,i,r,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=r,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class xs{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xs&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws={fields:{__type__:{stringValue:"__max__"}}};function bs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fs(e)?4:function(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}(e)?10:11:xn()}function Ns(e,t){if(e===t)return!0;const n=bs(e);if(n!==bs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ys(e).isEqual(ys(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ds(e.timestampValue),s=ds(t.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return s=t,ps(e.bytesValue).isEqual(ps(s.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ms(e.geoPointValue.latitude)===ms(t.geoPointValue.latitude)&&ms(e.geoPointValue.longitude)===ms(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ms(e.integerValue)===ms(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ms(e.doubleValue),s=ms(t.doubleValue);return n===s?Zn(n)===Zn(s):isNaN(n)&&isNaN(s)}return!1}(e,t);case 9:return Ln(e.arrayValue.values||[],t.arrayValue.values||[],Ns);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},s=t.mapValue.fields||{};if(es(n)!==es(s))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===s[i]||!Ns(n[i],s[i])))return!1;return!0}(e,t);default:return xn()}var s}function Ts(e,t){return void 0!==(e.values||[]).find((e=>Ns(e,t)))}function Es(e,t){if(e===t)return 0;const n=bs(e),s=bs(t);if(n!==s)return Mn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ms(e.integerValue||e.doubleValue),s=ms(t.integerValue||t.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(e,t);case 3:return js(e.timestampValue,t.timestampValue);case 4:return js(ys(e),ys(t));case 5:return Mn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ps(e),s=ps(t);return n.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),s=t.split("/");for(let i=0;i<n.length&&i<s.length;i++){const e=Mn(n[i],s[i]);if(0!==e)return e}return Mn(n.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Mn(ms(e.latitude),ms(t.latitude));return 0!==n?n:Mn(ms(e.longitude),ms(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ss(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,s,i,r;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(s=o.value)||void 0===s?void 0:s.arrayValue,h=Mn((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(r=null==c?void 0:c.values)||void 0===r?void 0:r.length)||0);return 0!==h?h:Ss(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ws&&t===ws)return 0;if(e===ws)return 1;if(t===ws)return-1;const n=e.fields||{},s=Object.keys(n),i=t.fields||{},r=Object.keys(i);s.sort(),r.sort();for(let a=0;a<s.length&&a<r.length;++a){const e=Mn(s[a],r[a]);if(0!==e)return e;const t=Es(n[s[a]],i[r[a]]);if(0!==t)return t}return Mn(s.length,r.length)}(e.mapValue,t.mapValue);default:throw xn()}}function js(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Mn(e,t);const n=ds(e),s=ds(t),i=Mn(n.seconds,s.seconds);return 0!==i?i:Mn(n.nanos,s.nanos)}function Ss(e,t){const n=e.values||[],s=t.values||[];for(let i=0;i<n.length&&i<s.length;++i){const e=Es(n[i],s[i]);if(e)return e}return Mn(n.length,s.length)}function Cs(e){return As(e)}function As(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ds(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ps(e.bytesValue).toBase64():"referenceValue"in e?function(e){return qn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const s of e.values||[])n?n=!1:t+=",",t+=As(s);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",s=!0;for(const i of t)s?s=!1:n+=",",n+=`${i}:${As(e.fields[i])}`;return n+"}"}(e.mapValue):xn()}function _s(e){return!!e&&"integerValue"in e}function Is(e){return!!e&&"arrayValue"in e}function ks(e){return!!e&&"nullValue"in e}function Ds(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ps(e){return!!e&&"mapValue"in e}function Rs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ts(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Rs(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Rs(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Ms{constructor(e){this.value=e}static empty(){return new Ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ps(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rs(t)}setAll(e){let t=$n.emptyPath(),n={},s=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,s),n={},s=[],t=i.popLast()}e?n[i.lastSegment()]=Rs(e):s.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());Ps(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Ps(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){ts(t,((t,n)=>e[t]=n));for(const s of n)delete e[s]}clone(){return new Ms(Rs(this.value))}}function Ls(e){const t=[];return ts(e.fields,((e,n)=>{const s=new $n([e]);if(Ps(n)){const e=Ls(n.mapValue).fields;if(0===e.length)t.push(s);else for(const n of e)t.push(s.child(n))}else t.push(s)})),new ls(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Os{constructor(e,t,n,s,i,r,a){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=i,this.data=r,this.documentState=a}static newInvalidDocument(e){return new Os(e,0,Vn.min(),Vn.min(),Vn.min(),Ms.empty(),0)}static newFoundDocument(e,t,n,s){return new Os(e,1,t,Vn.min(),n,s,0)}static newNoDocument(e,t){return new Os(e,2,t,Vn.min(),Vn.min(),Ms.empty(),0)}static newUnknownDocument(e,t){return new Os(e,3,t,Vn.min(),Vn.min(),Ms.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Os&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Os(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){this.position=e,this.inclusive=t}}function Fs(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],a=e.position[i];if(s=r.field.isKeyField()?qn.comparator(qn.fromName(a.referenceValue),n.key):Es(a,n.data.field(r.field)),"desc"===r.dir&&(s*=-1),0!==s)break}return s}function Bs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ns(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t="asc"){this.field=e,this.dir=t}}function $s(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{}class zs extends qs{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Xs(e,t,n):"array-contains"===t?new ti(e,n):"in"===t?new ni(e,n):"not-in"===t?new si(e,n):"array-contains-any"===t?new ii(e,n):new zs(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Js(e,n):new Zs(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Es(t,this.value)):null!==t&&bs(this.value)===bs(t)&&this.matchesComparison(Es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ks extends qs{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ks(e,t)}matches(e){return Gs(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gs(e){return"and"===e.op}function Hs(e){return function(e){for(const t of e.filters)if(t instanceof Ks)return!1;return!0}(e)&&Gs(e)}function Ws(e){if(e instanceof zs)return e.field.canonicalString()+e.op.toString()+Cs(e.value);if(Hs(e))return e.filters.map((e=>Ws(e))).join(",");{const t=e.filters.map((e=>Ws(e))).join(",");return`${e.op}(${t})`}}function Qs(e,t){return e instanceof zs?(n=e,(s=t)instanceof zs&&n.op===s.op&&n.field.isEqual(s.field)&&Ns(n.value,s.value)):e instanceof Ks?function(e,t){return t instanceof Ks&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,s)=>e&&Qs(n,t.filters[s])),!0)}(e,t):void xn();var n,s}function Ys(e){return e instanceof zs?`${(t=e).field.canonicalString()} ${t.op} ${Cs(t.value)}`:e instanceof Ks?function(e){return e.op.toString()+" {"+e.getFilters().map(Ys).join(" ,")+"}"}(e):"Filter";var t}class Xs extends zs{constructor(e,t,n){super(e,t,n),this.key=qn.fromName(n.referenceValue)}matches(e){const t=qn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Js extends zs{constructor(e,t){super(e,"in",t),this.keys=ei("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Zs extends zs{constructor(e,t){super(e,"not-in",t),this.keys=ei("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ei(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>qn.fromName(e.referenceValue)))}class ti extends zs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Is(t)&&Ts(t.arrayValue,this.value)}}class ni extends zs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ts(this.value.arrayValue,t)}}class si extends zs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ts(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ts(this.value.arrayValue,t)}}class ii extends zs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Is(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ts(this.value.arrayValue,e)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t=null,n=[],s=[],i=null,r=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=r,this.endAt=a,this.ue=null}}function ai(e,t=null,n=[],s=[],i=null,r=null,a=null){return new ri(e,t,n,s,i,r,a)}function oi(e){const t=bn(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ws(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>{return(t=e).field.canonicalString()+t.dir;var t})).join(","),Jn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Cs(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Cs(e))).join(",")),t.ue=e}return t.ue}function li(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$s(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Qs(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bs(e.startAt,t.startAt)&&Bs(e.endAt,t.endAt)}function ci(e){return qn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t=null,n=[],s=[],i=null,r="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=r,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ui(e){return new hi(e)}function di(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function mi(e){const t=bn(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new as($n.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Us(s,n))})),e.has($n.keyField().canonicalString())||t.ce.push(new Us($n.keyField(),n))}return t.ce}function pi(e){const t=bn(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return ai(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Us(e.field,t)}));const n=e.endAt?new Vs(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Vs(e.startAt.position,e.startAt.inclusive):null;return ai(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}(t,mi(e))),t.le}function fi(e,t,n){return new hi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gi(e,t){return li(pi(e),pi(t))&&e.limitType===t.limitType}function yi(e){return`${oi(pi(e))}|lt:${e.limitType}`}function vi(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Ys(e))).join(", ")}]`),Jn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t})).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Cs(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Cs(e))).join(",")),`Target(${t})`}(pi(e))}; limitType=${e.limitType})`}function xi(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):qn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of mi(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(s=t,!((n=e).startAt&&!function(e,t,n){const s=Fs(e,t,n);return e.inclusive?s<=0:s<0}(n.startAt,mi(n),s)||n.endAt&&!function(e,t,n){const s=Fs(e,t,n);return e.inclusive?s>=0:s>0}(n.endAt,mi(n),s)));var n,s}function wi(e){return(t,n)=>{let s=!1;for(const i of mi(e)){const e=bi(i,t,n);if(0!==e)return e;s=s||i.field.isKeyField()}return 0}}function bi(e,t,n){const s=e.field.isKeyField()?qn.comparator(t.key,n.key):function(e,t,n){const s=t.data.field(e),i=n.data.field(e);return null!==s&&null!==i?Es(s,i):xn()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return xn()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[s,i]of n)if(this.equalsFn(s,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(void 0===s)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return 1===n.length?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,((t,n)=>{for(const[s,i]of n)e(s,i)}))}isEmpty(){return ns(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new ss(qn.comparator);function Ei(){return Ti}const ji=new ss(qn.comparator);function Si(...e){let t=ji;for(const n of e)t=t.insert(n.key,n);return t}function Ci(e){let t=ji;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ai(){return Ii()}function _i(){return Ii()}function Ii(){return new Ni((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ki=new ss(qn.comparator),Di=new as(qn.comparator);function Pi(...e){let t=Di;for(const n of e)t=t.add(n);return t}const Ri=new as(Mn);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zn(t)?"-0":t}}function Li(e){return{integerValue:""+e}}function Oi(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Zn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Li(t):Mi(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this._=void 0}}function Fi(e,t,n){return e instanceof $i?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&fs(t)&&(t=gs(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof qi?zi(e,t):e instanceof Ki?Gi(e,t):function(e,t){const n=Ui(e,t),s=Wi(n)+Wi(e.Pe);return _s(n)&&_s(e.Pe)?Li(s):Mi(e.serializer,s)}(e,t)}function Bi(e,t,n){return e instanceof qi?zi(e,t):e instanceof Ki?Gi(e,t):n}function Ui(e,t){return e instanceof Hi?_s(n=t)||(s=n)&&"doubleValue"in s?t:{integerValue:0}:null;var n,s}class $i extends Vi{}class qi extends Vi{constructor(e){super(),this.elements=e}}function zi(e,t){const n=Qi(t);for(const s of e.elements)n.some((e=>Ns(e,s)))||n.push(s);return{arrayValue:{values:n}}}class Ki extends Vi{constructor(e){super(),this.elements=e}}function Gi(e,t){let n=Qi(t);for(const s of e.elements)n=n.filter((e=>!Ns(e,s)));return{arrayValue:{values:n}}}class Hi extends Vi{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Wi(e){return ms(e.integerValue||e.doubleValue)}function Qi(e){return Is(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Yi{constructor(e,t){this.version=e,this.transformResults=t}}class Xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ji(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Zi{}function er(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new hr(e.key,Xi.none()):new rr(e.key,e.data,Xi.none());{const n=e.data,s=Ms.empty();let i=new as($n.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?s.delete(e):s.set(e,t),i=i.add(e)}return new ar(e.key,s,new ls(i.toArray()),Xi.none())}}function tr(e,t,n){var s;e instanceof rr?function(e,t,n){const s=e.value.clone(),i=lr(e.fieldTransforms,t,n.transformResults);s.setAll(i),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):e instanceof ar?function(e,t,n){if(!Ji(e.precondition,t))return void t.convertToUnknownDocument(n.version);const s=lr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(or(e)),i.setAll(s),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(s=n,t.convertToNoDocument(s.version).setHasCommittedMutations())}function nr(e,t,n,s){return e instanceof rr?function(e,t,n,s){if(!Ji(e.precondition,t))return n;const i=e.value.clone(),r=cr(e.fieldTransforms,s,t);return i.setAll(r),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,s):e instanceof ar?function(e,t,n,s){if(!Ji(e.precondition,t))return n;const i=cr(e.fieldTransforms,s,t),r=t.data;return r.setAll(or(e)),r.setAll(i),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,s):(i=t,r=n,Ji(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):r);var i,r}function sr(e,t){let n=null;for(const s of e.fieldTransforms){const e=t.data.field(s.field),i=Ui(s.transform,e||null);null!=i&&(null===n&&(n=Ms.empty()),n.set(s.field,i))}return n||null}function ir(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,s=t.fieldTransforms,!!(void 0===n&&void 0===s||n&&s&&Ln(n,s,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,s=t.transform,n instanceof qi&&s instanceof qi||n instanceof Ki&&s instanceof Ki?Ln(n.elements,s.elements,Ns):n instanceof Hi&&s instanceof Hi?Ns(n.Pe,s.Pe):n instanceof $i&&s instanceof $i);var n,s}(e,t))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,s}class rr extends Zi{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ar extends Zi{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function or(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function lr(e,t,n){const s=new Map;wn(e.length===n.length);for(let i=0;i<n.length;i++){const r=e[i],a=r.transform,o=t.data.field(r.field);s.set(r.field,Bi(a,o,n[i]))}return s}function cr(e,t,n){const s=new Map;for(const i of e){const e=i.transform,r=n.data.field(i.field);s.set(i.field,Fi(e,r,t))}return s}class hr extends Zi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ur extends Zi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const t=this.mutations[s];t.key.isEqual(e.key)&&tr(t,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=nr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=nr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=_i();return this.mutations.forEach((s=>{const i=e.get(s.key),r=i.overlayedDocument;let a=this.applyToLocalView(r,i.mutatedFields);a=t.has(s.key)?null:a;const o=er(r,a);null!==o&&n.set(s.key,o),r.isValidDocument()||r.convertToNoDocument(Vn.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pi())}isEqual(e){return this.batchId===e.batchId&&Ln(this.mutations,e.mutations,((e,t)=>ir(e,t)))&&Ln(this.baseMutations,e.baseMutations,((e,t)=>ir(e,t)))}}class mr{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){wn(e.mutations.length===n.length);let s=function(){return ki}();const i=e.mutations;for(let r=0;r<i.length;r++)s=s.insert(i[r].key,n[r].version);return new mr(e,t,n,s)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr,yr;function vr(e){if(void 0===e)return gn("GRPC error has no .code"),Nn.UNKNOWN;switch(e){case gr.OK:return Nn.OK;case gr.CANCELLED:return Nn.CANCELLED;case gr.UNKNOWN:return Nn.UNKNOWN;case gr.DEADLINE_EXCEEDED:return Nn.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return Nn.RESOURCE_EXHAUSTED;case gr.INTERNAL:return Nn.INTERNAL;case gr.UNAVAILABLE:return Nn.UNAVAILABLE;case gr.UNAUTHENTICATED:return Nn.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return Nn.INVALID_ARGUMENT;case gr.NOT_FOUND:return Nn.NOT_FOUND;case gr.ALREADY_EXISTS:return Nn.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return Nn.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return Nn.FAILED_PRECONDITION;case gr.ABORTED:return Nn.ABORTED;case gr.OUT_OF_RANGE:return Nn.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return Nn.UNIMPLEMENTED;case gr.DATA_LOSS:return Nn.DATA_LOSS;default:return xn()}}(yr=gr||(gr={}))[yr.OK=0]="OK",yr[yr.CANCELLED=1]="CANCELLED",yr[yr.UNKNOWN=2]="UNKNOWN",yr[yr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yr[yr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yr[yr.NOT_FOUND=5]="NOT_FOUND",yr[yr.ALREADY_EXISTS=6]="ALREADY_EXISTS",yr[yr.PERMISSION_DENIED=7]="PERMISSION_DENIED",yr[yr.UNAUTHENTICATED=16]="UNAUTHENTICATED",yr[yr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yr[yr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yr[yr.ABORTED=10]="ABORTED",yr[yr.OUT_OF_RANGE=11]="OUT_OF_RANGE",yr[yr.UNIMPLEMENTED=12]="UNIMPLEMENTED",yr[yr.INTERNAL=13]="INTERNAL",yr[yr.UNAVAILABLE=14]="UNAVAILABLE",yr[yr.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xr=new Xt([4294967295,4294967295],0);function wr(e){const t=(new TextEncoder).encode(e),n=new Jt;return n.update(t),new Uint8Array(n.digest())}function br(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Xt([n,s],0),new Xt([i,r],0)]}class Nr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Tr(`Invalid padding: ${t}`);if(n<0)throw new Tr(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Tr(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Tr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xt.fromNumber(this.Ie)}Ee(e,t,n){let s=e.add(t.multiply(Xt.fromNumber(n)));return 1===s.compare(xr)&&(s=new Xt([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=wr(e),[n,s]=br(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,s,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),r=new Nr(i,s,t);return n.forEach((e=>r.insert(e))),r}insert(e){if(0===this.Ie)return;const t=wr(e),[n,s]=br(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,s,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Tr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,jr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Er(Vn.min(),s,new ss(Mn),Ei(),Pi())}}class jr{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jr(n,t,Pi(),Pi(),Pi())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t,n,s){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=s}}class Cr{constructor(e,t){this.targetId=e,this.me=t}}class Ar{constructor(e,t,n=hs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class _r{constructor(){this.fe=0,this.ge=Dr(),this.pe=hs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pi(),t=Pi(),n=Pi();return this.ge.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:xn()}})),new jr(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Dr()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,wn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ir{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ei(),this.qe=kr(),this.Qe=new ss(Mn)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:xn()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,s=this.Je(t);if(s){const i=s.target;if(ci(i))if(0===n){const e=new qn(i.path);this.Ue(t,e,Os.newNoDocument(e,Vn.min()))}else wn(1===n);else{const s=this.Ye(t);if(s!==n){const n=this.Ze(e),i=n?this.Xe(n,e,s):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=t;let r,a;try{r=ps(n).toUint8Array()}catch(o){if(o instanceof cs)return yn("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{a=new Nr(r,s,i)}catch(o){return yn(o instanceof Tr?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let s=0;return n.forEach((n=>{const i=this.Le.tt(),r=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(r)||(this.Ue(t,n,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((n,s)=>{const i=this.Je(s);if(i){if(n.current&&ci(i.target)){const t=new qn(i.target.path);null!==this.ke.get(t)||this.it(s,t)||this.Ue(s,t,Os.newNoDocument(t,e))}n.be&&(t.set(s,n.ve()),n.Ce())}}));let n=Pi();this.qe.forEach(((e,t)=>{let s=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(s=!1,!1)})),s&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const s=new Er(e,t,this.Qe,this.ke,n);return this.ke=Ei(),this.qe=kr(),this.Qe=new ss(Mn),s}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new _r,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new as(Mn),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||fn("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _r),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function kr(){return new ss(qn.comparator)}function Dr(){return new ss(qn.comparator)}const Pr=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Rr=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Mr=(()=>({and:"AND",or:"OR"}))();class Lr{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Or(e,t){return e.useProto3Json||Jn(t)?t:{value:t}}function Vr(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Fr(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Br(e,t){return Vr(e,t.toTimestamp())}function Ur(e){return wn(!!e),Vn.fromTimestamp(function(e){const t=ds(e);return new On(t.seconds,t.nanos)}(e))}function $r(e,t){return qr(e,t).canonicalString()}function qr(e,t){const n=(s=e,new Bn(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===t?n:n.child(t)}function zr(e){const t=Bn.fromString(e);return wn(la(t)),t}function Kr(e,t){return $r(e.databaseId,t.path)}function Gr(e,t){const n=zr(t);if(n.get(1)!==e.databaseId.projectId)throw new Tn(Nn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Tn(Nn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new qn(Qr(n))}function Hr(e,t){return $r(e.databaseId,t)}function Wr(e){return new Bn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qr(e){return wn(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Yr(e,t,n){return{name:Kr(e,t),fields:n.value.mapValue.fields}}function Xr(e,t){return{documents:[Hr(e,t.path)]}}function Jr(e,t){const n={structuredQuery:{}},s=t.path;let i;null!==t.collectionGroup?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Hr(e,i);const r=function(e){if(0!==e.length)return aa(Ks.create(e,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const a=function(e){if(0!==e.length)return e.map((e=>{return{field:ia((t=e).field),direction:ta(t.dir)};var t}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Or(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i};var l}function Zr(e){let t=function(e){const t=zr(e);return 4===t.length?Bn.emptyPath():Qr(t)}(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){wn(1===s);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let r=[];n.where&&(r=function(e){const t=ea(e);return t instanceof Ks&&Hs(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map((e=>{return new Us(ra((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Jn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Vs(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Vs(n,t)}(n.endAt)),function(e,t,n,s,i,r,a,o){return new hi(e,t,n,s,i,r,a,o)}(t,i,a,r,o,"F",l,c)}function ea(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ra(e.unaryFilter.field);return zs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ra(e.unaryFilter.field);return zs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ra(e.unaryFilter.field);return zs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ra(e.unaryFilter.field);return zs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xn()}}(e):void 0!==e.fieldFilter?(t=e,zs.create(ra(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xn()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Ks.create(e.compositeFilter.filters.map((e=>ea(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xn()}}(e.compositeFilter.op))}(e):xn();var t}function ta(e){return Pr[e]}function na(e){return Rr[e]}function sa(e){return Mr[e]}function ia(e){return{fieldPath:e.canonicalString()}}function ra(e){return $n.fromServerFormat(e.fieldPath)}function aa(e){return e instanceof zs?function(e){if("=="===e.op){if(Ds(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NAN"}};if(ks(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ds(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NOT_NAN"}};if(ks(e.value))return{unaryFilter:{field:ia(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ia(e.field),op:na(e.op),value:e.value}}}(e):e instanceof Ks?function(e){const t=e.getFilters().map((e=>aa(e)));return 1===t.length?t[0]:{compositeFilter:{op:sa(e.op),filters:t}}}(e):xn()}function oa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function la(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t,n,s,i=Vn.min(),r=Vn.min(),a=hs.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ca(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.ct=e}}function ua(e){const t=Zr({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fi(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.un=new ma}addToCollectionParentIndex(e,t){return this.un.add(t),Qn.resolve()}getCollectionParents(e,t){return Qn.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Qn.resolve()}deleteFieldIndex(e,t){return Qn.resolve()}deleteAllFieldIndexes(e){return Qn.resolve()}createTargetIndexes(e,t){return Qn.resolve()}getDocumentsMatchingTarget(e,t){return Qn.resolve(null)}getIndexType(e,t){return Qn.resolve(0)}getFieldIndexes(e,t){return Qn.resolve([])}getNextCollectionGroupToUpdate(e){return Qn.resolve(null)}getMinOffset(e,t){return Qn.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,t){return Qn.resolve(Kn.min())}updateCollectionGroup(e,t,n){return Qn.resolve()}updateIndexEntries(e,t){return Qn.resolve()}}class ma{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new as(Bn.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new as(Bn.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pa(0)}static kn(){return new pa(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.changes=new Ni((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Os.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Qn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&nr(n.mutation,e,ls.empty(),On.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Pi()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Pi()){const s=Ai();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((e=>{let t=Si();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ai();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Pi())))}populateOverlays(e,t,n){const s=[];return n.forEach((e=>{t.has(e)||s.push(e)})),this.documentOverlayCache.getOverlays(e,s).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,s){let i=Ei();const r=Ii(),a=Ii();return t.forEach(((e,t)=>{const a=n.get(t.key);s.has(t.key)&&(void 0===a||a.mutation instanceof ar)?i=i.insert(t.key,t):void 0!==a?(r.set(t.key,a.mutation.getFieldMask()),nr(a.mutation,t,a.mutation.getFieldMask(),On.now())):r.set(t.key,ls.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>r.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new ga(t,null!==(n=r.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Ii();let s=new ss(((e,t)=>e-t)),i=Pi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const r=t.get(e);if(null===r)return;let a=n.get(e)||ls.empty();a=i.applyToLocalView(r,a),n.set(e,a);const o=(s.get(i.batchId)||Pi()).add(e);s=s.insert(i.batchId,o)}))})).next((()=>{const r=[],a=s.getReverseIterator();for(;a.hasNext();){const s=a.getNext(),o=s.key,l=s.value,c=_i();l.forEach((e=>{if(!i.has(e)){const s=er(t.get(e),n.get(e));null!==s&&c.set(e,s),i=i.add(e)}})),r.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Qn.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,s){return i=t,qn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s);var i}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((i=>{const r=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-i.size):Qn.resolve(Ai());let a=-1,o=i;return r.next((t=>Qn.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Qn.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,Pi()))).next((e=>({batchId:a,changes:Ci(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qn(t)).next((e=>{let t=Si();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const i=t.collectionGroup;let r=Si();return this.indexManager.getCollectionParents(e,i).next((a=>Qn.forEach(a,(a=>{const o=(l=t,c=a.child(i),new hi(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,o,n,s).next((e=>{e.forEach(((e,t)=>{r=r.insert(e,t)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,s)))).next((e=>{i.forEach(((t,n)=>{const s=n.getKey();null===e.get(s)&&(e=e.insert(s,Os.newInvalidDocument(s)))}));let n=Si();return e.forEach(((e,s)=>{const r=i.get(e);void 0!==r&&nr(r.mutation,s,ls.empty(),On.now()),xi(t,s)&&(n=n.insert(e,s))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Qn.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(n=t).id,version:n.version,createTime:Ur(n.createTime)}),Qn.resolve();var n}getNamedQuery(e,t){return Qn.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(n=t).name,query:ua(n.bundledQuery),readTime:Ur(n.readTime)}),Qn.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.overlays=new ss(qn.comparator),this.Ir=new Map}getOverlay(e,t){return Qn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ai();return Qn.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,s)=>{this.ht(e,t,s)})),Qn.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Ir.get(n);return void 0!==s&&(s.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Qn.resolve()}getOverlaysForCollection(e,t,n){const s=Ai(),i=t.length+1,r=new qn(t.child("")),a=this.overlays.getIteratorFrom(r);for(;a.hasNext();){const e=a.getNext().value,r=e.getKey();if(!t.isPrefixOf(r.path))break;r.path.length===i&&e.largestBatchId>n&&s.set(e.getKey(),e)}return Qn.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let i=new ss(((e,t)=>e-t));const r=this.overlays.getIterator();for(;r.hasNext();){const e=r.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ai(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Ai(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=s)););return Qn.resolve(a)}ht(e,t,n){const s=this.overlays.get(n.key);if(null!==s){const e=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new pr(t,n));let i=this.Ir.get(t);void 0===i&&(i=Pi(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.sessionToken=hs.EMPTY_BYTE_STRING}getSessionToken(e){return Qn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Qn.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.Tr=new as(Na.Er),this.dr=new as(Na.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Na(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new Na(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new qn(new Bn([])),n=new Na(t,e),s=new Na(t,e+1),i=[];return this.dr.forEachInRange([n,s],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new qn(new Bn([])),n=new Na(t,e),s=new Na(t,e+1);let i=Pi();return this.dr.forEachInRange([n,s],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Na(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Na{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return qn.comparator(e.key,t.key)||Mn(e.wr,t.wr)}static Ar(e,t){return Mn(e.wr,t.wr)||qn.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new as(Na.Er)}checkEmpty(e){return Qn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new dr(i,t,n,s);this.mutationQueue.push(r);for(const a of s)this.br=this.br.add(new Na(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Qn.resolve(r)}lookupMutationBatch(e,t){return Qn.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.vr(n),i=s<0?0:s;return Qn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Qn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Qn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Na(t,0),s=new Na(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],(e=>{const t=this.Dr(e.wr);i.push(t)})),Qn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new as(Mn);return t.forEach((e=>{const t=new Na(e,0),s=new Na(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,s],(e=>{n=n.add(e.wr)}))})),Qn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;qn.isDocumentKey(i)||(i=i.child(""));const r=new Na(new qn(i),0);let a=new as(Mn);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===s&&(a=a.add(e.wr)),!0)}),r),Qn.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){wn(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Qn.forEach(t.mutations,(s=>{const i=new Na(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Na(t,0),s=this.br.firstAfterOrEqual(n);return Qn.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qn.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.Mr=e,this.docs=new ss(qn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),i=s?s.size:0,r=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:r}),this.size+=r-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Qn.resolve(n?n.document.mutableCopy():Os.newInvalidDocument(t))}getEntries(e,t){let n=Ei();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Os.newInvalidDocument(e))})),Qn.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let i=Ei();const r=t.path,a=new qn(r.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!r.isPrefixOf(e.path))break;e.path.length>r.length+1||Gn(zn(a),n)<=0||(s.has(a.key)||xi(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Qn.resolve(i)}getAllFromCollectionGroup(e,t,n,s){xn()}Or(e,t){return Qn.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ja(this)}getSize(e){return Qn.resolve(this.size)}}class ja extends fa{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)})),Qn.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.persistence=e,this.Nr=new Ni((e=>oi(e)),li),this.lastRemoteSnapshotVersion=Vn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ba,this.targetCount=0,this.kr=pa.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Qn.resolve()}getLastRemoteSnapshotVersion(e){return Qn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qn.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Qn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Qn.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Qn.resolve()}updateTargetData(e,t){return this.Kn(t),Qn.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Qn.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.Nr.forEach(((r,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(r),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),Qn.waitFor(i).next((()=>s))}getTargetCount(e){return Qn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Qn.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Qn.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((t=>{i.push(s.markPotentiallyOrphaned(e,t))})),Qn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Qn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Qn.resolve(n)}containsKey(e,t){return Qn.resolve(this.Br.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Xn(0),this.Kr=!1,this.Kr=!0,this.$r=new wa,this.referenceDelegate=e(this),this.Ur=new Sa(this),this.indexManager=new da,this.remoteDocumentCache=new Ea((e=>this.referenceDelegate.Wr(e))),this.serializer=new ha(t),this.Gr=new va(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xa,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new Ta(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){fn("MemoryPersistence","Starting transaction:",e);const s=new Aa(this.Qr.next());return this.referenceDelegate.zr(),n(s).next((e=>this.referenceDelegate.jr(s).next((()=>e)))).toPromise().then((e=>(s.raiseOnCommittedEvent(),e)))}Hr(e,t){return Qn.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Aa extends Hn{constructor(e){super(),this.currentSequenceNumber=e}}class _a{constructor(e){this.persistence=e,this.Jr=new ba,this.Yr=null}static Zr(e){return new _a(e)}get Xr(){if(this.Yr)return this.Yr;throw xn()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Qn.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Qn.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Qn.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qn.forEach(this.Xr,(n=>{const s=qn.fromPath(n);return this.ei(e,s).next((e=>{e||t.removeEntry(s,Vn.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Qn.or([()=>Qn.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=s}static Wi(e,t){let n=Pi(),s=Pi();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ia(e,t.fromCache,n,s)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=pe()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,s){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,s,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new ka;return this.Xi(e,t,n).next((s=>{if(i.result=s,this.zi)return this.es(e,t,n,s.size)}))})).next((()=>i.result))}es(e,t,n,s){return n.documentReadCount<this.ji?(pn()<=Ae.DEBUG&&fn("QueryEngine","SDK will not create cache indexes for query:",vi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Qn.resolve()):(pn()<=Ae.DEBUG&&fn("QueryEngine","Query:",vi(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(pn()<=Ae.DEBUG&&fn("QueryEngine","The SDK decides to create cache indexes for query:",vi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pi(t))):Qn.resolve())}Yi(e,t){if(di(t))return Qn.resolve(null);let n=pi(t);return this.indexManager.getIndexType(e,n).next((s=>0===s?null:(null!==t.limit&&1===s&&(t=fi(t,null,"F"),n=pi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const i=Pi(...s);return this.Ji.getDocuments(e,i).next((s=>this.indexManager.getMinOffset(e,n).next((n=>{const r=this.ts(t,s);return this.ns(t,r,i,n.readTime)?this.Yi(e,fi(t,null,"F")):this.rs(e,r,t,n)}))))})))))}Zi(e,t,n,s){return di(t)||s.isEqual(Vn.min())?Qn.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const r=this.ts(t,i);return this.ns(t,r,n,s)?Qn.resolve(null):(pn()<=Ae.DEBUG&&fn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vi(t)),this.rs(e,r,t,function(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=Vn.fromTimestamp(1e9===s?new On(n+1,0):new On(n,s));return new Kn(i,qn.empty(),t)}(s,-1)).next((e=>e)))}))}ts(e,t){let n=new as(wi(e));return t.forEach(((t,s)=>{xi(e,s)&&(n=n.add(s))})),n}ns(e,t,n,s){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,t,n){return pn()<=Ae.DEBUG&&fn("QueryEngine","Using full collection scan to execute query:",vi(t)),this.Ji.getDocumentsMatchingQuery(e,t,Kn.min(),n)}rs(e,t,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,n,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new ss(Mn),this._s=new Ni((e=>oi(e)),li),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ya(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}async function Ra(e,t){const n=bn(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let s;return n.mutationQueue.getAllMutationBatches(e).next((i=>(s=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],r=[];let a=Pi();for(const e of s){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:r})))}))}))}function Ma(e){const t=bn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function La(e,t){const n=bn(e),s=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const r=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach(((r,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,r.removedDocuments,o).next((()=>n.Ur.addMatchingKeys(e,r.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);var h,u,d;null!==t.targetMismatches.get(o)?c=c.withResumeToken(hs.EMPTY_BYTE_STRING,Vn.min()).withLastLimboFreeSnapshotVersion(Vn.min()):r.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(r.resumeToken,s)),i=i.insert(o,c),u=c,d=r,(0===(h=l).resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-h.snapshotVersion.toMicroseconds()>=3e8||d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size>0)&&a.push(n.Ur.updateTargetData(e,c))}));let o=Ei(),l=Pi();if(t.documentUpdates.forEach((s=>{t.resolvedLimboDocuments.has(s)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,s))})),a.push(function(e,t,n){let s=Pi(),i=Pi();return n.forEach((e=>s=s.add(e))),t.getEntries(e,s).next((e=>{let s=Ei();return n.forEach(((n,r)=>{const a=e.get(n);r.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),r.isNoDocument()&&r.version.isEqual(Vn.min())?(t.removeEntry(n,r.readTime),s=s.insert(n,r)):!a.isValidDocument()||r.version.compareTo(a.version)>0||0===r.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(r),s=s.insert(n,r)):fn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",r.version)})),{Ps:s,Is:i}}))}(e,r,t.documentUpdates).next((e=>{o=e.Ps,l=e.Is}))),!s.isEqual(Vn.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,s)));a.push(t)}return Qn.waitFor(a).next((()=>r.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.os=i,e)))}function Oa(e,t){const n=bn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function Va(e,t,n){const s=bn(e),i=s.os.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(e=>s.persistence.referenceDelegate.removeTarget(e,i)))}catch(a){if(!Yn(a))throw a;fn("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}s.os=s.os.remove(t),s._s.delete(i.target)}function Fa(e,t,n){const s=bn(e);let i=Vn.min(),r=Pi();return s.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const s=bn(e),i=s._s.get(n);return void 0!==i?Qn.resolve(s.os.get(i)):s.Ur.getTargetData(t,n)}(s,e,pi(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{r=e}))})).next((()=>s.ss.getDocumentsMatchingQuery(e,t,n?i:Vn.min(),n?r:Pi()))).next((e=>(function(e,t,n){let s=e.us.get(t)||Vn.min();n.forEach(((e,t)=>{t.readTime.compareTo(s)>0&&(s=t.readTime)})),e.us.set(t,s)}(s,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Ts:r})))))}class Ba{constructor(){this.activeTargetIds=Ri}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ua{constructor(){this.so=new Ba,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ba,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{_o(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){fn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){fn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za=null;function Ka(){return null===za?za=268435456+Math.round(2147483648*Math.random()):za++,"0x"+za.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Ga={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="WebChannelConnection";class Qa extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${s}`}get Fo(){return!1}Mo(e,t,n,s,i){const r=Ka(),a=this.xo(e,t.toUriEncodedString());fn("RestConnection",`Sending RPC '${e}' ${r}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,s,i),this.No(e,a,o,n).then((t=>(fn("RestConnection",`Received RPC '${e}' ${r}: `,t),t)),(t=>{throw yn("RestConnection",`RPC '${e}' ${r} failed with error: `,t,"url: ",a,"request:",n),t}))}Lo(e,t,n,s,i,r){return this.Mo(e,t,n,s,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=Ga[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,s){const i=Ka();return new Promise(((r,a)=>{const o=new en;o.setWithCredentials(!0),o.listenOnce(nn.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case sn.NO_ERROR:const t=o.getResponseJson();fn(Wa,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),r(t);break;case sn.TIMEOUT:fn(Wa,`RPC '${e}' ${i} timed out`),a(new Tn(Nn.DEADLINE_EXCEEDED,"Request time out"));break;case sn.HTTP_ERROR:const n=o.getStatus();if(fn(Wa,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Nn).indexOf(t)>=0?t:Nn.UNKNOWN}(t.status);a(new Tn(e,t.message))}else a(new Tn(Nn.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Tn(Nn.UNAVAILABLE,"Connection failed."));break;default:xn()}}finally{fn(Wa,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(s);fn(Wa,`RPC '${e}' ${i} sending request:`,s),o.send(t,"POST",l,n,15)}))}Bo(e,t,n){const s=Ka(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=ln(),a=on(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");fn(Wa,`Creating RPC '${e}' stream ${s}: ${c}`,o);const h=r.createWebChannel(c,o);let u=!1,d=!1;const m=new Ha({Io:t=>{d?fn(Wa,`Not sending because RPC '${e}' stream ${s} is closed:`,t):(u||(fn(Wa,`Opening RPC '${e}' stream ${s} transport.`),h.open(),u=!0),fn(Wa,`RPC '${e}' stream ${s} sending:`,t),h.send(t))},To:()=>h.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(h,tn.EventType.OPEN,(()=>{d||(fn(Wa,`RPC '${e}' stream ${s} transport opened.`),m.yo())})),p(h,tn.EventType.CLOSE,(()=>{d||(d=!0,fn(Wa,`RPC '${e}' stream ${s} transport closed`),m.So())})),p(h,tn.EventType.ERROR,(t=>{d||(d=!0,yn(Wa,`RPC '${e}' stream ${s} transport errored:`,t),m.So(new Tn(Nn.UNAVAILABLE,"The operation could not be completed")))})),p(h,tn.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];wn(!!i);const r=i,a=r.error||(null===(n=r[0])||void 0===n?void 0:n.error);if(a){fn(Wa,`RPC '${e}' stream ${s} received error:`,a);const t=a.status;let n=function(e){const t=gr[e];if(void 0!==t)return vr(t)}(t),i=a.message;void 0===n&&(n=Nn.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,m.So(new Tn(n,i)),h.close()}else fn(Wa,`RPC '${e}' stream ${s} received:`,i),m.bo(i)}})),p(a,an.STAT_EVENT,(t=>{t.stat===rn.PROXY?fn(Wa,`RPC '${e}' stream ${s} detected buffering proxy`):t.stat===rn.NOPROXY&&fn(Wa,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{m.wo()}),0),m}}function Ya(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(e){return new Lr(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,t,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-n);s>0&&fn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t,n,s,i,r,a,o){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ja(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Nn.RESOURCE_EXHAUSTED?(gn(t.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Nn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Yo===t&&this.P_(e,n)}),(t=>{e((()=>{const e=new Tn(Nn.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return fn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(fn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eo extends Za{constructor(e,t,n,s,i,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,r),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(s=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===s?1:"REMOVE"===s?2:"CURRENT"===s?3:"RESET"===s?4:xn(),r=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(wn(void 0===t||"string"==typeof t),hs.fromBase64String(t||"")):(wn(void 0===t||t instanceof Buffer||t instanceof Uint8Array),hs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(e){const t=void 0===e.code?Nn.UNKNOWN:vr(e.code);return new Tn(t,e.message||"")}(o);n=new Ar(i,r,a,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=Gr(e,s.document.name),r=Ur(s.document.updateTime),a=s.document.createTime?Ur(s.document.createTime):Vn.min(),o=new Ms({mapValue:{fields:s.document.fields}}),l=Os.newFoundDocument(i,r,a,o),c=s.targetIds||[],h=s.removedTargetIds||[];n=new Sr(c,h,l.key,l)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=Gr(e,s.document),r=s.readTime?Ur(s.readTime):Vn.min(),a=Os.newNoDocument(i,r),o=s.removedTargetIds||[];n=new Sr([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=Gr(e,s.document),r=s.removedTargetIds||[];n=new Sr([],r,i,null)}else{if(!("filter"in t))return xn();{t.filter;const e=t.filter;e.targetId;const{count:s=0,unchangedNames:i}=e,r=new fr(s,i),a=e.targetId;n=new Cr(a,r)}}var s;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Vn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vn.min():t.readTime?Ur(t.readTime):Vn.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Wr(this.serializer),t.addTarget=function(e,t){let n;const s=t.target;if(n=ci(s)?{documents:Xr(e,s)}:{query:Jr(e,s)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Fr(e,t.resumeToken);const s=Or(e,t.expectedCount);null!==s&&(n.expectedCount=s)}else if(t.snapshotVersion.compareTo(Vn.min())>0){n.readTime=Vr(e,t.snapshotVersion.toTimestamp());const s=Or(e,t.expectedCount);null!==s&&(n.expectedCount=s)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xn()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Wr(this.serializer),t.removeTarget=e,this.a_(t)}}class to extends Za{constructor(e,t,n,s,i,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,r),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return wn(!!e.streamToken),this.lastStreamToken=e.streamToken,wn(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){wn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(wn(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ur(e.updateTime):Ur(t);return n.isEqual(Vn.min())&&(n=Ur(t)),new Yi(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ur(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Wr(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof rr)n={update:Yr(e,t.key,t.value)};else if(t instanceof hr)n={delete:Kr(e,t.key)};else if(t instanceof ar)n={update:Yr(e,t.key,t.data),updateMask:oa(t.fieldMask)};else{if(!(t instanceof ur))return xn();n={verify:Kr(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof $i)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof qi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ki)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Hi)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw xn()}(0,e)))),t.precondition.isNone||(n.currentDocument=(s=e,void 0!==(i=t.precondition).updateTime?{updateTime:Br(s,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:xn())),n;var s,i}(this.serializer,e)))};this.a_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Tn(Nn.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.Mo(e,qr(t,n),s,i,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tn(Nn.UNKNOWN,e.toString())}))}Lo(e,t,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,a])=>this.connection.Lo(e,qr(t,n),s,r,a,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Tn(Nn.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class so{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gn(t),this.D_=!1):fn("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{po(this)&&(fn("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=bn(e);t.L_.add(4),await ao(t),t.q_.set("Unknown"),t.L_.delete(4),await ro(t)}(this))}))})),this.q_=new so(n,s)}}async function ro(e){if(po(e))for(const t of e.B_)await t(!0)}async function ao(e){for(const t of e.B_)await t(!1)}function oo(e,t){const n=bn(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),mo(n)?uo(n):Do(n).r_()&&co(n,t))}function lo(e,t){const n=bn(e),s=Do(n);n.N_.delete(t),s.r_()&&ho(n,t),0===n.N_.size&&(s.r_()?s.o_():po(n)&&n.q_.set("Unknown"))}function co(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Do(e).A_(t)}function ho(e,t){e.Q_.xe(t),Do(e).R_(t)}function uo(e){e.Q_=new Ir({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Do(e).start(),e.q_.v_()}function mo(e){return po(e)&&!Do(e).n_()&&e.N_.size>0}function po(e){return 0===bn(e).L_.size}function fo(e){e.Q_=void 0}async function go(e){e.q_.set("Online")}async function yo(e){e.N_.forEach(((t,n)=>{co(e,t)}))}async function vo(e,t){fo(e),mo(e)?(e.q_.M_(t),uo(e)):e.q_.set("Unknown")}async function xo(e,t,n){if(e.q_.set("Online"),t instanceof Ar&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const s of t.targetIds)e.N_.has(s)&&(await e.remoteSyncer.rejectListen(s,n),e.N_.delete(s),e.Q_.removeTarget(s))}(e,t)}catch(s){fn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await wo(e,s)}else if(t instanceof Sr?e.Q_.Ke(t):t instanceof Cr?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Vn.min()))try{const t=await Ma(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(s);i&&e.N_.set(s,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const s=e.N_.get(t);if(!s)return;e.N_.set(t,s.withResumeToken(hs.EMPTY_BYTE_STRING,s.snapshotVersion)),ho(e,t);const i=new ca(s.target,t,n,s.sequenceNumber);co(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){fn("RemoteStore","Failed to raise snapshot:",i),await wo(e,i)}}async function wo(e,t,n){if(!Yn(t))throw t;e.L_.add(1),await ao(e),e.q_.set("Offline"),n||(n=()=>Ma(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{fn("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await ro(e)}))}function bo(e,t){return t().catch((n=>wo(e,n,t)))}async function No(e){const t=bn(e),n=Po(t);let s=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;To(t);)try{const e=await Oa(t.localStore,s);if(null===e){0===t.O_.length&&n.o_();break}s=e.batchId,Eo(t,e)}catch(i){await wo(t,i)}jo(t)&&So(t)}function To(e){return po(e)&&e.O_.length<10}function Eo(e,t){e.O_.push(t);const n=Po(e);n.r_()&&n.V_&&n.m_(t.mutations)}function jo(e){return po(e)&&!Po(e).n_()&&e.O_.length>0}function So(e){Po(e).start()}async function Co(e){Po(e).p_()}async function Ao(e){const t=Po(e);for(const n of e.O_)t.m_(n.mutations)}async function _o(e,t,n){const s=e.O_.shift(),i=mr.from(s,t,n);await bo(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await No(e)}async function Io(e,t){t&&Po(e).V_&&await async function(e,t){if(function(e){switch(e){default:return xn();case Nn.CANCELLED:case Nn.UNKNOWN:case Nn.DEADLINE_EXCEEDED:case Nn.RESOURCE_EXHAUSTED:case Nn.INTERNAL:case Nn.UNAVAILABLE:case Nn.UNAUTHENTICATED:return!1;case Nn.INVALID_ARGUMENT:case Nn.NOT_FOUND:case Nn.ALREADY_EXISTS:case Nn.PERMISSION_DENIED:case Nn.FAILED_PRECONDITION:case Nn.ABORTED:case Nn.OUT_OF_RANGE:case Nn.UNIMPLEMENTED:case Nn.DATA_LOSS:return!0}}(n=t.code)&&n!==Nn.ABORTED){const n=e.O_.shift();Po(e).s_(),await bo(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await No(e)}var n}(e,t),jo(e)&&So(e)}async function ko(e,t){const n=bn(e);n.asyncQueue.verifyOperationInProgress(),fn("RemoteStore","RemoteStore received new credentials");const s=po(n);n.L_.add(3),await ao(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await ro(n)}function Do(e){return e.K_||(e.K_=function(e,t,n){const s=bn(e);return s.w_(),new eo(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Eo:go.bind(null,e),Ro:yo.bind(null,e),mo:vo.bind(null,e),d_:xo.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),mo(e)?uo(e):e.q_.set("Unknown")):(await e.K_.stop(),fo(e))}))),e.K_}function Po(e){return e.U_||(e.U_=function(e,t,n){const s=bn(e);return s.w_(),new to(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Co.bind(null,e),mo:Io.bind(null,e),f_:Ao.bind(null,e),g_:_o.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await No(e)):(await e.U_.stop(),e.O_.length>0&&(fn("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ro{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,i){const r=Date.now()+n,a=new Ro(e,t,r,s,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tn(Nn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mo(e,t){if(gn("AsyncQueue",`${t}: ${e}`),Yn(e))return new Tn(Nn.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.comparator=e?(t,n)=>e(t,n)||qn.comparator(t.key,n.key):(e,t)=>qn.comparator(e.key,t.key),this.keyedMap=Si(),this.sortedSet=new ss(this.comparator)}static emptySet(e){return new Lo(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lo))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,s=n.getNext().key;if(!e.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Lo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.W_=new ss(qn.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xn():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Vo{constructor(e,t,n,s,i,r,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=r,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,s,i){const r=[];return t.forEach((e=>{r.push({type:0,doc:e})})),new Vo(e,t,Lo.emptySet(t),r,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Bo{constructor(){this.queries=Uo(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=bn(e),s=n.queries;n.queries=Uo(),s.forEach(((e,n)=>{for(const s of n.j_)s.onError(t)}))}(this,new Tn(Nn.ABORTED,"Firestore shutting down"))}}function Uo(){return new Ni((e=>yi(e)),gi)}async function $o(e,t){const n=bn(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.H_()&&t.J_()&&(s=2):(r=new Fo,s=t.J_()?0:1);try{switch(s){case 0:r.z_=await n.onListen(i,!0);break;case 1:r.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const e=Mo(a,`Initialization of query '${vi(t.query)}' failed`);return void t.onError(e)}n.queries.set(i,r),r.j_.push(t),t.Z_(n.onlineState),r.z_&&t.X_(r.z_)&&Go(n)}async function qo(e,t){const n=bn(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const e=r.j_.indexOf(t);e>=0&&(r.j_.splice(e,1),0===r.j_.length?i=t.J_()?0:1:!r.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function zo(e,t){const n=bn(e);let s=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(s=!0);t.z_=i}}s&&Go(n)}function Ko(e,t,n){const s=bn(e),i=s.queries.get(t);if(i)for(const r of i.j_)r.onError(n);s.queries.delete(t)}function Go(e){e.Y_.forEach((e=>{e.next()}))}var Ho,Wo;(Wo=Ho||(Ho={})).ea="default",Wo.Cache="cache";class Qo{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Vo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ho.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.key=e}}class Xo{constructor(e){this.key=e}}class Jo{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pi(),this.mutatedKeys=Pi(),this.Aa=wi(e),this.Ra=new Lo(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Oo,s=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,r=s,a=!1;const o="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,l="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((e,t)=>{const c=s.get(e),h=xi(this.query,t)?t:null,u=!!c&&this.mutatedKeys.has(c.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let m=!1;c&&h?c.data.isEqual(h.data)?u!==d&&(n.track({type:3,doc:h}),m=!0):this.ga(c,h)||(n.track({type:2,doc:h}),m=!0,(o&&this.Aa(h,o)>0||l&&this.Aa(h,l)<0)&&(a=!0)):!c&&h?(n.track({type:0,doc:h}),m=!0):c&&!h&&(n.track({type:1,doc:c}),m=!0,(o||l)&&(a=!0)),m&&(h?(r=r.add(h),i=d?i.add(e):i.delete(e)):(r=r.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const e="F"===this.query.limitType?r.last():r.first();r=r.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:r,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const r=e.fa.G_();r.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xn()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),s=null!=s&&s;const a=t&&!s?this.ya():[],o=0===this.da.size&&this.current&&!s?1:0,l=o!==this.Ea;return this.Ea=o,0!==r.length||l?{snapshot:new Vo(this.query,e.Ra,i,r,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Oo,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pi(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new Xo(e))})),this.da.forEach((n=>{e.has(n)||t.push(new Yo(n))})),t}ba(e){this.Ta=e.Ts,this.da=Pi();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Vo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Zo{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class el{constructor(e){this.key=e,this.va=!1}}class tl{constructor(e,t,n,s,i,r){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=r,this.Ca={},this.Fa=new Ni((e=>yi(e)),gi),this.Ma=new Map,this.xa=new Set,this.Oa=new ss(qn.comparator),this.Na=new Map,this.La=new ba,this.Ba={},this.ka=new Map,this.qa=pa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function nl(e,t,n=!0){const s=Tl(e);let i;const r=s.Fa.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.Da()):i=await il(s,t,n,!0),i}async function sl(e,t){const n=Tl(e);await il(n,t,!0,!1)}async function il(e,t,n,s){const i=await function(e,t){const n=bn(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let s;return n.Ur.getTargetData(e,t).next((i=>i?(s=i,Qn.resolve(s)):n.Ur.allocateTargetId(e).next((i=>(s=new ca(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,s).next((()=>s)))))))})).then((e=>{const s=n.os.get(e.targetId);return(null===s||e.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}(e.localStore,pi(t)),r=i.targetId,a=e.sharedClientState.addLocalQueryTarget(r,n);let o;return s&&(o=await async function(e,t,n,s,i){e.Ka=(t,n,s)=>async function(e,t,n,s){let i=t.view.ma(n);i.ns&&(i=await Fa(e.localStore,t.query,!1).then((({documents:e})=>t.view.ma(e,i))));const r=s&&s.targetChanges.get(t.targetId),a=s&&null!=s.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,r,a);return yl(e,t.targetId,o.wa),o.snapshot}(e,t,n,s);const r=await Fa(e.localStore,t,!0),a=new Jo(t,r.Ts),o=a.ma(r.documents),l=jr.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);yl(e,n,c.wa);const h=new Zo(t,n,a);return e.Fa.set(t,h),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}(e,t,r,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&oo(e.remoteStore,i),o}async function rl(e,t,n){const s=bn(e),i=s.Fa.get(t),r=s.Ma.get(i.targetId);if(r.length>1)return s.Ma.set(i.targetId,r.filter((e=>!gi(e,t)))),void s.Fa.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Va(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&lo(s.remoteStore,i.targetId),fl(s,i.targetId)})).catch(Wn)):(fl(s,i.targetId),await Va(s.localStore,i.targetId,!0))}async function al(e,t){const n=bn(e),s=n.Fa.get(t),i=n.Ma.get(s.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),lo(n.remoteStore,s.targetId))}async function ol(e,t,n){const s=function(e){const t=bn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ul.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dl.bind(null,t),t}(e);try{const e=await function(e,t){const n=bn(e),s=On.now(),i=t.reduce(((e,t)=>e.add(t.key)),Pi());let r,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Ei(),l=Pi();return n.cs.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{r=i;const a=[];for(const e of t){const t=sr(e,r.get(e.key).overlayedDocument);null!=t&&a.push(new ar(e.key,t,Ls(t.value.mapValue),Xi.exists(!0)))}return n.mutationQueue.addMutationBatch(e,s,a,t)})).next((t=>{a=t;const s=t.applyToLocalDocumentSet(r,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,s)}))})).then((()=>({batchId:a.batchId,changes:Ci(r)})))}(s.localStore,t);s.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let s=e.Ba[e.currentUser.toKey()];s||(s=new ss(Mn)),s=s.insert(t,n),e.Ba[e.currentUser.toKey()]=s}(s,e.batchId,n),await wl(s,e.changes),await No(s.remoteStore)}catch(i){const e=Mo(i,"Failed to persist write");n.reject(e)}}async function ll(e,t){const n=bn(e);try{const e=await La(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const s=n.Na.get(t);s&&(wn(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?s.va=!0:e.modifiedDocuments.size>0?wn(s.va):e.removedDocuments.size>0&&(wn(s.va),s.va=!1))})),await wl(n,e,t)}catch(s){await Wn(s)}}function cl(e,t,n){const s=bn(e);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const e=[];s.Fa.forEach(((n,s)=>{const i=s.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=bn(e);n.onlineState=t;let s=!1;n.queries.forEach(((e,n)=>{for(const i of n.j_)i.Z_(t)&&(s=!0)})),s&&Go(n)}(s.eventManager,t),e.length&&s.Ca.d_(e),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function hl(e,t,n){const s=bn(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Na.get(t),r=i&&i.key;if(r){let e=new ss(qn.comparator);e=e.insert(r,Os.newNoDocument(r,Vn.min()));const n=Pi().add(r),i=new Er(Vn.min(),new Map,new ss(Mn),e,n);await ll(s,i),s.Oa=s.Oa.remove(r),s.Na.delete(t),xl(s)}else await Va(s.localStore,t,!1).then((()=>fl(s,t,n))).catch(Wn)}async function ul(e,t){const n=bn(e),s=t.batch.batchId;try{const e=await function(e,t){const n=bn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const s=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,s){const i=n.batch,r=i.keys();let a=Qn.resolve();return r.forEach((e=>{a=a.next((()=>s.getEntry(t,e))).next((t=>{const r=n.docVersions.get(e);wn(null!==r),t.version.compareTo(r)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),s.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Pi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,s)))}))}(n.localStore,t);pl(n,s,null),ml(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wl(n,e)}catch(i){await Wn(i)}}async function dl(e,t,n){const s=bn(e);try{const e=await function(e,t){const n=bn(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let s;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(wn(null!==t),s=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,s,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,s))).next((()=>n.localDocuments.getDocuments(e,s)))}))}(s.localStore,t);pl(s,t,n),ml(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await wl(s,e)}catch(i){await Wn(i)}}function ml(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function pl(e,t,n){const s=bn(e);let i=s.Ba[s.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),s.Ba[s.currentUser.toKey()]=i}}function fl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Ma.get(t))e.Fa.delete(s),n&&e.Ca.$a(s,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||gl(e,t)}))}function gl(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(lo(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),xl(e))}function yl(e,t,n){for(const s of n)s instanceof Yo?(e.La.addReference(s.key,t),vl(e,s)):s instanceof Xo?(fn("SyncEngine","Document no longer in limbo: "+s.key),e.La.removeReference(s.key,t),e.La.containsKey(s.key)||gl(e,s.key)):xn()}function vl(e,t){const n=t.key,s=n.path.canonicalString();e.Oa.get(n)||e.xa.has(s)||(fn("SyncEngine","New document in limbo: "+n),e.xa.add(s),xl(e))}function xl(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new qn(Bn.fromString(t)),s=e.qa.next();e.Na.set(s,new el(n)),e.Oa=e.Oa.insert(n,s),oo(e.remoteStore,new ca(pi(ui(n.path)),s,"TargetPurposeLimboResolution",Xn.oe))}}async function wl(e,t,n){const s=bn(e),i=[],r=[],a=[];s.Fa.isEmpty()||(s.Fa.forEach(((e,o)=>{a.push(s.Ka(o,t,n).then((e=>{var t;if((e||n)&&s.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;s.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Ia.Wi(o.targetId,e);r.push(t)}})))})),await Promise.all(a),s.Ca.d_(i),await async function(e,t){const n=bn(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Qn.forEach(t,(t=>Qn.forEach(t.$i,(s=>n.persistence.referenceDelegate.addReference(e,t.targetId,s))).next((()=>Qn.forEach(t.Ui,(s=>n.persistence.referenceDelegate.removeReference(e,t.targetId,s)))))))))}catch(s){if(!Yn(s))throw s;fn("LocalStore","Failed to update sequence numbers: "+s)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.os.get(e),s=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(s);n.os=n.os.insert(e,i)}}}(s.localStore,r))}async function bl(e,t){const n=bn(e);if(!n.currentUser.isEqual(t)){fn("SyncEngine","User change. New user:",t.toKey());const e=await Ra(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(s=n).ka.forEach((e=>{e.forEach((e=>{e.reject(new Tn(Nn.CANCELLED,i))}))})),s.ka.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await wl(n,e.hs)}var s,i}function Nl(e,t){const n=bn(e),s=n.Na.get(t);if(s&&s.va)return Pi().add(s.key);{let e=Pi();const s=n.Ma.get(t);if(!s)return e;for(const t of s){const s=n.Fa.get(t);e=e.unionWith(s.view.Va)}return e}}function Tl(e){const t=bn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ll.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hl.bind(null,t),t.Ca.d_=zo.bind(null,t.eventManager),t.Ca.$a=Ko.bind(null,t.eventManager),t}class El{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xa(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return function(e,t,n,s){return new Pa(e,t,n,s)}(this.persistence,new Da,e.initialUser,this.serializer)}Ga(e){return new Ca(_a.Zr,this.serializer)}Wa(e){return new Ua}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}El.provider={build:()=>new El};class jl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>cl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=bl.bind(null,this.syncEngine),await async function(e,t){const n=bn(e);t?(n.L_.delete(2),await ro(n)):t||(n.L_.add(2),await ao(n),n.q_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Bo}createDatastore(e){const t=Xa(e.databaseInfo.databaseId),n=(s=e.databaseInfo,new Qa(s));var s;return function(e,t,n,s){return new no(e,t,n,s)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,s=e.asyncQueue,i=e=>cl(this.syncEngine,e,0),r=qa.D()?new qa:new $a,new io(t,n,s,i,r);var t,n,s,i,r}createSyncEngine(e,t){return function(e,t,n,s,i,r,a){const o=new tl(e,t,n,s,i,r);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=bn(e);fn("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await ao(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}jl.provider={build:()=>new jl};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t,n,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=un.UNAUTHENTICATED,this.clientId=Rn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{fn("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(fn("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Mo(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Al(e,t){e.asyncQueue.verifyOperationInProgress(),fn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async e=>{s.isEqual(e)||(await Ra(t.localStore,e),s=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function _l(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){fn("FirestoreClient","Using user provided OfflineComponentProvider");try{await Al(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===Nn.FAILED_PRECONDITION||n.code===Nn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;yn("Error using user provided cache. Falling back to memory cache: "+i),await Al(e,new El)}}else fn("FirestoreClient","Using default OfflineComponentProvider"),await Al(e,new El);var n;return e._offlineComponents}(e);fn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ko(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ko(t.remoteStore,n))),e._onlineComponents=t}async function Il(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(fn("FirestoreClient","Using user provided OnlineComponentProvider"),await _l(e,e._uninitializedComponentsProvider._online)):(fn("FirestoreClient","Using default OnlineComponentProvider"),await _l(e,new jl))),e._onlineComponents}async function kl(e){const t=await Il(e),n=t.eventManager;return n.onListen=nl.bind(null,t.syncEngine),n.onUnlisten=rl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=sl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=al.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Dl(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Pl=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(e,t,n){if(!n)throw new Tn(Nn.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ml(e){if(!qn.isDocumentKey(e))throw new Tn(Nn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ll(e){if(qn.isDocumentKey(e))throw new Tn(Nn.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ol(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":xn()}function Vl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Tn(Nn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ol(e);throw new Tn(Nn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Tn(Nn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tn(Nn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,s){if(!0===t&&!0===s)throw new Tn(Nn.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dl(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Tn(Nn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Tn(Nn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Tn(Nn.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Bl{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fl({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tn(Nn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tn(Nn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fl(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sn;switch(e.type){case"firstParty":return new In(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Tn(Nn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Pl.get(e);t&&(fn("ComponentProvider","Removing Datastore"),Pl.delete(e),t.terminate())}(this),Promise.resolve()}}function Ul(e,t,n,s={}){var i;const r=(e=Vl(e,Bl))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==r.host&&r.host!==a&&yn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:a,ssl:!1})),s.mockUserToken){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=un.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(r)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(s.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const r=s.mockUserToken.sub||s.mockUserToken.user_id;if(!r)throw new Tn(Nn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new un(r)}e._authCredentials=new Cn(new jn(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $l(this.firestore,e,this._query)}}class ql{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ql(this.firestore,e,this._key)}}class zl extends $l{constructor(e,t,n){super(e,t,ui(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ql(this.firestore,null,new qn(e))}withConverter(e){return new zl(this.firestore,e,this._path)}}function Kl(e,t,...n){if(e=Te(e),Rl("collection","path",t),e instanceof Bl){const s=Bn.fromString(t,...n);return Ll(s),new zl(e,null,s)}{if(!(e instanceof ql||e instanceof zl))throw new Tn(Nn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Bn.fromString(t,...n));return Ll(s),new zl(e.firestore,null,s)}}function Gl(e,t,...n){if(e=Te(e),1===arguments.length&&(t=Rn.newId()),Rl("doc","path",t),e instanceof Bl){const s=Bn.fromString(t,...n);return Ml(s),new ql(e,null,new qn(s))}{if(!(e instanceof ql||e instanceof zl))throw new Tn(Nn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Bn.fromString(t,...n));return Ml(s),new ql(e.firestore,e instanceof zl?e.converter:null,new qn(s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ja(this,"async_queue_retry"),this.Vu=()=>{const e=Ya();e&&fn("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Ya();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ya();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new En;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yn(e))throw e;fn("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;throw gn("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=Ro.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(s),s}fu(){this.Eu&&xn()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Wl extends Bl{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new Hl,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hl(e),this._firestoreClient=void 0,await e}}}function Ql(e){if(e._terminated)throw new Tn(Nn.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,s;const i=e._freezeSettings(),r=(a=e._databaseId,o=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,c=i,new vs(a,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Dl(c.experimentalLongPollingOptions),c.useFetchStreams));var a,o,l,c;e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(s=i.localCache)||void 0===s?void 0:s._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Cl(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class Yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yl(hs.fromBase64String(e))}catch(t){throw new Tn(Nn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yl(hs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Tn(Nn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Tn(Nn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Tn(Nn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mn(this._lat,e._lat)||Mn(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=/^__.*__$/;class nc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ar(e,this.data,this.fieldMask,t,this.fieldTransforms):new rr(e,this.data,t,this.fieldTransforms)}}function sc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xn()}}class ic{constructor(e,t,n,s,i,r){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ic(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(sc(this.Cu)&&tc.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class rc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xa(e)}Qu(e,t,n,s=!1){return new ic({Cu:e,methodName:t,qu:n,path:$n.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ac(e){const t=e._freezeSettings(),n=Xa(e._databaseId);return new rc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function oc(e,t,n,s,i,r={}){const a=e.Qu(r.merge||r.mergeFields?2:0,t,n,i);uc("Data must be an object, but it was:",a,s);const o=cc(s,a);let l,c;if(r.merge)l=new ls(a.fieldMask),c=a.fieldTransforms;else if(r.mergeFields){const e=[];for(const s of r.mergeFields){const i=dc(t,s,n);if(!a.contains(i))throw new Tn(Nn.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);gc(e,i)||e.push(i)}l=new ls(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new nc(new Ms(o),l,c)}function lc(e,t){if(hc(e=Te(e)))return uc("Unsupported field value:",t,e),cc(e,t);if(e instanceof Jl)return function(e,t){if(!sc(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let s=0;for(const i of e){let e=lc(i,t.Lu(s));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),s++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Te(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Oi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=On.fromDate(e);return{timestampValue:Vr(t.serializer,n)}}if(e instanceof On){const n=new On(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Vr(t.serializer,n)}}if(e instanceof Zl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Yl)return{bytesValue:Fr(t.serializer,e._byteString)};if(e instanceof ql){const n=t.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw t.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:$r(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ec)return n=t,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw n.Bu("VectorValues must only contain numeric values.");return Mi(n.serializer,e)}))}}}}};var n;throw t.Bu(`Unsupported field value: ${Ol(e)}`)}(e,t)}function cc(e,t){const n={};return ns(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ts(e,((e,s)=>{const i=lc(s,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function hc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof On||e instanceof Zl||e instanceof Yl||e instanceof ql||e instanceof Jl||e instanceof ec)}function uc(e,t,n){if(!hc(n)||("object"!=typeof(s=n)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s))){const s=Ol(n);throw"an object"===s?t.Bu(e+" a custom object"):t.Bu(e+" "+s)}var s}function dc(e,t,n){if((t=Te(t))instanceof Xl)return t._internalPath;if("string"==typeof t)return pc(e,t);throw fc("Field path arguments must be of type string or ",e,!1,void 0,n)}const mc=new RegExp("[~\\*/\\[\\]]");function pc(e,t,n){if(t.search(mc)>=0)throw fc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Xl(...t.split("."))._internalPath}catch(s){throw fc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function fc(e,t,n,s,i){const r=s&&!s.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(r||a)&&(l+=" (found",r&&(l+=` in field ${s}`),a&&(l+=` in document ${i}`),l+=")"),new Tn(Nn.INVALID_ARGUMENT,o+e+l)}function gc(e,t){return e.some((e=>e.isEqual(t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ql(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vc extends yc{data(){return super.data()}}function xc(e,t){return"string"==typeof t?pc(e,t):t instanceof Xl?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{convertValue(e,t="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ms(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return ts(e,((e,s)=>{n[e]=this.convertValue(s,t)})),n}convertVectorValue(e){var t,n,s;const i=null===(s=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===s?void 0:s.map((e=>ms(e.doubleValue)));return new ec(i)}convertGeoPoint(e){return new Zl(ms(e.latitude),ms(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=gs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ys(e));default:return null}}convertTimestamp(e){const t=ds(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Bn.fromString(e);wn(la(n));const s=new xs(n.get(1),n.get(3)),i=new qn(n.popFirst(5));return s.isEqual(t)||gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nc extends yc{constructor(e,t,n,s,i,r){super(e,t,n,s,r),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(xc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Tc extends Nc{data(e={}){return super.data(e)}}class Ec{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new bc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Tc(this._firestore,this._userDataWriter,n.key,n,new bc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Tn(Nn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const s=new Tc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new bc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const s=new Tc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,r=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),r=n.indexOf(t.doc.key)),{type:jc(t.type),doc:s,oldIndex:i,newIndex:r}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xn()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(e){e=Vl(e,ql);const t=Vl(e.firestore,Wl);return function(e,t,n={}){const s=new En;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,s,i){const r=new Sl({next:o=>{r.Za(),t.enqueueAndForget((()=>qo(e,a)));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Tn(Nn.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&s&&"server"===s.source?i.reject(new Tn(Nn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Qo(ui(n.path),r,{includeMetadataChanges:!0,_a:!0});return $o(e,a)}(await kl(e),e.asyncQueue,t,n,s))),s.promise}(Ql(t),e._key).then((n=>function(e,t,n){const s=n.docs.get(t._key),i=new Cc(e);return new Nc(e,i,t._key,s,new bc(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n)))}class Cc extends wc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ql(this.firestore,null,t)}}function Ac(e){e=Vl(e,$l);const t=Vl(e.firestore,Wl),n=Ql(t),s=new Cc(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Tn(Nn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const s=new En;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,s,i){const r=new Sl({next:n=>{r.Za(),t.enqueueAndForget((()=>qo(e,a))),n.fromCache&&"server"===s.source?i.reject(new Tn(Nn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Qo(n,r,{includeMetadataChanges:!0,_a:!0});return $o(e,a)}(await kl(e),e.asyncQueue,t,n,s))),s.promise}(n,e._query).then((n=>new Ec(t,s,e,n)))}function _c(e,t){const n=Vl(e.firestore,Wl),s=Gl(e),i=function(e,t){let n;return n=e?e.toFirestore(t):t,n}(e.converter,t);return function(e,t){return function(e,t){const n=new En;return e.asyncQueue.enqueueAndForget((async()=>ol(await function(e){return Il(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(Ql(e),t)}(n,[oc(ac(e.firestore),"addDoc",s._key,i,null!==e.converter,{}).toMutation(s._key,Xi.exists(!1))]).then((()=>s))}!function(e,t=!0){dn="10.14.1",Rt(new Ee("firestore",((e,{instanceIdentifier:n,options:s})=>{const i=e.getProvider("app").getImmediate(),r=new Wl(new An(e.getProvider("auth-internal")),new Dn(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Tn(Nn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xs(e.options.projectId,t)}(i,n),i);return s=Object.assign({useFetchStreams:t},s),r._setSettings(s),r}),"PUBLIC").setMultipleInstances(!0)),Bt(hn,"4.7.3",e),Bt(hn,"4.7.3","esm2017")}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Bt("firebase","10.14.1","app");const Ic="@firebase/installations",kc="0.6.9",Dc=1e4,Pc=`w:${kc}`,Rc="FIS_v2",Mc=36e5,Lc=new ve("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Oc(e){return e instanceof ye&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Fc(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Bc(e,t){const n=(await t.json()).error;return Lc.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Uc({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function $c(e,{refreshToken:t}){const n=Uc(e);return n.append("Authorization",function(e){return`${Rc} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),n}async function qc(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zc(e){return new Promise((t=>{setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Kc=/^[cdef][\w-]{21}$/;function Gc(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return Kc.test(t)?t:""}catch(e){return""}}function Hc(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new Map;function Qc(e,t){const n=Hc(e);Yc(n,t),function(e,t){const n=function(){!Xc&&"BroadcastChannel"in self&&(Xc=new BroadcastChannel("[Firebase] FID Change"),Xc.onmessage=e=>{Yc(e.data.key,e.data.fid)});return Xc}();n&&n.postMessage({key:e,fid:t});0===Wc.size&&Xc&&(Xc.close(),Xc=null)}(n,t)}function Yc(e,t){const n=Wc.get(e);if(n)for(const s of n)s(t)}let Xc=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Jc="firebase-installations-store";let Zc=null;function eh(){return Zc||(Zc=He("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Jc)}})),Zc}async function th(e,t){const n=Hc(e),s=(await eh()).transaction(Jc,"readwrite"),i=s.objectStore(Jc),r=await i.get(n);return await i.put(t,n),await s.done,r&&r.fid===t.fid||Qc(e,t.fid),t}async function nh(e){const t=Hc(e),n=(await eh()).transaction(Jc,"readwrite");await n.objectStore(Jc).delete(t),await n.done}async function sh(e,t){const n=Hc(e),s=(await eh()).transaction(Jc,"readwrite"),i=s.objectStore(Jc),r=await i.get(n),a=t(r);return void 0===a?await i.delete(n):await i.put(a,n),await s.done,!a||r&&r.fid===a.fid||Qc(e,a.fid),a}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(e){let t;const n=await sh(e.appConfig,(n=>{const s=function(e){const t=e||{fid:Gc(),registrationStatus:0};return oh(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Lc.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=Vc(e),i=Uc(e),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={fid:n,authVersion:Rc,appId:e.appId,sdkVersion:Pc},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await qc((()=>fetch(s,o)));if(l.ok){const e=await l.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Fc(e.authToken)}}throw await Bc("Create Installation",l)}(e,t);return th(e.appConfig,n)}catch(n){throw Oc(n)&&409===n.customData.serverCode?await nh(e.appConfig):await th(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:s}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:rh(e)}:{installationEntry:t}}(e,s);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function rh(e){let t=await ah(e.appConfig);for(;1===t.registrationStatus;)await zc(100),t=await ah(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await ih(e);return n||t}return t}function ah(e){return sh(e,(e=>{if(!e)throw Lc.create("installation-not-found");return oh(e)}))}function oh(e){return 1===(t=e).registrationStatus&&t.registrationTime+Dc<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function lh({appConfig:e,heartbeatServiceProvider:t},n){const s=function(e,{fid:t}){return`${Vc(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,n),i=$c(e,n),r=t.getImmediate({optional:!0});if(r){const e=await r.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={installation:{sdkVersion:Pc,appId:e.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},l=await qc((()=>fetch(s,o)));if(l.ok){return Fc(await l.json())}throw await Bc("Generate Auth Token",l)}async function ch(e,t=!1){let n;const s=await sh(e.appConfig,(s=>{if(!uh(s))throw Lc.create("not-registered");const i=s.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Mc}(e)}(i))return s;if(1===i.requestStatus)return n=async function(e,t){let n=await hh(e.appConfig);for(;1===n.authToken.requestStatus;)await zc(100),n=await hh(e.appConfig);const s=n.authToken;return 0===s.requestStatus?ch(e,t):s}(e,t),s;{if(!navigator.onLine)throw Lc.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(s);return n=async function(e,t){try{const n=await lh(e,t),s=Object.assign(Object.assign({},t),{authToken:n});return await th(e.appConfig,s),n}catch(n){if(!Oc(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await th(e.appConfig,n)}else await nh(e.appConfig);throw n}}(e,t),t}}));return n?await n:s.authToken}function hh(e){return sh(e,(e=>{if(!uh(e))throw Lc.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Dc<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function uh(e){return void 0!==e&&2===e.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function dh(e,t=!1){const n=e;await async function(e){const{registrationPromise:t}=await ih(e);t&&await t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n);return(await ch(n,t)).token}function mh(e){return Lc.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="installations",fh=e=>{const t=Mt(e.getProvider("app").getImmediate(),ph).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:s}=await ih(t);return s?s.catch(console.error):ch(t).catch(console.error),n.fid}(t),getToken:e=>dh(t,e)}};Rt(new Ee(ph,(e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw mh("App Configuration");if(!e.name)throw mh("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw mh(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Mt(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Rt(new Ee("installations-internal",fh,"PRIVATE")),Bt(Ic,kc),Bt(Ic,kc,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gh="analytics",yh="https://www.googletagmanager.com/gtag/js",vh=new Re("@firebase/analytics"),xh=new ve("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wh(e){if(!e.startsWith(yh)){const t=xh.create("invalid-gtag-resource",{gtagURL:e});return vh.warn(t.message),""}return e}function bh(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Nh(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:wh}),s=document.createElement("script"),i=`${yh}?l=${e}&id=${t}`;s.src=n?null==n?void 0:n.createScriptURL(i):i,s.async=!0,document.head.appendChild(s)}function Th(e,t,n,s){return async function(i,...r){try{if("event"===i){const[s,i]=r;await async function(e,t,n,s,i){try{let r=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const s=await bh(n);for(const n of e){const e=s.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){r=[];break}r.push(i)}}0===r.length&&(r=Object.values(t)),await Promise.all(r),e("event",s,i||{})}catch(r){vh.error(r)}}(e,t,n,s,i)}else if("config"===i){const[i,a]=r;await async function(e,t,n,s,i,r){const a=s[i];try{if(a)await t[a];else{const e=(await bh(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(o){vh.error(o)}e("config",i,r)}(e,t,n,s,i,a)}else if("consent"===i){const[t,n]=r;e("consent",t,n)}else if("get"===i){const[t,n,s]=r;e("get",t,n,s)}else if("set"===i){const[t]=r;e("set",t)}else e(i,...r)}catch(a){vh.error(a)}}}const Eh=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function jh(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Sh(e,t=Eh,n){const{appId:s,apiKey:i,measurementId:r}=e.options;if(!s)throw xh.create("no-app-id");if(!i){if(r)return{measurementId:r,appId:s};throw xh.create("no-api-key")}const a=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new Ah;return setTimeout((async()=>{o.abort()}),6e4),Ch({appId:s,apiKey:i,measurementId:r},a,o,t)}async function Ch(e,{throttleEndTimeMillis:t,backoffCount:n},s,i=Eh){var r;const{appId:a,measurementId:o}=e;try{await function(e,t){return new Promise(((n,s)=>{const i=Math.max(t-Date.now(),0),r=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(r),s(xh.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(s,t)}catch(l){if(o)return vh.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:a,measurementId:o};throw l}try{const t=await async function(e){var t;const{appId:n,apiKey:s}=e,i={method:"GET",headers:jh(s)},r="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(r,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw xh.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(a),t}catch(l){const t=l;if(!function(e){if(!(e instanceof ye&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(i.deleteThrottleMetadata(a),o)return vh.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:a,measurementId:o};throw l}const c=503===Number(null===(r=null==t?void 0:t.customData)||void 0===r?void 0:r.httpStatus)?Ne(n,i.intervalMillis,30):Ne(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(a,h),vh.debug(`Calling attemptFetch again in ${c} millis`),Ch(e,h,s,i)}}class Ah{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}async function _h(e,t,n,s,i,r,a){var o;const l=Sh(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&vh.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>vh.error(e))),t.push(l);const c=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(){if(!fe())return vh.warn(xh.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await ge()}catch(e){return vh.warn(xh.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?s.getId():void 0)),[h,u]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(yh)&&n.src.includes(e))return n;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r)||Nh(r,h.measurementId),i("js",new Date);const d=null!==(o=null==a?void 0:a.config)&&void 0!==o?o:{};return d.origin="firebase",d.update=!0,null!=u&&(d.firebase_id=u),i("config",h.measurementId,d),h.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.app=e}_delete(){return delete kh[this.app.options.appId],Promise.resolve()}}let kh={},Dh=[];const Ph={};let Rh,Mh,Lh="dataLayer",Oh=!1;function Vh(){const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=xh.create("invalid-analytics-context",{errorInfo:t});vh.warn(n.message)}}function Fh(e,t,n){Vh();const s=e.options.appId;if(!s)throw xh.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw xh.create("no-api-key");vh.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=kh[s])throw xh.create("already-exists",{id:s});if(!Oh){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Lh);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,s,i){let r=function(...e){window[s].push(arguments)};return window[i]&&"function"==typeof window[i]&&(r=window[i]),window[i]=Th(r,e,t,n),{gtagCore:r,wrappedGtag:window[i]}}(kh,Dh,Ph,Lh,"gtag");Mh=e,Rh=t,Oh=!0}kh[s]=_h(e,Dh,Ph,t,Rh,Lh,n);return new Ih(e)}function Bh(e,t,n,s){e=Te(e),async function(e,t,n,s,i){if(i&&i.global)e("event",n,s);else{const i=await t;e("event",n,Object.assign(Object.assign({},s),{send_to:i}))}}(Mh,kh[e.app.options.appId],t,n,s).catch((e=>vh.error(e)))}const Uh="@firebase/analytics",$h="0.10.8";Rt(new Ee(gh,((e,{options:t})=>Fh(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),Rt(new Ee("analytics-internal",(function(e){try{const t=e.getProvider(gh).getImmediate();return{logEvent:(e,n,s)=>Bh(t,e,n,s)}}catch(t){throw xh.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Bt(Uh,$h),Bt(Uh,$h,"esm2017");const qh={apiKey:"AIzaSyDrGPpIfS4nDy7_-lHL5pkPEXpvt_kuGFk",authDomain:"pragya-singh.firebaseapp.com",projectId:"pragya-singh",storageBucket:"pragya-singh.firebasestorage.app",messagingSenderId:"352686938461",appId:"1:352686938461:web:99c8e5971846efb3a830b4",measurementId:"G-DPED6EXPPX"},zh=Object.entries(qh).filter((([e,t])=>!t)).map((([e])=>e));if(zh.length>0)throw new Error(`Missing required environment variables: ${zh.join(", ")}. Make sure these are set in your Netlify environment variables.`);const Kh=Vt(qh);!function(e=Ft()){const t=Mt(e=Te(e),gh);t.isInitialized()?t.getImmediate():function(e,t={}){const n=Mt(e,gh);if(n.isInitialized()){const e=n.getImmediate();if(we(t,n.getOptions()))return e;throw xh.create("already-initialized")}const s=n.initialize({options:t})}(e)}(Kh);const Gh=function(e){const t="string"==typeof e?e:"(default)",n=Mt("object"==typeof e?e:Ft(),"firestore").getImmediate({identifier:t});if(!n._initialized){const e=ue("firestore");e&&Ul(n,...e)}return n}(Kh),Hh=async()=>{try{const e=(await Ac(Kl(Gh,"hero"))).docs[0];return e?{id:e.id,...e.data()}:null}catch(e){return null}},Wh=async()=>{try{return(await Ac(Kl(Gh,"projects"))).docs.map((e=>({id:e.id,...e.data()})))}catch(e){return[]}},Qh=async()=>{try{const e=(await Ac(Kl(Gh,"skills"))).docs[0];return e?e.data().list:[]}catch(e){return[]}},Yh=async()=>{try{const e=Kl(Gh,"about"),t=await Ac(e);if(!t.empty){const e=t.docs[0];return{id:e.id,...e.data()}}return null}catch(e){return null}},Xh=async()=>{try{const e=Gl(Gh,"stats","stats"),t=await Sc(e);return t.exists()?t.data():null}catch(e){return null}},Jh=async()=>{try{return(await Ac(Kl(Gh,"certificates"))).docs.map((e=>({id:e.id,...e.data()})))}catch(e){return[]}},Zh=async()=>{try{const e=Kl(Gh,"affiliations");return(await Ac(e)).docs.map((e=>e.data()))}catch(e){return[]}},eu=async()=>{try{const e=Kl(Gh,"publications"),t=await Ac(e);return t.docs.map((e=>({id:e.id,...e.data()}))).sort(((e,t)=>(e.order||0)-(t.order||0)))}catch(e){return[]}},tu=async()=>{try{const e=Kl(Gh,"awards"),t=await Ac(e);return t.docs.map((e=>({id:e.id,...e.data()}))).sort(((e,t)=>(e.order||0)-(t.order||0)))}catch(e){return[]}},nu=[{path:"/",label:"Home",ariaLabel:"Go to Home page"},{path:"/projects",label:"Projects",ariaLabel:"View Architecture Projects"},{path:"/about",label:"About",ariaLabel:"Learn more about the Architect"}];function su({isMenuOpen:t,setIsMenuOpen:i}){const r=n(),[a,o]=e.useState(null),[l,c]=e.useState(!1);return e.useEffect((()=>{!async function(){try{const e=await Yh();o(e)}catch(e){}}()}),[]),e.useEffect((()=>{const e=()=>{c(window.scrollY>0)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),te.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 font-mono",children:[te.jsx("nav",{className:"transition-all duration-300 "+(l?"bg-gray-900/95 backdrop-blur-md py-4":"bg-transparent py-6"),children:te.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:te.jsxs("div",{className:"flex items-center justify-between",children:[te.jsx(s,{to:"/",className:"text-white hover:text-green-400 transition-colors",children:te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx("span",{className:"text-green-400",children:"~/"}),te.jsxs("span",{className:"font-bold",children:["{","dev.name","}"]})]})}),te.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[nu.map((e=>te.jsxs(s,{to:e.path,className:"px-4 py-2 rounded-lg text-sm transition-all duration-300 "+(r.pathname===e.path?"bg-green-600/20 text-green-400":"text-gray-400 hover:text-white hover:bg-gray-800/50"),children:[te.jsx("span",{className:"text-green-400",children:"./"}),e.label]},e.path))),te.jsxs("a",{href:"/resume.pdf",target:"_blank",rel:"noopener noreferrer",className:"ml-2 px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 transition-colors",children:[te.jsx("span",{className:"text-white/80",children:"$"})," cat resume.pdf"]})]}),te.jsx("button",{onClick:()=>i(!t),className:"md:hidden text-gray-400 hover:text-white focus:outline-none",children:te.jsxs("div",{className:"space-y-1",children:[te.jsx("div",{className:"w-6 h-0.5 bg-current transition-all "+(t?"rotate-45 translate-y-1.5":"")}),te.jsx("div",{className:"w-6 h-0.5 bg-current transition-all "+(t?"opacity-0":"")}),te.jsx("div",{className:"w-6 h-0.5 bg-current transition-all "+(t?"-rotate-45 -translate-y-1.5":"")})]})})]})})}),te.jsx("div",{className:"md:hidden fixed inset-0 bg-gray-900/95 backdrop-blur-md transition-all duration-300 "+(t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:te.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-8",children:[nu.map((e=>te.jsxs(s,{to:e.path,onClick:()=>i(!1),className:"px-6 py-3 rounded-lg text-lg transition-all duration-300 "+(r.pathname===e.path?"bg-green-600/20 text-green-400":"text-gray-400 hover:text-white hover:bg-gray-800/50"),children:[te.jsx("span",{className:"text-green-400",children:"./"}),e.label]},e.path))),te.jsxs("a",{href:"/resume.pdf",target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-green-600 text-white rounded-lg text-lg hover:bg-green-700 transition-colors",onClick:()=>i(!1),children:[te.jsx("span",{className:"text-white/80",children:"$"})," cat resume.pdf"]})]})})]})}const iu=[{id:"1",year:2023,event:"Lead Architect, Urban Harmony Center",description:"Leading innovative sustainable architecture projects",icon:"Building2",color:"text-emerald-600",details:"Spearheaded multiple award-winning sustainable design projects"},{id:"2",year:2021,event:"International Architecture Award",description:"Recognized for excellence in sustainable design",icon:"Award",color:"text-blue-600",details:"Received the prestigious International Architecture Award"},{id:"3",year:2019,event:"Founded Studio Arc",description:"Established independent architectural practice",icon:"Briefcase",color:"text-purple-600",details:"Launched an independent practice focusing on sustainable solutions"}],ru={id:"stats",items:[{icon:"Building2",label:"Projects",value:"50+"},{icon:"Award",label:"Awards",value:"12"},{icon:"Users",label:"Clients",value:"100+"}]};let au=!0;(async()=>{try{await Hh(),au=!0}catch(e){au=!1}})();const ou=async()=>{if(au)try{const e=await(async()=>{try{return(await Ac(Kl(Gh,"timeline"))).docs.map((e=>({id:e.id,...e.data()})))}catch(e){return[]}})();if(e.length>0)return e}catch(e){}return iu},lu=async()=>{if(au)try{const e=await Xh();if(e)return e}catch(e){}return ru};function cu(){const[t,n]=e.useState(null),[i,r]=e.useState(null),[a,o]=e.useState(!0),[l,u]=e.useState(null);e.useEffect((()=>{(async()=>{try{const e=await lu();r(e)}catch(e){u("Failed to load stats")}finally{o(!1)}})(),async function(){try{const e=await Hh();n(e)}catch(e){u(e instanceof Error?e.message:"Failed to load hero data")}finally{o(!1)}}()}),[]);return a?te.jsx("section",{className:"relative min-h-screen flex items-center justify-center",children:te.jsx("div",{className:"text-white text-2xl",children:"Loading..."})}):l?te.jsx("section",{className:"relative min-h-screen flex items-center justify-center",children:te.jsxs("div",{className:"text-red-500 text-2xl",children:["Error: ",l]})}):te.jsxs("section",{className:"relative min-h-screen",children:[te.jsx("div",{className:"absolute inset-0",children:te.jsxs("div",{className:"relative w-full h-full bg-gray-900",children:[te.jsx("div",{className:"absolute inset-0 code-rain-effect opacity-20"}),te.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-900/90 via-gray-900/80 to-gray-900/90"})]})}),te.jsx("div",{className:"relative min-h-screen flex items-center",children:te.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full py-20 md:py-0",children:te.jsxs("div",{className:"max-w-3xl space-y-8",children:[te.jsx("div",{className:"space-y-4 font-mono",children:te.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 backdrop-blur-sm",children:[te.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),te.jsxs("div",{className:"text-green-400",children:[te.jsx("span",{className:"text-blue-400",children:"const"})," ",te.jsx("span",{className:"text-yellow-400",children:"developer"})," = ","{"]}),te.jsxs("div",{className:"ml-4",children:[te.jsx("span",{className:"text-purple-400",children:"name:"})," ",te.jsxs("span",{className:"text-green-300",children:['"',(null==t?void 0:t.name)||"Your Name",'"']}),","]}),te.jsxs("div",{className:"ml-4",children:[te.jsx("span",{className:"text-purple-400",children:"role:"})," ",te.jsx("span",{className:"text-green-300",children:'"Software Engineer"'}),","]}),te.jsxs("div",{className:"ml-4",children:[te.jsx("span",{className:"text-purple-400",children:"skills:"})," [",te.jsx("span",{className:"text-green-300",children:'"Frontend", "Backend", "Cloud", "DevOps"'}),"],"]}),te.jsxs("div",{className:"ml-4",children:[te.jsx("span",{className:"text-purple-400",children:"status:"})," ",te.jsx("span",{className:"text-green-300",children:'"Ready to code"'})]}),te.jsx("div",{className:"text-green-400",children:"}"}),te.jsx("div",{className:"text-gray-400 mt-2 terminal-cursor",children:"// Let's build something amazing together"})]})}),te.jsxs("div",{className:"flex flex-wrap gap-4",children:[te.jsxs(s,{to:"/projects",className:"group relative inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-mono text-sm transition-all duration-300",children:["View Projects ",te.jsx(c,{className:"w-4 h-4"})]}),te.jsxs("button",{onClick:()=>{const e=document.getElementById("projects");null==e||e.scrollIntoView({behavior:"smooth"})},className:"group relative inline-flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-mono text-sm transition-all duration-300",children:["See My Work ",te.jsx(h,{className:"w-4 h-4"})]})]}),te.jsx("div",{className:"pt-12 grid grid-cols-4 gap-4 sm:gap-6",children:[{icon:"react",label:"React"},{icon:"node",label:"Node.js"},{icon:"typescript",label:"TypeScript"},{icon:"cloud",label:"Cloud"}].map(((e,t)=>te.jsx("div",{className:"text-center group bg-gray-800/30 backdrop-blur-sm p-4 rounded-lg hover:bg-gray-800/50 transition-all duration-300",children:te.jsx("div",{className:"font-mono text-sm text-gray-400",children:e.label})},t)))})]})})}),te.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-8 hidden md:flex flex-col items-center animate",children:[te.jsx("div",{className:"w-1 h-10 rounded-full bg-white/20 relative overflow-hidden",children:te.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-white/60 transform -translate-y-1/2 animate-scroll"})}),te.jsx("span",{className:"text-white/60 text-sm mt-4 tracking-wider uppercase",children:"Scroll Down"})]})]})}function hu(){const[t,n]=e.useState(null),[s,i]=e.useState(null),[r,a]=e.useState(!0),[o,l]=e.useState(null);return e.useEffect((()=>{(async()=>{try{const e=await Yh();n(e)}catch(e){}})(),(async()=>{try{const e=await lu();i(e)}catch(e){l("Failed to load stats")}finally{a(!1)}})()}),[]),r?te.jsx("section",{className:"py-20 bg-gray-50",children:te.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:te.jsx("div",{className:"animate-pulse",children:"Loading..."})})}):te.jsx("section",{className:"py-16 sm:py-20 lg:py-24 bg-gray-900",children:te.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:te.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[te.jsxs("div",{className:"glass-card rounded-xl overflow-hidden",children:[te.jsxs("div",{className:"bg-gray-800 px-4 py-2 flex items-center space-x-2",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),te.jsx("div",{className:"ml-2 text-gray-400 text-sm font-mono",children:"about.ts"})]}),te.jsxs("div",{className:"p-6 font-mono",children:[te.jsx("div",{className:"text-green-400 mb-4",children:"// About Me"}),te.jsxs("div",{className:"space-y-4 text-gray-300",children:[te.jsxs("div",{children:[te.jsx("span",{className:"text-purple-400",children:"const"})," ",te.jsx("span",{className:"text-yellow-400",children:"developer"})," ",te.jsx("span",{className:"text-blue-400",children:"="})," ","{"]}),te.jsxs("div",{className:"pl-4",children:[te.jsx("span",{className:"text-purple-400",children:"background:"})," ",te.jsx("span",{className:"text-green-300",children:'"Full-stack developer with a passion for creating elegant solutions"'}),","]}),te.jsxs("div",{className:"pl-4",children:[te.jsx("span",{className:"text-purple-400",children:"experience:"})," [",te.jsxs("div",{className:"pl-4 text-green-300",children:['"5+ years of software development",',te.jsx("br",{}),'"Cloud architecture and DevOps",',te.jsx("br",{}),'"UI/UX design and implementation"']}),"],"]}),te.jsxs("div",{className:"pl-4",children:[te.jsx("span",{className:"text-purple-400",children:"skills:"})," ","{",te.jsxs("div",{className:"pl-4",children:[te.jsx("span",{className:"text-blue-400",children:"frontend:"})," [",te.jsx("span",{className:"text-green-300",children:'"React", "TypeScript", "Next.js"'}),"],",te.jsx("br",{}),te.jsx("span",{className:"text-blue-400",children:"backend:"})," [",te.jsx("span",{className:"text-green-300",children:'"Node.js", "Python", "Go"'}),"],",te.jsx("br",{}),te.jsx("span",{className:"text-blue-400",children:"cloud:"})," [",te.jsx("span",{className:"text-green-300",children:'"AWS", "Docker", "Kubernetes"'}),"]"]}),"}"]}),te.jsx("div",{children:"}"})]})]})]}),te.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[{name:"Frontend",icon:"Code",items:["React","TypeScript","Next.js"]},{name:"Backend",icon:"Terminal",items:["Node.js","Python","Go"]},{name:"Cloud",icon:"Database",items:["AWS","Docker","K8s"]},{name:"Tools",icon:"Github",items:["Git","VS Code","Figma"]},{name:"Testing",icon:"Code",items:["Jest","Cypress","RTL"]},{name:"Other",icon:"Terminal",items:["Agile","CI/CD","TDD"]}].map(((e,t)=>te.jsxs("div",{className:"glass-card p-4 rounded-lg",children:[te.jsx("h3",{className:"text-green-400 font-mono text-sm mb-2",children:e.name}),te.jsx("ul",{className:"space-y-1",children:e.items.map(((e,t)=>te.jsxs("li",{className:"text-gray-300 text-sm font-mono",children:[te.jsx("span",{className:"text-green-400",children:"$"})," ",e]},t)))})]},t)))})]})})})}function uu(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy(((...t)=>e(...t)),{get:(n,s)=>"create"===s?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}function du(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}const mu=e=>Array.isArray(e);function pu(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function fu(e){return"string"==typeof e||Array.isArray(e)}function gu(e){const t=[{},{}];return null==e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function yu(e,t,n,s){if("function"==typeof t){const[i,r]=gu(s);t=t(void 0!==n?n:e.custom,i,r)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[i,r]=gu(s);t=t(void 0!==n?n:e.custom,i,r)}return t}function vu(e,t,n){const s=e.getProps();return yu(s,t,void 0!==n?n:s.custom,e)}const xu=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wu=["initial",...xu],bu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nu=new Set(bu),Tu=e=>1e3*e,Eu=e=>e/1e3,ju={type:"spring",stiffness:500,damping:25,restSpeed:10},Su={type:"keyframes",duration:.8},Cu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Au=(e,{keyframes:t})=>t.length>2?Su:Nu.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:ju:Cu;function _u(e,t){return e?e[t]||e.default||e:void 0}const Iu=!1,ku=e=>null!==e;function Du(e,{repeat:t,repeatType:n="loop"},s){const i=e.filter(ku),r=t&&"loop"!==n&&t%2==1?0:i.length-1;return r&&void 0!==s?s:i[r]}const Pu=e=>e;const Ru=["read","resolveKeyframes","update","preRender","render","postRender"];function Mu(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=Ru.reduce(((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,s=!1,i=!1;const r=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(t){r.has(t)&&(l.schedule(t),e()),t(a)}const l={schedule:(e,i=!1,a=!1)=>{const o=a&&s?t:n;return i&&r.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),r.delete(e)},process:e=>{a=e,s?i=!0:(s=!0,[t,n]=[n,t],n.clear(),t.forEach(o),s=!1,i&&(i=!1,l.process(e)))}};return l}(r),e)),{}),{read:o,resolveKeyframes:l,update:c,preRender:h,render:u,postRender:d}=a,m=()=>{const r=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(r-i.timestamp,40),1),i.timestamp=r,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),h.process(i),u.process(i),d.process(i),i.isProcessing=!1,n&&t&&(s=!1,e(m))};return{schedule:Ru.reduce(((t,r)=>{const o=a[r];return t[r]=(t,r=!1,a=!1)=>(n||(n=!0,s=!0,i.isProcessing||e(m)),o.schedule(t,r,a)),t}),{}),cancel:e=>{for(let t=0;t<Ru.length;t++)a[Ru[t]].cancel(e)},state:i,steps:a}}const{schedule:Lu,cancel:Ou,state:Vu,steps:Fu}=Mu("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Pu,!0),Bu=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Uu(e,t,n,s){if(e===t&&n===s)return Pu;const i=t=>function(e,t,n,s,i){let r,a,o=0;do{a=t+(n-t)/2,r=Bu(a,s,i)-e,r>0?n=a:t=a}while(Math.abs(r)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:Bu(i(e),t,s)}const $u=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,qu=e=>t=>1-e(1-t),zu=Uu(.33,1.53,.69,.99),Ku=qu(zu),Gu=$u(Ku),Hu=e=>(e*=2)<1?.5*Ku(e):.5*(2-Math.pow(2,-10*(e-1))),Wu=e=>1-Math.sin(Math.acos(e)),Qu=qu(Wu),Yu=$u(Wu),Xu=e=>/^0[^.\s]+$/u.test(e);let Ju=Pu;const Zu=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),ed=e=>t=>"string"==typeof t&&t.startsWith(e),td=ed("--"),nd=ed("var(--"),sd=e=>!!nd(e)&&id.test(e.split("/*")[0].trim()),id=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rd=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ad(e,t,n=1){const[s,i]=function(e){const t=rd.exec(e);if(!t)return[,];const[,n,s,i]=t;return[`--${null!=n?n:s}`,i]}(e);if(!s)return;const r=window.getComputedStyle(t).getPropertyValue(s);if(r){const e=r.trim();return Zu(e)?parseFloat(e):e}return sd(i)?ad(i,t,n+1):i}const od=(e,t,n)=>n>t?t:n<e?e:n,ld={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},cd={...ld,transform:e=>od(0,1,e)},hd={...ld,default:1},ud=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),dd=ud("deg"),md=ud("%"),pd=ud("px"),fd=ud("vh"),gd=ud("vw"),yd={...md,parse:e=>md.parse(e)/100,transform:e=>md.transform(100*e)},vd=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xd=e=>e===ld||e===pd,wd=(e,t)=>parseFloat(e.split(", ")[t]),bd=(e,t)=>(n,{transform:s})=>{if("none"===s||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return wd(i[1],t);{const t=s.match(/^matrix\((.+)\)$/u);return t?wd(t[1],e):0}},Nd=new Set(["x","y","z"]),Td=bu.filter((e=>!Nd.has(e)));const Ed={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:bd(4,13),y:bd(5,14)};Ed.translateX=Ed.x,Ed.translateY=Ed.y;const jd=e=>t=>t.test(e),Sd=[ld,pd,md,dd,gd,fd,{test:e=>"auto"===e,parse:e=>e}],Cd=e=>Sd.find(jd(e)),Ad=new Set;let _d=!1,Id=!1;function kd(){if(Id){const e=Array.from(Ad).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return Td.forEach((n=>{const s=e.getValue(n);void 0!==s&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((([t,n])=>{var s;null===(s=e.getValue(t))||void 0===s||s.set(n)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}Id=!1,_d=!1,Ad.forEach((e=>e.complete())),Ad.clear()}function Dd(){Ad.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(Id=!0)}))}class Pd{constructor(e,t,n,s,i,r=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=i,this.isAsync=r}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ad.add(this),_d||(_d=!0,Lu.read(Dd),Lu.resolveKeyframes(kd))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;for(let i=0;i<e.length;i++)if(null===e[i])if(0===i){const i=null==s?void 0:s.get(),r=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const s=n.readValue(t,r);null!=s&&(e[0]=s)}void 0===e[0]&&(e[0]=r),s&&void 0===i&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ad.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ad.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Rd=e=>Math.round(1e5*e)/1e5,Md=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Ld=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Od=(e,t)=>n=>Boolean("string"==typeof n&&Ld.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Vd=(e,t,n)=>s=>{if("string"!=typeof s)return s;const[i,r,a,o]=s.match(Md);return{[e]:parseFloat(i),[t]:parseFloat(r),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},Fd={...ld,transform:e=>Math.round((e=>od(0,255,e))(e))},Bd={test:Od("rgb","red"),parse:Vd("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Fd.transform(e)+", "+Fd.transform(t)+", "+Fd.transform(n)+", "+Rd(cd.transform(s))+")"};const Ud={test:Od("#"),parse:function(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}},transform:Bd.transform},$d={test:Od("hsl","hue"),parse:Vd("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+md.transform(Rd(t))+", "+md.transform(Rd(n))+", "+Rd(cd.transform(s))+")"},qd={test:e=>Bd.test(e)||Ud.test(e)||$d.test(e),parse:e=>Bd.test(e)?Bd.parse(e):$d.test(e)?$d.parse(e):Ud.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Bd.transform(e):$d.transform(e)},zd=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Kd="number",Gd="color",Hd=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wd(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const a=t.replace(Hd,(e=>(qd.test(e)?(s.color.push(r),i.push(Gd),n.push(qd.parse(e))):e.startsWith("var(")?(s.var.push(r),i.push("var"),n.push(e)):(s.number.push(r),i.push(Kd),n.push(parseFloat(e))),++r,"${}"))).split("${}");return{values:n,split:a,indexes:s,types:i}}function Qd(e){return Wd(e).values}function Yd(e){const{split:t,types:n}=Wd(e),s=t.length;return e=>{let i="";for(let r=0;r<s;r++)if(i+=t[r],void 0!==e[r]){const t=n[r];i+=t===Kd?Rd(e[r]):t===Gd?qd.transform(e[r]):e[r]}return i}}const Xd=e=>"number"==typeof e?0:e;const Jd={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null===(t=e.match(Md))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(zd))||void 0===n?void 0:n.length)||0)>0},parse:Qd,createTransformer:Yd,getAnimatableNone:function(e){const t=Qd(e);return Yd(e)(t.map(Xd))}},Zd=new Set(["brightness","contrast","saturate","opacity"]);function em(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[s]=n.match(Md)||[];if(!s)return e;const i=n.replace(s,"");let r=Zd.has(t)?1:0;return s!==n&&(r*=100),t+"("+r+i+")"}const tm=/\b([a-z-]*)\(.*?\)/gu,nm={...Jd,getAnimatableNone:e=>{const t=e.match(tm);return t?t.map(em).join(" "):e}},sm={borderWidth:pd,borderTopWidth:pd,borderRightWidth:pd,borderBottomWidth:pd,borderLeftWidth:pd,borderRadius:pd,radius:pd,borderTopLeftRadius:pd,borderTopRightRadius:pd,borderBottomRightRadius:pd,borderBottomLeftRadius:pd,width:pd,maxWidth:pd,height:pd,maxHeight:pd,top:pd,right:pd,bottom:pd,left:pd,padding:pd,paddingTop:pd,paddingRight:pd,paddingBottom:pd,paddingLeft:pd,margin:pd,marginTop:pd,marginRight:pd,marginBottom:pd,marginLeft:pd,backgroundPositionX:pd,backgroundPositionY:pd},im={rotate:dd,rotateX:dd,rotateY:dd,rotateZ:dd,scale:hd,scaleX:hd,scaleY:hd,scaleZ:hd,skew:dd,skewX:dd,skewY:dd,distance:pd,translateX:pd,translateY:pd,translateZ:pd,x:pd,y:pd,z:pd,perspective:pd,transformPerspective:pd,opacity:cd,originX:yd,originY:yd,originZ:pd},rm={...ld,transform:Math.round},am={...sm,...im,zIndex:rm,size:pd,fillOpacity:cd,strokeOpacity:cd,numOctaves:rm},om={...am,color:qd,backgroundColor:qd,outlineColor:qd,fill:qd,stroke:qd,borderColor:qd,borderTopColor:qd,borderRightColor:qd,borderBottomColor:qd,borderLeftColor:qd,filter:nm,WebkitFilter:nm},lm=e=>om[e];function cm(e,t){let n=lm(e);return n!==nm&&(n=Jd),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const hm=new Set(["auto","none","0"]);class um extends Pd{constructor(e,t,n,s,i){super(e,t,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),sd(n))){const s=ad(n,t.current);void 0!==s&&(e[o]=s),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!vd.has(n)||2!==e.length)return;const[s,i]=e,r=Cd(s),a=Cd(i);if(r!==a)if(xd(r)&&xd(a))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)("number"==typeof(s=e[i])?0===s:null===s||"none"===s||"0"===s||Xu(s))&&n.push(i);var s;n.length&&function(e,t,n){let s,i=0;for(;i<e.length&&!s;){const t=e[i];"string"==typeof t&&!hm.has(t)&&Wd(t).values.length&&(s=e[i]),i++}if(s&&n)for(const r of t)e[r]=cm(n,s)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ed[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];void 0!==s&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,a=s[r];s[r]=Ed[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((([e,n])=>{t.getValue(e).set(n)})),this.resolveNoneKeyframes()}}function dm(e){return"function"==typeof e}let mm;function pm(){mm=void 0}const fm={now:()=>(void 0===mm&&fm.set(Vu.isProcessing||Iu?Vu.timestamp:performance.now()),mm),set:e=>{mm=e,queueMicrotask(pm)}},gm=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!Jd.test(e)&&"0"!==e||e.startsWith("url(")));class ym{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:r="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=fm.now(),this.options={autoplay:e,delay:t,type:n,repeat:s,repeatDelay:i,repeatType:r,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(Dd(),kd()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=fm.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:i,delay:r,onComplete:a,onUpdate:o,isGenerator:l}=this.options;if(!l&&!function(e,t,n,s){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const r=e[e.length-1],a=gm(i,t),o=gm(r,t);return!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||dm(n))&&s)}(e,n,s,i)){if(!r)return null==o||o(Du(e,this.options,t)),null==a||a(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}const vm=(e,t,n)=>{const s=t-e;return 0===s?1:(n-e)/s},xm=(e,t,n=10)=>{let s="";const i=Math.max(Math.round(t/n),2);for(let r=0;r<i;r++)s+=e(vm(0,i-1,r))+", ";return`linear(${s.substring(0,s.length-2)})`};function wm(e,t){return t?e*(1e3/t):0}function bm(e,t,n){const s=Math.max(t-5,0);return wm(n-e(s),t-s)}const Nm=100,Tm=10,Em=1,jm=0,Sm=800,Cm=.3,Am=.3,_m={granular:.01,default:2},Im={granular:.005,default:.5},km=.01,Dm=10,Pm=.05,Rm=1,Mm=.001;function Lm({duration:e=Sm,bounce:t=Cm,velocity:n=jm,mass:s=Em}){let i,r,a=1-t;a=od(Pm,Rm,a),e=od(km,Dm,Eu(e)),a<1?(i=t=>{const s=t*a,i=s*e,r=s-n,o=Vm(t,a),l=Math.exp(-i);return Mm-r/o*l},r=t=>{const s=t*a*e,r=s*n+n,o=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-s),c=Vm(Math.pow(t,2),a);return(-i(t)+Mm>0?-1:1)*((r-o)*l)/c}):(i=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,r=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let s=n;for(let i=1;i<Om;i++)s-=e(s)/t(s);return s}(i,r,5/e);if(e=Tu(e),isNaN(o))return{stiffness:Nm,damping:Tm,duration:e};{const t=Math.pow(o,2)*s;return{stiffness:t,damping:2*a*Math.sqrt(s*t),duration:e}}}const Om=12;function Vm(e,t){return e*Math.sqrt(1-t*t)}const Fm=2e4;function Bm(e){let t=0;let n=e.next(t);for(;!n.done&&t<Fm;)t+=50,n=e.next(t);return t>=Fm?1/0:t}const Um=["duration","bounce"],$m=["stiffness","damping","mass"];function qm(e,t){return t.some((t=>void 0!==e[t]))}function zm(e=Am,t=Cm){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:h,duration:u,velocity:d,isResolvedFromDuration:m}=function(e){let t={velocity:jm,stiffness:Nm,damping:Tm,mass:Em,isResolvedFromDuration:!1,...e};if(!qm(e,$m)&&qm(e,Um))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(1.2*n),i=s*s,r=2*od(.05,1,1-e.bounce)*Math.sqrt(i);t={...t,mass:Em,stiffness:i,damping:r}}else{const n=Lm(e);t={...t,...n,mass:Em},t.isResolvedFromDuration=!0}return t}({...n,velocity:-Eu(n.velocity||0)}),p=d||0,f=c/(2*Math.sqrt(l*h)),g=a-r,y=Eu(Math.sqrt(l/h)),v=Math.abs(g)<5;let x;if(s||(s=v?_m.granular:_m.default),i||(i=v?Im.granular:Im.default),f<1){const e=Vm(y,f);x=t=>{const n=Math.exp(-f*y*t);return a-n*((p+f*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)x=e=>a-Math.exp(-y*e)*(g+(p+y*g)*e);else{const e=y*Math.sqrt(f*f-1);x=t=>{const n=Math.exp(-f*y*t),s=Math.min(e*t,300);return a-n*((p+f*y*g)*Math.sinh(s)+e*g*Math.cosh(s))/e}}const w={calculatedDuration:m&&u||null,next:e=>{const t=x(e);if(m)o.done=e>=u;else{let n=0;f<1&&(n=0===e?Tu(p):bm(x,e,t));const r=Math.abs(n)<=s,l=Math.abs(a-t)<=i;o.done=r&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(Bm(w),Fm),t=xm((t=>w.next(e*t).value),e,30);return e+"ms "+t}};return w}function Km({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:h}){const u=e[0],d={done:!1,value:u},m=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let p=n*t;const f=u+p,g=void 0===a?f:a(f);g!==f&&(p=g-u);const y=e=>-p*Math.exp(-e/s),v=e=>g+y(e),x=e=>{const t=y(e),n=v(e);d.done=Math.abs(t)<=c,d.value=d.done?g:n};let w,b;const N=e=>{var t;(t=d.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(w=e,b=zm({keyframes:[d.value,m(d.value)],velocity:bm(v,e,d.value),damping:i,stiffness:r,restDelta:c,restSpeed:h}))};return N(0),{calculatedDuration:null,next:e=>{let t=!1;return b||void 0!==w||(t=!0,x(e),N(e)),void 0!==w&&e>=w?b.next(e-w):(!t&&x(e),d)}}}const Gm=Uu(.42,0,1,1),Hm=Uu(0,0,.58,1),Wm=Uu(.42,0,.58,1),Qm=e=>Array.isArray(e)&&"number"==typeof e[0],Ym={linear:Pu,easeIn:Gm,easeInOut:Wm,easeOut:Hm,circIn:Wu,circInOut:Yu,circOut:Qu,backIn:Ku,backInOut:Gu,backOut:zu,anticipate:Hu},Xm=e=>{if(Qm(e)){Ju(4===e.length);const[t,n,s,i]=e;return Uu(t,n,s,i)}return"string"==typeof e?(Ju(void 0!==Ym[e]),Ym[e]):e},Jm=(e,t)=>n=>t(e(n)),Zm=(...e)=>e.reduce(Jm),ep=(e,t,n)=>e+(t-e)*n;function tp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function np(e,t){return n=>n>0?t:e}const sp=(e,t,n)=>{const s=e*e,i=n*(t*t-s)+s;return i<0?0:Math.sqrt(i)},ip=[Ud,Bd,$d];function rp(e){const t=(n=e,ip.find((e=>e.test(n))));var n;if(!Boolean(t))return!1;let s=t.parse(e);return t===$d&&(s=function({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,n/=100;let i=0,r=0,a=0;if(t/=100){const s=n<.5?n*(1+t):n+t-n*t,o=2*n-s;i=tp(o,s,e+1/3),r=tp(o,s,e),a=tp(o,s,e-1/3)}else i=r=a=n;return{red:Math.round(255*i),green:Math.round(255*r),blue:Math.round(255*a),alpha:s}}(s)),s}const ap=(e,t)=>{const n=rp(e),s=rp(t);if(!n||!s)return np(e,t);const i={...n};return e=>(i.red=sp(n.red,s.red,e),i.green=sp(n.green,s.green,e),i.blue=sp(n.blue,s.blue,e),i.alpha=ep(n.alpha,s.alpha,e),Bd.transform(i))},op=new Set(["none","hidden"]);function lp(e,t){return n=>ep(e,t,n)}function cp(e){return"number"==typeof e?lp:"string"==typeof e?sd(e)?np:qd.test(e)?ap:dp:Array.isArray(e)?hp:"object"==typeof e?qd.test(e)?ap:up:np}function hp(e,t){const n=[...e],s=n.length,i=e.map(((e,n)=>cp(e)(e,t[n])));return e=>{for(let t=0;t<s;t++)n[t]=i[t](e);return n}}function up(e,t){const n={...e,...t},s={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(s[i]=cp(e[i])(e[i],t[i]));return e=>{for(const t in s)n[t]=s[t](e);return n}}const dp=(e,t)=>{const n=Jd.createTransformer(t),s=Wd(e),i=Wd(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?op.has(e)&&!i.values.length||op.has(t)&&!s.values.length?function(e,t){return op.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Zm(hp(function(e,t){var n;const s=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],o=e.indexes[a][i[a]],l=null!==(n=e.values[o])&&void 0!==n?n:0;s[r]=l,i[a]++}return s}(s,i),i.values),n):np(e,t)};function mp(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return ep(e,t,n);return cp(e)(e,t)}function pp(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const r=e.length;if(Ju(r===t.length),1===r)return()=>t[0];if(2===r&&e[0]===e[1])return()=>t[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const s=[],i=n||mp,r=e.length-1;for(let a=0;a<r;a++){let n=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Pu:t;n=Zm(e,n)}s.push(n)}return s}(t,s,i),o=a.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const s=vm(e[n],e[n+1],t);return a[n](s)};return n?t=>l(od(e[0],e[r-1],t)):l}function fp(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=vm(0,t,s);e.push(ep(n,1,i))}}(t,e.length-1),t}function gp({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=(e=>Array.isArray(e)&&"number"!=typeof e[0])(s)?s.map(Xm):Xm(s),r={done:!1,value:t[0]},a=function(e,t){return e.map((e=>e*t))}(n&&n.length===t.length?n:fp(t),e),o=pp(a,t,{ease:Array.isArray(i)?i:(l=t,c=i,l.map((()=>c||Wm)).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(r.value=o(t),r.done=t>=e,r)}}const yp=e=>{const t=({timestamp:t})=>e(t);return{start:()=>Lu.update(t,!0),stop:()=>Ou(t),now:()=>Vu.isProcessing?Vu.timestamp:fm.now()}},vp={decay:Km,inertia:Km,tween:gp,keyframes:gp,spring:zm},xp=e=>e/100;class wp extends ym{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:s,keyframes:i}=this.options,r=(null==s?void 0:s.KeyframeResolver)||Pd;this.resolver=new r(i,((e,t)=>this.onKeyframesResolved(e,t)),t,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:r=0}=this.options,a=dm(t)?t:vp[t]||gp;let o,l;a!==gp&&"number"!=typeof e[0]&&(o=Zm(xp,mp(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});"mirror"===i&&(l=a({...this.options,keyframes:[...e].reverse(),velocity:-r})),null===c.calculatedDuration&&(c.calculatedDuration=Bm(c));const{calculatedDuration:h}=c,u=h+s;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:o,calculatedDuration:h,resolvedDuration:u,totalDuration:u*(n+1)-s}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:r,mapPercentToKeyframes:a,keyframes:o,calculatedDuration:l,totalDuration:c,resolvedDuration:h}=n;if(null===this.startTime)return i.next(0);const{delay:u,repeat:d,repeatType:m,repeatDelay:p,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-u*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let v=this.currentTime,x=i;if(d){const e=Math.min(this.currentTime,c)/h;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===m?(n=1-n,p&&(n-=p/h)):"mirror"===m&&(x=r)),v=od(0,1,n)*h}const w=y?{done:!1,value:o[0]}:x.next(v);a&&(w.value=a(w.value));let{done:b}=w;y||null===l||(b=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const N=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return N&&void 0!==s&&(w.value=Du(o,this.options,s)),f&&f(w.value),N&&this.finish(),w}get duration(){const{resolved:e}=this;return e?Eu(e.calculatedDuration):0}get time(){return Eu(this.currentTime)}set time(e){e=Tu(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Eu(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=yp,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const s=this.driver.now();null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=s):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const bp=new Set(["opacity","clipPath","filter","transform"]);function Np(e){let t;return()=>(void 0===t&&(t=e()),t)}const Tp={linearEasing:void 0};function Ep(e,t){const n=Np(e);return()=>{var e;return null!==(e=Tp[t])&&void 0!==e?e:n()}}const jp=Ep((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),"linearEasing");function Sp(e){return Boolean("function"==typeof e&&jp()||!e||"string"==typeof e&&(e in Ap||jp())||Qm(e)||Array.isArray(e)&&e.every(Sp))}const Cp=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,Ap={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cp([0,.65,.55,1]),circOut:Cp([.55,0,1,.45]),backIn:Cp([.31,.01,.66,-.59]),backOut:Cp([.33,1.53,.69,.99])};function _p(e,t){return e?"function"==typeof e&&jp()?xm(e,t):Qm(e)?Cp(e):Array.isArray(e)?e.map((e=>_p(e,t)||Ap.easeOut)):Ap[e]:void 0}function Ip(e,t,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[t]:n};l&&(c.offset=l);const h=_p(o,i);return Array.isArray(h)&&(c.easing=h),e.animate(c,{delay:s,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:"reverse"===a?"alternate":"normal"})}function kp(e,t){e.timeline=t,e.onfinish=null}const Dp=Np((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const Pp={anticipate:Hu,backInOut:Gu,circInOut:Yu};class Rp extends ym{constructor(e){super(e);const{name:t,motionValue:n,element:s,keyframes:i}=this.options;this.resolver=new um(i,((e,t)=>this.onKeyframesResolved(e,t)),t,n,s),this.resolver.scheduleResolve()}initPlayback(e,t){var n;let{duration:s=300,times:i,ease:r,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!(null===(n=o.owner)||void 0===n?void 0:n.current))return!1;var h;if("string"==typeof r&&jp()&&r in Pp&&(r=Pp[r]),dm((h=this.options).type)||"spring"===h.type||!Sp(h.ease)){const{onComplete:t,onUpdate:n,motionValue:o,element:l,...c}=this.options,h=function(e,t){const n=new wp({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const i=[];let r=0;for(;!s.done&&r<2e4;)s=n.sample(r),i.push(s.value),r+=10;return{times:void 0,keyframes:i,duration:r-10,ease:"linear"}}(e,c);1===(e=h.keyframes).length&&(e[1]=e[0]),s=h.duration,i=h.times,r=h.ease,a="keyframes"}const u=Ip(o.owner.current,l,e,{...this.options,duration:s,times:i,ease:r});return u.startTime=null!=c?c:this.calcStartTime(),this.pendingTimeline?(kp(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:n}=this.options;o.set(Du(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:s,times:i,type:a,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Eu(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Eu(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=Tu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return Pu;const{animation:n}=t;kp(n,e)}else this.pendingTimeline=e;return Pu}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:s,type:i,ease:r,times:a}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:o,element:l,...c}=this.options,h=new wp({...c,keyframes:n,duration:s,type:i,ease:r,times:a,isGenerator:!0}),u=Tu(this.time);e.setWithVelocity(h.sample(u-10).value,h.sample(u).value,10)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:s,repeatType:i,damping:r,type:a}=e;return Dp()&&n&&bp.has(n)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!s&&"mirror"!==i&&0!==r&&"inertia"!==a}}const Mp=Np((()=>void 0!==window.ScrollTimeline));class Lp{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map((n=>Mp()&&n.attachTimeline?n.attachTimeline(e):t(n)));return()=>{n.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const Op=(e,t,n,s={},i,r)=>a=>{const o=_u(s,e)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c-=Tu(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:r?void 0:i};(function({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:c,...h}){return!!Object.keys(h).length})(o)||(h={...h,...Au(e,h)}),h.duration&&(h.duration=Tu(h.duration)),h.repeatDelay&&(h.repeatDelay=Tu(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let u=!1;if((!1===h.type||0===h.duration&&!h.repeatDelay)&&(h.duration=0,0===h.delay&&(u=!0)),u&&!r&&void 0!==t.get()){const e=Du(h.keyframes,o);if(void 0!==e)return Lu.update((()=>{h.onUpdate(e),h.onComplete()})),new Lp([])}return!r&&Rp.supports(h)?new Rp(h):new wp(h)};function Vp(e,t){-1===e.indexOf(t)&&e.push(t)}function Fp(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Bp{constructor(){this.subscriptions=[]}add(e){return Vp(this.subscriptions,e),()=>Fp(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,n);else for(let i=0;i<s;i++){const s=this.subscriptions[i];s&&s(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class Up{constructor(e,t={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{const n=fm.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=fm.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Bp);const n=this.events[e].add(t);return"change"===e?()=>{n(),Lu.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=fm.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return wm(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $p(e,t){return new Up(e,t)}function qp(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,$p(n))}const zp=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kp="data-"+zp("framerAppearId");function Gp(e){return e.props[Kp]}const Hp=e=>Boolean(e&&e.getVelocity);function Wp(e,t){const n=e.getValue("willChange");if(s=n,Boolean(Hp(s)&&s.add))return n.add(t);var s}function Qp({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,s}function Yp(e,t,{delay:n=0,transitionOverride:s,type:i}={}){var r;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;s&&(a=s);const c=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const u in l){const t=e.getValue(u,null!==(r=e.latestValues[u])&&void 0!==r?r:null),s=l[u];if(void 0===s||h&&Qp(h,u))continue;const i={delay:n,..._u(a||{},u)};let o=!1;if(window.MotionHandoffAnimation){const t=Gp(e);if(t){const e=window.MotionHandoffAnimation(t,u,Lu);null!==e&&(i.startTime=e,o=!0)}}Wp(e,u),t.start(Op(u,t,s,e.shouldReduceMotion&&Nu.has(u)?{type:!1}:i,e,o));const d=t.animation;d&&c.push(d)}return o&&Promise.all(c).then((()=>{Lu.update((()=>{o&&function(e,t){const n=vu(e,t);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const o in r)qp(e,o,(a=r[o],mu(a)?a[a.length-1]||0:a));var a}(e,o)}))})),c}function Xp(e,t,n={}){var s;const i=vu(e,t,"exit"===n.type?null===(s=e.presenceContext)||void 0===s?void 0:s.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const a=i?()=>Promise.all(Yp(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(s=0)=>{const{delayChildren:i=0,staggerChildren:a,staggerDirection:o}=r;return function(e,t,n=0,s=0,i=1,r){const a=[],o=(e.variantChildren.size-1)*s,l=1===i?(e=0)=>e*s:(e=0)=>o-e*s;return Array.from(e.variantChildren).sort(Jp).forEach(((e,s)=>{e.notify("AnimationStart",t),a.push(Xp(e,t,{...r,delay:n+l(s)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(a)}(e,t,i+s,a,o,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[e,t]="beforeChildren"===l?[a,o]:[o,a];return e().then((()=>t()))}return Promise.all([a(),o(n.delay)])}function Jp(e,t){return e.sortNodePosition(t)}const Zp=wu.length;function ef(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&ef(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Zp;n++){const s=wu[n],i=e.props[s];(fu(i)||!1===i)&&(t[s]=i)}return t}const tf=[...xu].reverse(),nf=xu.length;function sf(e){return t=>Promise.all(t.map((({animation:t,options:n})=>function(e,t,n={}){let s;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map((t=>Xp(e,t,n)));s=Promise.all(i)}else if("string"==typeof t)s=Xp(e,t,n);else{const i="function"==typeof t?vu(e,t,n.custom):t;s=Promise.all(Yp(e,i,n))}return s.then((()=>{e.notify("AnimationComplete",t)}))}(e,t,n))))}function rf(e){let t=sf(e),n=lf(),s=!0;const i=t=>(n,s)=>{var i;const r=vu(e,s,"exit"===t?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);if(r){const{transition:e,transitionEnd:t,...s}=r;n={...n,...s,...t}}return n};function r(r){const{props:a}=e,o=ef(e.parent)||{},l=[],c=new Set;let h={},u=1/0;for(let t=0;t<nf;t++){const d=tf[t],m=n[d],p=void 0!==a[d]?a[d]:o[d],f=fu(p),g=d===r?m.isActive:null;!1===g&&(u=t);let y=p===o[d]&&p!==a[d]&&f;if(y&&s&&e.manuallyAnimateOnMount&&(y=!1),m.protectedKeys={...h},!m.isActive&&null===g||!p&&!m.prevProp||du(p)||"boolean"==typeof p)continue;const v=af(m.prevProp,p);let x=v||d===r&&m.isActive&&!y&&f||t>u&&f,w=!1;const b=Array.isArray(p)?p:[p];let N=b.reduce(i(d),{});!1===g&&(N={});const{prevResolvedValues:T={}}=m,E={...T,...N},j=t=>{x=!0,c.has(t)&&(w=!0,c.delete(t)),m.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in E){const t=N[e],n=T[e];if(h.hasOwnProperty(e))continue;let s=!1;s=mu(t)&&mu(n)?!pu(t,n):t!==n,s?null!=t?j(e):c.add(e):void 0!==t&&c.has(e)?j(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=N,m.isActive&&(h={...h,...N}),s&&e.blockInitialAnimation&&(x=!1);x&&(!(y&&v)||w)&&l.push(...b.map((e=>({animation:e,options:{type:d}}))))}if(c.size){const t={};c.forEach((n=>{const s=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=null!=s?s:null})),l.push({animation:t})}let d=Boolean(l.length);return!s||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(d=!1),s=!1,d?t(l):Promise.resolve()}return{animateChanges:r,setActive:function(t,s){var i;if(n[t].isActive===s)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,s)})),n[t].isActive=s;const a=r(t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=lf(),s=!0}}}function af(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!pu(t,e)}function of(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lf(){return{animate:of(!0),whileInView:of(),whileHover:of(),whileTap:of(),whileDrag:of(),whileFocus:of(),exit:of()}}class cf{constructor(e){this.isMounted=!1,this.node=e}update(){}}let hf=0;const uf={animation:{Feature:class extends cf{constructor(e){super(e),e.animationState||(e.animationState=rf(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();du(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends cf{constructor(){super(...arguments),this.id=hf++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},df=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function mf(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}function pf(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function ff(e,t,n,s){return pf(e,t,(e=>t=>df(t)&&e(t,mf(t)))(n),s)}const gf=(e,t)=>Math.abs(e-t);class yf{constructor(e,t,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=wf(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=gf(e.x,t.x),s=gf(e.y,t.y);return Math.sqrt(n**2+s**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:s}=e,{timestamp:i}=Vu;this.history.push({...s,timestamp:i});const{onStart:r,onMove:a}=this.handlers;t||(r&&r(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=vf(t,this.transformPagePoint),Lu.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:s,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const r=wf("pointercancel"===e.type?this.lastMoveEventInfo:vf(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,r),s&&s(e,r)},!df(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=s||window;const r=vf(mf(e),this.transformPagePoint),{point:a}=r,{timestamp:o}=Vu;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,wf(r,this.history)),this.removeListeners=Zm(ff(this.contextWindow,"pointermove",this.handlePointerMove),ff(this.contextWindow,"pointerup",this.handlePointerUp),ff(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ou(this.updatePoint)}}function vf(e,t){return t?{point:t(e.point)}:e}function xf(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wf({point:e},t){return{point:e,delta:xf(e,Nf(t)),offset:xf(e,bf(t)),velocity:Tf(t,.1)}}function bf(e){return e[0]}function Nf(e){return e[e.length-1]}function Tf(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=Nf(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>Tu(t)));)n--;if(!s)return{x:0,y:0};const r=Eu(i.timestamp-s.timestamp);if(0===r)return{x:0,y:0};const a={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Ef(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const jf=Ef("dragHorizontal"),Sf=Ef("dragVertical");function Cf(e){let t=!1;if("y"===e)t=Sf();else if("x"===e)t=jf();else{const e=jf(),n=Sf();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function Af(){const e=Cf(!0);return!e||(e(),!1)}function _f(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function If(e){return e.max-e.min}function kf(e,t,n,s=.5){e.origin=s,e.originPoint=ep(t.min,t.max,e.origin),e.scale=If(n)/If(t),e.translate=ep(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Df(e,t,n,s){kf(e.x,t.x,n.x,s?s.originX:void 0),kf(e.y,t.y,n.y,s?s.originY:void 0)}function Pf(e,t,n){e.min=n.min+t.min,e.max=e.min+If(t)}function Rf(e,t,n){e.min=t.min-n.min,e.max=e.min+If(t)}function Mf(e,t,n){Rf(e.x,t.x,n.x),Rf(e.y,t.y,n.y)}function Lf(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Of(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}const Vf=.35;function Ff(e,t,n){return{min:Bf(e,t),max:Bf(e,n)}}function Bf(e,t){return"number"==typeof e?e:e[t]||0}const Uf=()=>({x:{min:0,max:0},y:{min:0,max:0}});function $f(e){return[e("x"),e("y")]}function qf({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function zf(e){return void 0===e||1===e}function Kf({scale:e,scaleX:t,scaleY:n}){return!zf(e)||!zf(t)||!zf(n)}function Gf(e){return Kf(e)||Hf(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Hf(e){return Wf(e.x)||Wf(e.y)}function Wf(e){return e&&"0%"!==e}function Qf(e,t,n){return n+t*(e-n)}function Yf(e,t,n,s,i){return void 0!==i&&(e=Qf(e,i,s)),Qf(e,n,s)+t}function Xf(e,t=0,n=1,s,i){e.min=Yf(e.min,t,n,s,i),e.max=Yf(e.max,t,n,s,i)}function Jf(e,{x:t,y:n}){Xf(e.x,t.translate,t.scale,t.originPoint),Xf(e.y,n.translate,n.scale,n.originPoint)}const Zf=.999999999999,eg=1.0000000000001;function tg(e,t){e.min=e.min+t,e.max=e.max+t}function ng(e,t,n,s,i=.5){Xf(e,t,n,ep(e.min,e.max,i),s)}function sg(e,t){ng(e.x,t.x,t.scaleX,t.scale,t.originX),ng(e.y,t.y,t.scaleY,t.scale,t.originY)}function ig(e,t){return qf(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}const rg=({current:e})=>e?e.ownerDocument.defaultView:null,ag=new WeakMap;class og{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new yf(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(mf(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:s,onDragStart:i}=this.getProps();if(n&&!s&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Cf(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$f((e=>{let t=this.getAxisMotionValue(e).get()||0;if(md.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const s=n.layout.layoutBox[e];if(s){t=If(s)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),i&&Lu.postRender((()=>i(e,t))),Wp(this.visualElement,"transform");const{animationState:r}=this.visualElement;r&&r.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:s,onDirectionLock:i,onDrag:r}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=t;if(s&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),r&&r(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>$f((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,contextWindow:rg(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Lu.postRender((()=>i(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!lg(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let r=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(r=function(e,{min:t,max:n},s){return void 0!==t&&e<t?e=s?ep(t,e,s.min):Math.max(e,t):void 0!==n&&e>n&&(e=s?ep(n,e,s.max):Math.min(e,n)),e}(r,this.constraints[e],this.elastic[e])),i.set(r)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&_f(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!s)&&function(e,{top:t,left:n,bottom:s,right:i}){return{x:Lf(e.x,n,i),y:Lf(e.y,t,s)}}(s.layoutBox,t),this.elastic=function(e=Vf){return!1===e?e=0:!0===e&&(e=Vf),{x:Ff(e,"left","right"),y:Ff(e,"top","bottom")}}(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&$f((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(s.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!_f(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=function(e,t,n){const s=ig(e,n),{scroll:i}=t;return i&&(tg(s.x,i.offset.x),tg(s.y,i.offset.y)),s}(n,s.root,this.visualElement.getTransformPagePoint());let r=function(e,t){return{x:Of(e.x,t.x),y:Of(e.y,t.y)}}(s.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(r));this.hasMutatedConstraints=!!e,e&&(r=qf(e))}return r}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:r,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=$f((a=>{if(!lg(a,t,this.currentDirection))return;let l=o&&o[a]||{};r&&(l={min:0,max:0});const c=s?200:1e6,h=s?40:1e7,u={type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,u)}));return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Wp(this.visualElement,e),n.start(Op(e,n,0,t,this.visualElement,!1))}stopAnimation(){$f((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){$f((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){$f((t=>{const{drag:n}=this.getProps();if(!lg(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:n,max:r}=s.layout.layoutBox[t];i.set(e[t]-ep(n,r,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!_f(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};$f((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();s[e]=function(e,t){let n=.5;const s=If(e),i=If(t);return i>s?n=vm(t.min,t.max-s,e.min):s>i&&(n=vm(e.min,e.max-i,t.min)),od(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),$f((t=>{if(!lg(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:r}=this.constraints[t];n.set(ep(i,r,s[t]))}))}addListeners(){if(!this.visualElement.current)return;ag.set(this.visualElement,this);const e=ff(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();_f(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Lu.read(t);const i=pf(window,"resize",(()=>this.scalePositionWithinConstraints())),r=n.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&($f((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{i(),e(),s(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:r=Vf,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:r,dragMomentum:a}}}function lg(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const cg=e=>(t,n)=>{e&&Lu.postRender((()=>e(t,n)))};const hg=e.createContext(null);const ug=e.createContext({}),dg=e.createContext({}),mg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const fg={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!pd.test(e))return e;e=parseFloat(e)}return`${pg(e,t.target.x)}% ${pg(e,t.target.y)}%`}},gg={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=Jd.parse(e);if(i.length>5)return s;const r=Jd.createTransformer(e),a="number"!=typeof i[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=ep(o,l,.5);return"number"==typeof i[2+a]&&(i[2+a]/=c),"number"==typeof i[3+a]&&(i[3+a]/=c),r(i)}},yg={};const{schedule:vg,cancel:xg}=Mu(queueMicrotask,!1);class wg extends e.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;var r;r=Ng,Object.assign(yg,r),i&&(t.group&&t.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),mg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:i}=this.props,r=n.projection;return r?(r.isPresent=i,s||e.layoutDependency!==t||void 0===t?r.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?r.promote():r.relegate()||Lu.postRender((()=>{const e=r.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),vg.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bg(t){const[n,s]=function(){const t=e.useContext(hg);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=t,r=e.useId();e.useEffect((()=>i(r)),[]);const a=e.useCallback((()=>s&&s(r)),[r,s]);return!n&&s?[!1,a]:[!0]}(),i=e.useContext(ug);return te.jsx(wg,{...t,layoutGroup:i,switchLayoutGroup:e.useContext(dg),isPresent:n,safeToRemove:s})}const Ng={borderRadius:{...fg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fg,borderTopRightRadius:fg,borderBottomLeftRadius:fg,borderBottomRightRadius:fg,boxShadow:gg},Tg=["TopLeft","TopRight","BottomLeft","BottomRight"],Eg=Tg.length,jg=e=>"string"==typeof e?parseFloat(e):e,Sg=e=>"number"==typeof e||pd.test(e);function Cg(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Ag=Ig(0,.5,Qu),_g=Ig(.5,.95,Pu);function Ig(e,t,n){return s=>s<e?0:s>t?1:n(vm(e,t,s))}function kg(e,t){e.min=t.min,e.max=t.max}function Dg(e,t){kg(e.x,t.x),kg(e.y,t.y)}function Pg(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Rg(e,t,n,s,i){return e=Qf(e-=t,1/n,s),void 0!==i&&(e=Qf(e,1/i,s)),e}function Mg(e,t,[n,s,i],r,a){!function(e,t=0,n=1,s=.5,i,r=e,a=e){md.test(t)&&(t=parseFloat(t),t=ep(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let o=ep(r.min,r.max,s);e===r&&(o-=t),e.min=Rg(e.min,t,n,o,i),e.max=Rg(e.max,t,n,o,i)}(e,t[n],t[s],t[i],t.scale,r,a)}const Lg=["x","scaleX","originX"],Og=["y","scaleY","originY"];function Vg(e,t,n,s){Mg(e.x,t,Lg,n?n.x:void 0,s?s.x:void 0),Mg(e.y,t,Og,n?n.y:void 0,s?s.y:void 0)}function Fg(e){return 0===e.translate&&1===e.scale}function Bg(e){return Fg(e.x)&&Fg(e.y)}function Ug(e,t){return e.min===t.min&&e.max===t.max}function $g(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function qg(e,t){return $g(e.x,t.x)&&$g(e.y,t.y)}function zg(e){return If(e.x)/If(e.y)}function Kg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Gg{constructor(){this.members=[]}add(e){Vp(this.members,e),e.scheduleRender()}remove(e){if(Fp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let s=t;s>=0;s--){const e=this.members[s];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;!1===s&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Hg=(e,t)=>e.depth-t.depth;class Wg{constructor(){this.children=[],this.isDirty=!1}add(e){Vp(this.children,e),this.isDirty=!0}remove(e){Fp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Hg),this.isDirty=!1,this.children.forEach(e)}}function Qg(e){const t=Hp(e)?e.get():e;return n=t,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const Yg={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Xg="undefined"!=typeof window&&void 0!==window.MotionDebug,Jg=["","X","Y","Z"],Zg={visibility:"hidden"};let ey=0;function ty(e,t,n,s){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function ny(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Gp(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Lu,!(t||s))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&ny(s)}function sy({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=ey++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Xg&&(Yg.totalNodes=Yg.resolvedTargetDeltas=Yg.recalculatedProjection=0),this.nodes.forEach(ay),this.nodes.forEach(my),this.nodes.forEach(py),this.nodes.forEach(oy),Xg&&window.MotionDebug.record(Yg)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Wg)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Bp),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,n=this.root.hasTreeAnimated){if(this.instance)return;var s;this.isSVG=(s=t)instanceof SVGElement&&"svg"!==s.tagName,this.instance=t;const{layoutId:i,layout:r,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(r||i)&&(this.isLayoutDirty=!0),e){let n;const s=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=fm.now(),s=({timestamp:i})=>{const r=i-n;r>=t&&(Ou(s),e(r-t))};return Lu.read(s,!0),()=>Ou(s)}(s,250),mg.hasAnimatedSinceResize&&(mg.hasAnimatedSinceResize=!1,this.nodes.forEach(dy))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&a&&(i||r)&&this.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:n,layout:s})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||wy,{onLayoutAnimationStart:r,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!qg(this.targetLayout,s)||n,c=!t&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={..._u(i,"layout"),onPlay:r,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||dy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ou(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fy),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ny(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(cy);this.isUpdating||this.nodes.forEach(hy),this.isUpdating=!1,this.nodes.forEach(uy),this.nodes.forEach(iy),this.nodes.forEach(ry),this.clearAllSnapshots();const e=fm.now();Vu.delta=od(0,1e3/60,e-Vu.timestamp),Vu.timestamp=e,Vu.isProcessing=!0,Fu.update.process(Vu),Fu.preRender.process(Vu),Fu.render.process(Vu),Vu.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ly),this.sharedNodes.forEach(gy)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Lu.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Lu.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Bg(this.projectionDelta),n=this.getTransformTemplate(),s=n?n(this.latestValues,""):void 0,r=s!==this.prevTransformTemplateValue;e&&(t||Gf(this.latestValues)||r)&&(i(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var s;return e&&(n=this.removeTransform(n)),Ty((s=n).x),Ty(s.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(jy))){const{scroll:e}=this.root;e&&(tg(n.x,e.offset.x),tg(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Dg(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let s=0;s<this.path.length;s++){const t=this.path[s],{scroll:i,options:r}=t;t!==this.root&&i&&r.layoutScroll&&(i.wasRoot&&Dg(n,e),tg(n.x,i.offset.x),tg(n.y,i.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};Dg(n,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&sg(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Gf(e.latestValues)&&sg(n,e.latestValues)}return Gf(this.latestValues)&&sg(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Dg(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Gf(e.latestValues))continue;Kf(e.latestValues)&&e.updateSnapshot();const s={x:{min:0,max:0},y:{min:0,max:0}};Dg(s,e.measurePageBox()),Vg(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,s)}return Gf(this.latestValues)&&Vg(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vu.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==n;if(!(e||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:r}=this.options;if(this.layout&&(i||r)){if(this.resolvedRelativeTargetAt=Vu.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Mf(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Dg(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,Pf(a.x,o.x,l.x),Pf(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Dg(this.target,this.layout.layoutBox),Jf(this.target,this.targetDelta)):Dg(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Mf(this.relativeTargetOrigin,this.target,e.target),Dg(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Xg&&Yg.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Kf(this.parent.latestValues)&&!Hf(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let s=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(s=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===Vu.timestamp&&(s=!1),s)return;const{layout:i,layoutId:r}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!r)return;Dg(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,n,s=!1){const i=n.length;if(!i)return;let r,a;t.x=t.y=1;for(let o=0;o<i;o++){r=n[o],a=r.projectionDelta;const{visualElement:i}=r.options;i&&i.props.style&&"contents"===i.props.style.display||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&sg(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Jf(e,a)),s&&Gf(r.latestValues)&&sg(e,r.latestValues))}t.x<eg&&t.x>Zf&&(t.x=1),t.y<eg&&t.y>Zf&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Pg(this.prevProjectionDelta.x,this.projectionDelta.x),Pg(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Df(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===o&&Kg(this.projectionDelta.x,this.prevProjectionDelta.x)&&Kg(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Xg&&Yg.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,s=n?n.latestValues:{},i={...this.latestValues},r={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,h=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(xy));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,d,m,p,f,g;yy(r.x,e.x,n),yy(r.y,e.y,n),this.setTargetDelta(r),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mf(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,p=this.relativeTargetOrigin,f=a,g=n,vy(m.x,p.x,f.x,g),vy(m.y,p.y,f.y,g),u&&(l=this.relativeTarget,d=u,Ug(l.x,d.x)&&Ug(l.y,d.y))&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Dg(u,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,n,s,i,r){i?(e.opacity=ep(0,void 0!==n.opacity?n.opacity:1,Ag(s)),e.opacityExit=ep(void 0!==t.opacity?t.opacity:1,0,_g(s))):r&&(e.opacity=ep(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,s));for(let a=0;a<Eg;a++){const i=`border${Tg[a]}Radius`;let r=Cg(t,i),o=Cg(n,i);void 0===r&&void 0===o||(r||(r=0),o||(o=0),0===r||0===o||Sg(r)===Sg(o)?(e[i]=Math.max(ep(jg(r),jg(o),s),0),(md.test(o)||md.test(r))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=ep(t.rotate||0,n.rotate||0,s))}(i,s,this.latestValues,n,h,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ou(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Lu.update((()=>{mg.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const s=Hp(e)?e:$p(e);return s.start(Op("",s,t,n)),s.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:s,latestValues:i}=e;if(t&&n&&s){if(this!==e&&this.layout&&s&&Ey(this.options.animationType,this.layout.layoutBox,s.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=If(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const s=If(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+s}Dg(t,n),sg(t,i),Df(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Gg);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const s=this.getStack();s&&s.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const s={};n.z&&ty("z",e,s,this.animationValues);for(let i=0;i<Jg.length;i++)ty(`rotate${Jg[i]}`,e,s,this.animationValues),ty(`skew${Jg[i]}`,e,s,this.animationValues);e.render();for(const i in s)e.setStaticValue(i,s[i]),this.animationValues&&(this.animationValues[i]=s[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Zg;const s={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=Qg(null==e?void 0:e.pointerEvents)||"",s.transform=i?i(this.latestValues,""):"none",s;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=Qg(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!Gf(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const a=r.animationValues||r.latestValues;this.applyTransformsToTarget(),s.transform=function(e,t,n){let s="";const i=e.x.translate/t.x,r=e.y.translate/t.y,a=(null==n?void 0:n.z)||0;if((i||r||a)&&(s=`translate3d(${i}px, ${r}px, ${a}px) `),1===t.x&&1===t.y||(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:r,skewX:a,skewY:o}=n;e&&(s=`perspective(${e}px) ${s}`),t&&(s+=`rotate(${t}deg) `),i&&(s+=`rotateX(${i}deg) `),r&&(s+=`rotateY(${r}deg) `),a&&(s+=`skewX(${a}deg) `),o&&(s+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(s+=`scale(${o}, ${l})`),s||"none"}(this.projectionDeltaWithTransform,this.treeScale,a),i&&(s.transform=i(a,s.transform));const{x:o,y:l}=this.projectionDelta;s.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,r.animationValues?s.opacity=r===this?null!==(n=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:s.opacity=r===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in yg){if(void 0===a[c])continue;const{correct:e,applyTo:t}=yg[c],n="none"===s.transform?a[c]:e(a[c],r);if(t){const e=t.length;for(let i=0;i<e;i++)s[t[i]]=n}else s[c]=n}return this.options.layoutId&&(s.pointerEvents=r===this?Qg(null==e?void 0:e.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(cy),this.root.sharedNodes.clear()}}}function iy(e){e.updateLayout()}function ry(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=e.layout,{animationType:i}=e.options,r=n.source!==e.layout.source;"size"===i?$f((e=>{const s=r?n.measuredBox[e]:n.layoutBox[e],i=If(s);s.min=t[e].min,s.max=s.min+i})):Ey(i,n.layoutBox,t)&&$f((s=>{const i=r?n.measuredBox[s]:n.layoutBox[s],a=If(t[s]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+a)}));const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Df(a,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};r?Df(o,e.applyTransform(s,!0),n.measuredBox):Df(o,t,n.layoutBox);const l=!Bg(a);let c=!1;if(!e.resumeFrom){const s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:i,layout:r}=s;if(i&&r){const a={x:{min:0,max:0},y:{min:0,max:0}};Mf(a,n.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Mf(o,t,r.layoutBox),qg(a,o)||(c=!0),s.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ay(e){Xg&&Yg.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function oy(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ly(e){e.clearSnapshot()}function cy(e){e.clearMeasurements()}function hy(e){e.isLayoutDirty=!1}function uy(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function dy(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function my(e){e.resolveTargetDelta()}function py(e){e.calcProjection()}function fy(e){e.resetSkewAndRotation()}function gy(e){e.removeLeadSnapshot()}function yy(e,t,n){e.translate=ep(t.translate,0,n),e.scale=ep(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function vy(e,t,n,s){e.min=ep(t.min,n.min,s),e.max=ep(t.max,n.max,s)}function xy(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const wy={duration:.45,ease:[.4,0,.1,1]},by=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ny=by("applewebkit/")&&!by("chrome/")?Math.round:Pu;function Ty(e){e.min=Ny(e.min),e.max=Ny(e.max)}function Ey(e,t,n){return"position"===e||"preserve-aspect"===e&&(s=zg(t),i=zg(n),r=.2,!(Math.abs(s-i)<=r));var s,i,r}function jy(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const Sy=sy({attachResizeListener:(e,t)=>pf(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cy={current:void 0},Ay=sy({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Cy.current){const e=new Sy({});e.mount(window),e.setOptions({layoutScroll:!0}),Cy.current=e}return Cy.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),_y={pan:{Feature:class extends cf{constructor(){super(...arguments),this.removePointerDownListener=Pu}onPointerDown(e){this.session=new yf(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:rg(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:cg(e),onStart:cg(t),onMove:n,onEnd:(e,t)=>{delete this.session,s&&Lu.postRender((()=>s(e,t)))}}}mount(){this.removePointerDownListener=ff(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends cf{constructor(e){super(e),this.removeGroupControls=Pu,this.removeListeners=Pu,this.controls=new og(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pu}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Ay,MeasureLayout:bg}};function Iy(e,t){const n=t?"pointerenter":"pointerleave",s=t?"onHoverStart":"onHoverEnd";return ff(e.current,n,((n,i)=>{if("touch"===n.pointerType||Af())return;const r=e.getProps();e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",t);const a=r[s];a&&Lu.postRender((()=>a(n,i)))}),{passive:!e.getProps()[s]})}const ky=(e,t)=>!!t&&(e===t||ky(e,t.parentElement));function Dy(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,mf(n))}const Py=new WeakMap,Ry=new WeakMap,My=e=>{const t=Py.get(e.target);t&&t(e)},Ly=e=>{e.forEach(My)};function Oy(e,t,n){const s=function({root:e,...t}){const n=e||document;Ry.has(n)||Ry.set(n,{});const s=Ry.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(Ly,{root:e,...t})),s[i]}(t);return Py.set(e,n),s.observe(e),()=>{Py.delete(e),s.unobserve(e)}}const Vy={some:0,all:1};const Fy={inView:{Feature:class extends cf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:i}=e,r={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof s?s:Vy[s]};return Oy(this.node.current,r,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:s}=this.node.getProps(),r=t?n:s;r&&r(e)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends cf{constructor(){super(...arguments),this.removeStartListeners=Pu,this.removeEndListeners=Pu,this.removeAccessibleListeners=Pu,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=ff(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:s,globalTapTarget:i}=this.node.getProps(),r=i||ky(this.node.current,e.target)?n:s;r&&Lu.update((()=>r(e,t)))}),{passive:!(n.onTap||n.onPointerUp)}),i=ff(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Zm(s,i),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=pf(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=pf(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&Dy("up",((e,t)=>{const{onTap:n}=this.node.getProps();n&&Lu.postRender((()=>n(e,t)))}))})),Dy("down",((e,t)=>{this.startPress(e,t)}))})),t=pf(this.node.current,"blur",(()=>{this.isPressing&&Dy("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=Zm(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Lu.postRender((()=>n(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Af()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Lu.postRender((()=>n(e,t)))}mount(){const e=this.node.getProps(),t=ff(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=pf(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Zm(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends cf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zm(pf(this.node.current,"focus",(()=>this.onFocus())),pf(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends cf{mount(){this.unmount=Zm(Iy(this.node,!0),Iy(this.node,!1))}unmount(){}}}},By={layout:{ProjectionNode:Ay,MeasureLayout:bg}},Uy=e.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),$y=e.createContext({}),qy="undefined"!=typeof window,zy=qy?e.useLayoutEffect:e.useEffect,Ky=e.createContext({strict:!1});function Gy(t,n,s,i,r){var a,o;const{visualElement:l}=e.useContext($y),c=e.useContext(Ky),h=e.useContext(hg),u=e.useContext(Uy).reducedMotion,d=e.useRef();i=i||c.renderer,!d.current&&i&&(d.current=i(t,{visualState:n,parent:l,props:s,presenceContext:h,blockInitialAnimation:!!h&&!1===h.initial,reducedMotionConfig:u}));const m=d.current,p=e.useContext(dg);!m||m.projection||!r||"html"!==m.type&&"svg"!==m.type||function(e,t,n,s){const{layoutId:i,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Hy(e.parent)),e.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:Boolean(a)||o&&_f(o),visualElement:e,animationType:"string"==typeof r?r:"both",initialPromotionConfig:s,layoutScroll:l,layoutRoot:c})}(d.current,s,r,p);const f=e.useRef(!1);e.useInsertionEffect((()=>{m&&f.current&&m.update(s,h)}));const g=s[Kp],y=e.useRef(Boolean(g)&&!(null===(a=window.MotionHandoffIsComplete)||void 0===a?void 0:a.call(window,g))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,g)));return zy((()=>{m&&(f.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),vg.render(m.render),y.current&&m.animationState&&m.animationState.animateChanges())})),e.useEffect((()=>{m&&(!y.current&&m.animationState&&m.animationState.animateChanges(),y.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)})),y.current=!1))})),m}function Hy(e){if(e)return!1!==e.options.allowProjection?e.projection:Hy(e.parent)}function Wy(t,n,s){return e.useCallback((e=>{e&&t.mount&&t.mount(e),n&&(e?n.mount(e):n.unmount()),s&&("function"==typeof s?s(e):_f(s)&&(s.current=e))}),[n])}function Qy(e){return du(e.animate)||wu.some((t=>fu(e[t])))}function Yy(e){return Boolean(Qy(e)||e.variants)}function Xy(t){const{initial:n,animate:s}=function(e,t){if(Qy(e)){const{initial:t,animate:n}=e;return{initial:!1===t||fu(t)?t:void 0,animate:fu(n)?n:void 0}}return!1!==e.inherit?t:{}}(t,e.useContext($y));return e.useMemo((()=>({initial:n,animate:s})),[Jy(n),Jy(s)])}function Jy(e){return Array.isArray(e)?e.join(" "):e}const Zy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ev={};for(const gx in Zy)ev[gx]={isEnabled:e=>Zy[gx].some((t=>!!e[t]))};const tv=Symbol.for("motionComponentSymbol");function nv({preloadedFeatures:t,createVisualElement:n,useRender:s,useVisualState:i,Component:r}){t&&function(e){for(const t in e)ev[t]={...ev[t],...e[t]}}(t);const a=e.forwardRef((function(t,a){let o;const l={...e.useContext(Uy),...t,layoutId:sv(t)},{isStatic:c}=l,h=Xy(t),u=i(t,c);if(!c&&qy){e.useContext(Ky).strict;const t=function(e){const{drag:t,layout:n}=ev;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(l);o=t.MeasureLayout,h.visualElement=Gy(r,u,l,n,t.ProjectionNode)}return te.jsxs($y.Provider,{value:h,children:[o&&h.visualElement?te.jsx(o,{visualElement:h.visualElement,...l}):null,s(r,t,Wy(u,h.visualElement,a),u,c,h.visualElement)]})}));return a[tv]=r,a}function sv({layoutId:t}){const n=e.useContext(ug).id;return n&&void 0!==t?n+"-"+t:t}const iv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rv(e){return"string"==typeof e&&!e.includes("-")&&!!(iv.indexOf(e)>-1||/[A-Z]/u.test(e))}function av(e,{style:t,vars:n},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const r in n)e.style.setProperty(r,n[r])}const ov=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lv(e,t,n,s){av(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(ov.has(i)?i:zp(i),t.attrs[i])}function cv(e,{layout:t,layoutId:n}){return Nu.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!yg[e]||"opacity"===e)}function hv(e,t,n){var s;const{style:i}=e,r={};for(const a in i)(Hp(i[a])||t.style&&Hp(t.style[a])||cv(a,e)||void 0!==(null===(s=null==n?void 0:n.getValue(a))||void 0===s?void 0:s.liveStyle))&&(r[a]=i[a]);return r}function uv(e,t,n){const s=hv(e,t,n);for(const i in e)if(Hp(e[i])||Hp(t[i])){s[-1!==bu.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return s}const dv=t=>(n,s)=>{const i=e.useContext($y),r=e.useContext(hg),a=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,i,r){const a={latestValues:mv(s,i,r,e),renderState:t()};return n&&(a.mount=e=>n(s,e,a)),a}(t,n,i,r);return s?a():function(t){const n=e.useRef(null);return null===n.current&&(n.current=t()),n.current}(a)};function mv(e,t,n,s){const i={},r=s(e,{});for(const d in r)i[d]=Qg(r[d]);let{initial:a,animate:o}=e;const l=Qy(e),c=Yy(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let h=!!n&&!1===n.initial;h=h||!1===a;const u=h?o:a;if(u&&"boolean"!=typeof u&&!du(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const s=yu(e,t[n]);if(s){const{transitionEnd:e,transition:t,...n}=s;for(const s in n){let e=n[s];if(Array.isArray(e)){e=e[h?e.length-1:0]}null!==e&&(i[s]=e)}for(const s in e)i[s]=e[s]}}}return i}const pv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),fv=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),gv=(e,t)=>t&&"number"==typeof e?t.transform(e):e,yv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vv=bu.length;function xv(e,t,n){const{style:s,vars:i,transformOrigin:r}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(Nu.has(l))a=!0;else if(td(l))i[l]=e;else{const t=gv(e,am[l]);l.startsWith("origin")?(o=!0,r[l]=t):s[l]=t}}if(t.transform||(a||n?s.transform=function(e,t,n){let s="",i=!0;for(let r=0;r<vv;r++){const a=bu[r],o=e[a];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=gv(o,am[a]);l||(i=!1,s+=`${yv[a]||a}(${e}) `),n&&(t[a]=e)}}return s=s.trim(),n?s=n(t,i?"":s):i&&(s="none"),s}(t,e.transform,n):s.transform&&(s.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=r;s.transformOrigin=`${e} ${t} ${n}`}}function wv(e,t,n){return"string"==typeof e?e:pd.transform(t+n*e)}const bv={offset:"stroke-dashoffset",array:"stroke-dasharray"},Nv={offset:"strokeDashoffset",array:"strokeDasharray"};function Tv(e,{attrX:t,attrY:n,attrScale:s,originX:i,originY:r,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},h,u){if(xv(e,c,u),h)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:m,dimensions:p}=e;d.transform&&(p&&(m.transform=d.transform),delete d.transform),p&&(void 0!==i||void 0!==r||m.transform)&&(m.transformOrigin=function(e,t,n){return`${wv(t,e.x,e.width)} ${wv(n,e.y,e.height)}`}(p,void 0!==i?i:.5,void 0!==r?r:.5)),void 0!==t&&(d.x=t),void 0!==n&&(d.y=n),void 0!==s&&(d.scale=s),void 0!==a&&function(e,t,n=1,s=0,i=!0){e.pathLength=1;const r=i?bv:Nv;e[r.offset]=pd.transform(-s);const a=pd.transform(t),o=pd.transform(n);e[r.array]=`${a} ${o}`}(d,a,o,l,!1)}const Ev=e=>"string"==typeof e&&"svg"===e.toLowerCase(),jv={useVisualState:dv({scrapeMotionValuesFromProps:uv,createRenderState:fv,onMount:(e,t,{renderState:n,latestValues:s})=>{Lu.read((()=>{try{n.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){n.dimensions={x:0,y:0,width:0,height:0}}})),Lu.render((()=>{Tv(n,s,Ev(t.tagName),e.transformTemplate),lv(t,n)}))}})},Sv={useVisualState:dv({scrapeMotionValuesFromProps:hv,createRenderState:pv})};function Cv(e,t,n){for(const s in t)Hp(t[s])||cv(s,n)||(e[s]=t[s])}function Av(t,n){const s={};return Cv(s,t.style||{},t),Object.assign(s,function({transformTemplate:t},n){return e.useMemo((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return xv(e,n,t),Object.assign({},e.vars,e.style)}),[n])}(t,n)),s}function _v(e,t){const n={},s=Av(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const Iv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kv(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Iv.has(e)}let Dv=e=>!kv(e);try{(Pv=require("@emotion/is-prop-valid").default)&&(Dv=e=>e.startsWith("on")?!kv(e):Pv(e))}catch(fx){}var Pv;function Rv(t,n,s,i){const r=e.useMemo((()=>{const e={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Tv(e,n,Ev(i),t.transformTemplate),{...e.attrs,style:{...e.style}}}),[n]);if(t.style){const e={};Cv(e,t.style,t),r.style={...e,...r.style}}return r}function Mv(t=!1){return(n,s,i,{latestValues:r},a)=>{const o=(rv(n)?Rv:_v)(s,r,a,n),l=function(e,t,n){const s={};for(const i in e)"values"===i&&"object"==typeof e.values||(Dv(i)||!0===n&&kv(i)||!t&&!kv(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}(s,"string"==typeof n,t),c=n!==e.Fragment?{...l,...o,ref:i}:{},{children:h}=s,u=e.useMemo((()=>Hp(h)?h.get():h),[h]);return e.createElement(n,{...c,children:u})}}function Lv(e,t){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){return nv({...rv(n)?jv:Sv,preloadedFeatures:e,useRender:Mv(s),createVisualElement:t,Component:n})}}const Ov={current:null},Vv={current:!1};const Fv=new WeakMap,Bv=[...Sd,qd,Jd],Uv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $v{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:r},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=fm.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Lu.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=r;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=Qy(t),this.isVariantNode=Yy(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in h){const e=h[u];void 0!==o[u]&&Hp(e)&&e.set(o[u],!1)}}mount(e){this.current=e,Fv.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),Vv.current||function(){if(Vv.current=!0,qy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ov.current=e.matches;e.addListener(t),t()}else Ov.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Ov.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Fv.delete(this.current),this.projection&&this.projection.unmount(),Ou(this.notifyUpdate),Ou(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Nu.has(e),s=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&Lu.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=t.on("renderRequest",this.scheduleRender);let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{s(),i(),r&&r(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in ev){const t=ev[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Uv.length;n++){const t=Uv[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const s=e["on"+t];s&&(this.propEventSubscriptions[t]=this.on(t,s))}this.prevMotionValues=function(e,t,n){for(const s in t){const i=t[s],r=n[s];if(Hp(i))e.addValue(s,i);else if(Hp(r))e.addValue(s,$p(i,{owner:e}));else if(r!==i)if(e.hasValue(s)){const t=e.getValue(s);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(s);e.addValue(s,$p(void 0!==t?t:i,{owner:e}))}}for(const s in n)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=$p(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let s=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var i;return null!=s&&("string"==typeof s&&(Zu(s)||Xu(s))?s=parseFloat(s):(i=s,!Bv.find(jd(i))&&Jd.test(t)&&(s=cm(e,t))),this.setBaseTarget(e,Hp(s)?s.get():s)),Hp(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let s;if("string"==typeof n||"object"==typeof n){const i=yu(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);i&&(s=i[e])}if(n&&void 0!==s)return s;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Hp(i)?void 0!==this.initialValues[e]&&void 0===s?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new Bp),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class qv extends $v{constructor(){super(...arguments),this.KeyframeResolver=um}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}}class zv extends qv{constructor(){super(...arguments),this.type="html",this.renderInstance=av}readValueFromInstance(e,t){if(Nu.has(t)){const e=lm(t);return e&&e.default||0}{const s=(n=e,window.getComputedStyle(n)),i=(td(t)?s.getPropertyValue(t):s[t])||0;return"string"==typeof i?i.trim():i}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return ig(e,t)}build(e,t,n){xv(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return hv(e,t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Hp(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class Kv extends qv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Uf}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Nu.has(t)){const e=lm(t);return e&&e.default||0}return t=ov.has(t)?t:zp(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return uv(e,t,n)}build(e,t,n){Tv(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,s){lv(e,t,0,s)}mount(e){this.isSVGTag=Ev(e.tagName),super.mount(e)}}const Gv=uu(Lv({...uf,...Fy,..._y,...By},((t,n)=>rv(t)?new Kv(n):new zv(n,{allowProjection:t!==e.Fragment}))));function Hv(){const[t,n]=e.useState([]),[s,i]=e.useState(!0),[r,a]=e.useState(null);return e.useEffect((()=>{!async function(){try{const e=[...await ou()].sort(((e,t)=>e.year-t.year));n(e)}catch(e){a("Unable to load timeline data. Please try again later.")}finally{i(!1)}}()}),[]),s?te.jsx("div",{className:"py-20",children:te.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:te.jsx("div",{className:"animate-pulse space-y-8",children:[1,2,3].map((e=>te.jsx("div",{className:"bg-gray-100 h-48 rounded-xl"},e)))})})}):r?te.jsx("div",{className:"py-20",children:te.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[te.jsx("p",{className:"text-gray-600",children:r}),te.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Try Again"})]})}):te.jsx("section",{className:"py-16 sm:py-20 lg:py-24 bg-gray-900",children:te.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[te.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12 sm:mb-16",children:[te.jsxs(Gv.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"font-mono text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-100 mb-4",children:[te.jsx("span",{className:"text-green-400",children:"git log"})," ",te.jsx("span",{className:"text-yellow-400",children:"--professional-journey"})]}),te.jsx(Gv.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"text-gray-400 text-lg font-mono",children:"# Career milestones and achievements"})]}),te.jsxs("div",{className:"relative",children:[te.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 h-full w-0.5 bg-gray-700"}),te.jsx("div",{className:"space-y-12",children:t.map(((e,t)=>te.jsxs(Gv.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*t},className:"relative flex items-center justify-between "+(t%2==0?"flex-row":"flex-row-reverse"),children:[te.jsx("div",{className:"w-5/12 "+(t%2==0?"text-right pr-8":"text-left pl-8"),children:te.jsx("div",{className:"glass-card p-6 rounded-lg",children:te.jsxs("div",{className:"font-mono",children:[te.jsxs("div",{className:"text-green-400 text-sm mb-2",children:["commit ",Math.random().toString(16).slice(2,10)]}),te.jsx("h3",{className:"text-xl font-bold text-gray-100 mb-2",children:e.event}),te.jsx("div",{className:"text-yellow-400 text-sm mb-3",children:e.company}),te.jsxs("div",{className:"text-gray-400 text-sm mb-4",children:["Author: ",e.location,te.jsx("br",{}),"Date: ",e.year]}),te.jsx("div",{className:"text-gray-300 text-sm whitespace-pre-line",children:e.description.split("\n").map(((e,t)=>te.jsxs("div",{className:"mb-1",children:[te.jsx("span",{className:"text-green-400",children:"+"})," ",e]},t)))})]})})}),te.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 w-4 h-4 rounded-full bg-green-500 border-4 border-gray-900"}),te.jsx("div",{className:"w-5/12"})]},t)))})]}),te.jsxs("div",{className:"mt-12 text-center font-mono",children:[te.jsx("span",{className:"text-gray-400",children:"git checkout -b"})," ",te.jsx("span",{className:"text-green-400",children:"new-opportunities"})]})]})})}function Wv(){const[t,n]=e.useState([]),[i,r]=e.useState("all"),[a,o]=e.useState(!0),[l,p]=e.useState([]),[f,g]=e.useState(null);e.useEffect((()=>{!async function(){try{const e=await Wh();n(e);const t=["all",...new Set(e.map((e=>e.category)))];p(t)}catch(e){g("Failed to load projects")}finally{o(!1)}}()}),[]);const y=t.filter((e=>"all"===i||e.category===i));return a?te.jsx("div",{className:"py-20 text-center",children:"Loading..."}):f?te.jsx("div",{className:"py-20 text-center",children:f}):te.jsx("section",{className:"bg-gray-900 py-16 font-mono",children:te.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[te.jsxs("div",{className:"mb-8",children:[te.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[te.jsx(h,{className:"w-5 h-5 text-green-400"}),te.jsx("h2",{className:"text-2xl text-white",children:"~/projects"})]}),te.jsxs("div",{className:"flex items-center space-x-2 text-gray-400 text-sm",children:[te.jsx(c,{className:"w-4 h-4"}),te.jsx("span",{children:"git branch --list"})]})]}),te.jsx("div",{className:"mb-8 overflow-x-auto",children:te.jsx("div",{className:"flex space-x-4 pb-2",children:l.map((e=>te.jsxs("button",{onClick:()=>r(e),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm transition-colors "+(i===e?"bg-green-600/20 text-green-400 border border-green-400/30":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[te.jsx(u,{className:"w-4 h-4"}),te.jsx("span",{children:e})]},e)))})}),te.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((e=>{var t;return te.jsx(s,{to:`/project/${e.id}`,className:"group",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700 hover:border-green-400/50 transition-colors",children:[te.jsxs("div",{className:"px-4 py-2 bg-gray-900 border-b border-gray-700 flex items-center justify-between",children:[te.jsxs("div",{className:"flex space-x-2",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),te.jsx("div",{className:"text-xs text-gray-400",children:e.category})]}),te.jsxs("div",{className:"relative aspect-video",children:[te.jsx("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"}),te.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:te.jsxs("div",{className:"text-green-400 flex items-center space-x-2",children:[te.jsx("span",{children:"View Project"}),te.jsx(d,{className:"w-4 h-4"})]})})]}),te.jsxs("div",{className:"p-4 space-y-2",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(m,{className:"w-4 h-4 text-green-400"}),te.jsx("h3",{className:"text-white font-medium",children:e.title})]}),te.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:e.description}),te.jsx("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:null==(t=e.technologies)?void 0:t.map(((e,t)=>te.jsx("span",{children:e},t)))})]})]})},e.id)}))})]})})}function Qv(){const[t,n]=e.useState([]),[s,i]=e.useState(!0),[r,a]=e.useState(null);return e.useEffect((()=>{!async function(){try{const e=await(async()=>{try{return(await Ac(Kl(Gh,"testimonials"))).docs.map((e=>({id:e.id,...e.data()})))}catch(r){return[]}})();n(e)}catch(e){a("Failed to load testimonials")}finally{i(!1)}}()}),[]),s?te.jsx("div",{className:"py-20 text-center",children:te.jsx("div",{className:"animate-pulse",children:"Loading testimonials..."})}):r?te.jsxs("div",{className:"py-20 text-center",children:[te.jsxs("div",{className:"text-red-600",children:["Error: ",r]}),te.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]}):t.length?te.jsx("section",{className:"py-16 sm:py-20 lg:py-24 bg-gray-900",children:te.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[te.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12 sm:mb-16",children:[te.jsxs(Gv.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"font-mono text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-100 mb-4",children:[te.jsx("span",{className:"text-green-400",children:"pull"})," ",te.jsx("span",{className:"text-yellow-400",children:"requests"})]}),te.jsx(Gv.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"text-gray-400 text-lg font-mono",children:"# Merged feedback from collaborators"})]}),te.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:(null==t?void 0:t.items)?t.items.map(((e,t)=>te.jsxs(Gv.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*t},className:"glass-card rounded-lg overflow-hidden",children:[te.jsxs("div",{className:"bg-gray-800 px-4 py-3 flex items-center justify-between",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),te.jsxs("span",{className:"text-gray-400 text-sm font-mono",children:["PR #",t+1," (merged)"]})]}),te.jsx("div",{className:"flex items-center space-x-2",children:te.jsxs("span",{className:"text-gray-400 text-xs font-mono",children:["+",e.rating,"% / -0%"]})})]}),te.jsxs("div",{className:"p-6",children:[te.jsxs("div",{className:"flex items-center mb-4",children:[te.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-gray-300 font-mono text-sm",children:e.author.split(" ").map((e=>e[0])).join("")}),te.jsxs("div",{className:"ml-3",children:[te.jsx("div",{className:"text-gray-100 font-mono font-semibold",children:e.author}),te.jsx("div",{className:"text-gray-400 text-sm font-mono",children:e.position})]})]}),te.jsx("div",{className:"space-y-4",children:te.jsxs("div",{className:"text-gray-300 font-mono text-sm",children:[te.jsx("div",{className:"text-green-400 mb-2",children:"// Code Review Feedback"}),e.content.split("\n").map(((e,t)=>te.jsxs("div",{className:"pl-4 border-l-2 border-green-500/30",children:[te.jsx("span",{className:"text-green-400",children:"+"})," ",e]},t)))]})}),te.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:te.jsxs("div",{className:"flex items-center justify-between text-xs font-mono",children:[te.jsxs("span",{className:"text-gray-400",children:["Merged by ",e.company]}),te.jsx("div",{className:"flex items-center space-x-2",children:te.jsx("span",{className:"text-green-400",children:" Approved"})})]})})]})]},t))):r?te.jsx("div",{className:"text-red-500",children:r}):null}),te.jsxs("div",{className:"mt-12 text-center font-mono",children:[te.jsx("span",{className:"text-gray-400",children:"git merge"})," ",te.jsx("span",{className:"text-green-400",children:"client-testimonials"})]})]})}):te.jsx("div",{className:"py-20 text-center",children:"No testimonials available."})}function Yv(){return te.jsxs(te.Fragment,{children:[te.jsx(cu,{}),te.jsx(hu,{}),te.jsx(Hv,{}),te.jsx(Wv,{}),te.jsx(Qv,{})]})}function Xv(){const[t,n]=e.useState(""),[i,r]=e.useState("all"),[a,o]=e.useState([]),[l,g]=e.useState([]),[y,v]=e.useState([{id:"all",name:"All Projects"}]),[x,w]=e.useState(!0),[b,N]=e.useState(null);return e.useEffect((()=>{!async function(){try{const e=await Wh();o(e);const t=new Set(e.filter((e=>e.category)).map((e=>(e.category||"").toLowerCase().trim()))),n=[{id:"all",name:"All Projects"},...Array.from(t).map((e=>({id:e,name:e.charAt(0).toUpperCase()+e.slice(1)})))];v(n),g(e)}catch(e){N("Failed to load projects")}finally{w(!1)}}()}),[]),e.useEffect((()=>{const e=a.filter((e=>{const n=(e.category||"").toLowerCase().trim(),s=(e.title||"").toLowerCase().trim(),r=(e.location||"").toLowerCase().trim(),a=t.toLowerCase().trim();return(""===t||s.includes(a)||n.includes(a)||r.includes(a))&&("all"===i||n===i)}));g(e)}),[t,i,a]),x?te.jsx("div",{className:"min-h-screen bg-gray-900 font-mono flex items-center justify-center",children:te.jsxs("div",{className:"flex items-center space-x-3 text-green-400",children:[te.jsx(p,{className:"w-5 h-5 animate-spin"}),te.jsx("span",{children:"Loading projects..."})]})}):b?te.jsx("div",{className:"min-h-screen bg-gray-900 font-mono flex items-center justify-center",children:te.jsxs("div",{className:"text-center space-y-4",children:[te.jsx("p",{className:"text-red-400",children:b}),te.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-800 text-green-400 rounded-lg hover:bg-gray-700 transition-colors",children:"Retry"})]})}):te.jsx("div",{className:"min-h-screen bg-gray-900 font-mono py-24",children:te.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[te.jsxs("div",{className:"mb-8",children:[te.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[te.jsx(h,{className:"w-5 h-5 text-green-400"}),te.jsx("h1",{className:"text-2xl text-white",children:"~/projects"})]}),te.jsxs("p",{className:"text-gray-400 flex items-center space-x-2",children:[te.jsx(c,{className:"w-4 h-4"}),te.jsx("span",{children:"Explore my latest projects and experiments"})]})]}),te.jsxs("div",{className:"space-y-6 mb-12",children:[te.jsxs("div",{className:"relative",children:[te.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:te.jsx(f,{className:"h-5 w-5 text-gray-400"})}),te.jsx("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"Search projects...",className:"block w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent"})]}),te.jsx("div",{className:"flex overflow-x-auto pb-2 space-x-4",children:y.map((e=>te.jsxs("button",{onClick:()=>r(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm whitespace-nowrap transition-colors "+(i===e.id?"bg-green-600/20 text-green-400 border border-green-400/30":"text-gray-400 hover:text-white hover:bg-gray-800"),children:[te.jsx(u,{className:"w-4 h-4"}),te.jsx("span",{children:e.name})]},e.id)))})]}),te.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((e=>te.jsx(s,{to:`/project/${e.id}`,className:"group",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700 hover:border-green-400/50 transition-colors",children:[te.jsxs("div",{className:"px-4 py-2 bg-gray-900 border-b border-gray-700 flex items-center justify-between",children:[te.jsxs("div",{className:"flex space-x-2",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),te.jsx("div",{className:"text-xs text-gray-400",children:e.category})]}),te.jsxs("div",{className:"relative aspect-video",children:[te.jsx("img",{src:e.coverImage,alt:e.title,className:"w-full h-full object-cover"}),te.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:te.jsxs("div",{className:"text-green-400 flex items-center space-x-2",children:[te.jsx("span",{children:"View Project"}),te.jsx(d,{className:"w-4 h-4"})]})})]}),te.jsxs("div",{className:"p-4 space-y-2",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(m,{className:"w-4 h-4 text-green-400"}),te.jsx("h3",{className:"text-white font-medium",children:e.title})]}),te.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:e.description}),te.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[te.jsx("span",{children:e.year}),te.jsx("span",{children:e.location}),te.jsx("span",{children:e.status})]})]})]})},e.id)))}),0===l.length&&te.jsx("div",{className:"text-center py-12",children:te.jsx("div",{className:"text-gray-400",children:"No projects found matching your criteria"})})]})})}function Jv({src:t,alt:n,className:s="",fallbackClassName:i="",...r}){const[a,o]=e.useState(!1),[l,c]=e.useState(!0),h=(e=>{if(!e)return e;if(e.includes("drive.google.com")||e.includes("drive.usercontent.google.com")){let t="";const n=[/\/file\/d\/([^/]+)/,/id=([^&]+)/,/\/d\/([^/]+)/];for(const s of n){const n=e.match(s);if(n&&n[1]){t=n[1];break}}if(t)return`https://lh3.googleusercontent.com/d/${t}`}return e})(t);return a||!h?te.jsxs("div",{className:`relative overflow-hidden ${i||s}`,...r,children:[te.jsx("div",{className:"absolute inset-0 opacity-[0.02]",style:{backgroundImage:"linear-gradient(to right, rgb(0, 0, 0) 1px, transparent 1px),\n              linear-gradient(to bottom, rgb(0, 0, 0) 1px, transparent 1px)",backgroundSize:"20px 20px"}}),te.jsxs("div",{className:"absolute inset-0",children:[te.jsx("div",{className:"absolute -right-6 -top-6 w-32 h-32 bg-black/5 rounded-full transform -translate-x-1/2 -translate-y-1/2"}),te.jsx("div",{className:"absolute right-12 bottom-12 w-40 h-40 bg-black/5 rounded-full transform translate-x-1/2 translate-y-1/2"})]}),te.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 bg-gradient-to-t from-black/5 to-transparent",children:te.jsxs("div",{className:"flex flex-col items-center text-center",children:[te.jsx("div",{className:"mb-4 p-3 rounded-full bg-black/5",children:te.jsx(g,{className:"w-6 h-6 text-black/40"})}),te.jsx("div",{className:"max-w-[80%]",children:te.jsx("p",{className:"text-sm font-medium text-black/60 line-clamp-2",children:n})})]})})]}):te.jsxs(te.Fragment,{children:[l&&te.jsxs("div",{className:`relative overflow-hidden ${i||s}`,...r,children:[te.jsx("div",{className:"absolute inset-0 bg-black/5 animate-pulse",children:te.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(to right, rgb(0, 0, 0) 1px, transparent 1px),\n                  linear-gradient(to bottom, rgb(0, 0, 0) 1px, transparent 1px)",backgroundSize:"20px 20px",opacity:.02}})}),te.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:te.jsx("div",{className:"w-8 h-8 border-2 border-black/10 border-t-black/30 rounded-full animate-spin"})})]}),te.jsx("img",{src:h,alt:n,className:`${s} ${l?"hidden":""}`,onError:()=>{o(!0),c(!1)},onLoad:()=>{c(!1)},referrerPolicy:"no-referrer",...r})]})}function Zv(){const{id:t}=i(),[n,r]=e.useState(null),[a,o]=e.useState(!0),[l,d]=e.useState(null),[m,p]=e.useState(0);return e.useEffect((()=>{!async function(){if(t)try{const e=await(async e=>{try{const t=Gl(Gh,"projects",e),n=await Sc(t);return n.exists()?{id:n.id,...n.data()}:null}catch(l){return null}})(t);r(e)}catch(e){d("Failed to load project details")}finally{o(!1)}}()}),[t]),a?te.jsx("div",{className:"min-h-screen bg-gray-900 text-white font-mono flex items-center justify-center",children:te.jsx("div",{className:"animate-pulse text-green-400",children:"Loading project data..."})}):l||!n?te.jsx("div",{className:"min-h-screen bg-gray-900 text-white font-mono flex items-center justify-center",children:te.jsx("div",{className:"text-red-400",children:l||"Project not found"})}):te.jsx("div",{className:"min-h-screen bg-gray-900 text-white font-mono py-16",children:te.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[te.jsxs(s,{to:"/projects",className:"inline-flex items-center space-x-2 text-gray-400 hover:text-green-400 transition-colors mb-8",children:[te.jsx(y,{className:"w-4 h-4"}),te.jsx("span",{children:"cd .."})]}),te.jsxs("div",{className:"border border-gray-800 rounded-lg bg-gray-900 mb-8",children:[te.jsxs("div",{className:"px-6 py-4 border-b border-gray-800 flex items-center justify-between",children:[te.jsxs("div",{className:"flex items-center space-x-4",children:[te.jsx(h,{className:"w-5 h-5 text-green-400"}),te.jsx("h1",{className:"text-xl font-semibold",children:n.title})]}),te.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[te.jsx(u,{className:"w-4 h-4"}),te.jsx("span",{children:n.category})]})]}),te.jsxs("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:[te.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[te.jsx(v,{className:"w-4 h-4"}),te.jsx("span",{children:n.date})]}),te.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[te.jsx(x,{className:"w-4 h-4"}),te.jsx("span",{children:n.location})]}),te.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[te.jsx(w,{className:"w-4 h-4"}),te.jsx("span",{children:n.area})]}),te.jsxs("div",{className:"flex items-center space-x-2 text-gray-400",children:[te.jsx(g,{className:"w-4 h-4"}),te.jsx("span",{children:n.client})]})]})]}),te.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[te.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[te.jsx("div",{className:"border border-gray-800 rounded-lg overflow-hidden",children:te.jsx(Jv,{src:n.coverImage,alt:n.title,className:"w-full h-auto object-cover"})}),te.jsxs("div",{className:"border border-gray-800 rounded-lg bg-gray-900",children:[te.jsx("div",{className:"px-6 py-4 border-b border-gray-800",children:te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(c,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg",children:"README.md"})]})}),te.jsxs("div",{className:"p-6 prose prose-invert max-w-none",children:[te.jsx("p",{className:"text-gray-400",children:n.description}),te.jsx("div",{className:"mt-6 space-y-2",children:n.details.map(((e,t)=>te.jsxs("div",{className:"flex items-start space-x-2",children:[te.jsx(b,{className:"w-4 h-4 text-green-400 mt-1 flex-shrink-0"}),te.jsx("p",{className:"text-gray-400",children:e})]},t)))})]})]}),te.jsxs("div",{className:"border border-gray-800 rounded-lg bg-gray-900",children:[te.jsx("div",{className:"px-6 py-4 border-b border-gray-800",children:te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(N,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg",children:"gallery/"})]})}),te.jsx("div",{className:"p-6",children:te.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.gallery.map(((e,t)=>te.jsxs("div",{className:"group relative border border-gray-800 rounded-lg overflow-hidden cursor-pointer",onClick:()=>p(t),children:[te.jsx(Jv,{src:e.url,alt:e.caption,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"}),te.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:te.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:te.jsx("p",{className:"text-sm text-white",children:e.caption})})})]},t)))})})]})]}),te.jsx("div",{className:"space-y-8",children:te.jsxs("div",{className:"border border-gray-800 rounded-lg bg-gray-900",children:[te.jsx("div",{className:"px-6 py-4 border-b border-gray-800",children:te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(h,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg",children:"project.info"})]})}),te.jsx("div",{className:"p-6",children:te.jsxs("dl",{className:"space-y-4",children:[te.jsxs("div",{children:[te.jsx("dt",{className:"text-sm text-gray-500",children:"Status"}),te.jsx("dd",{className:"mt-1 text-sm text-gray-400",children:n.status})]}),te.jsxs("div",{children:[te.jsx("dt",{className:"text-sm text-gray-500",children:"Year"}),te.jsx("dd",{className:"mt-1 text-sm text-gray-400",children:n.year})]}),te.jsxs("div",{children:[te.jsx("dt",{className:"text-sm text-gray-500",children:"Featured"}),te.jsx("dd",{className:"mt-1 text-sm text-gray-400",children:n.featured?"Yes":"No"})]})]})})]})})]})]})})}function ex({isOpen:t,onClose:n,images:s,image:i,title:r,caption:a,onPrevious:o,onNext:l,showNavigation:c=!1,currentIndex:u=0,totalItems:d=0,renderImage:m}){var p,f,g;const[y,v]=e.useState(1),[x,w]=e.useState(0),[b,N]=e.useState(!1);e.useEffect((()=>{const e=e=>{if(t)switch(e.key){case"ArrowLeft":null==o||o();break;case"ArrowRight":null==l||l();break;case"Escape":n()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[t,o,l,n]);const I=()=>{v(1),w(0)};return t?te.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/95 backdrop-blur-sm",children:te.jsxs("div",{className:`relative ${b?"w-full h-full":"w-full max-w-7xl"} bg-gray-800 rounded-lg overflow-hidden shadow-2xl border border-gray-700`,children:[te.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-900 border-b border-gray-700",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsxs("div",{className:"flex space-x-2",children:[te.jsx("button",{onClick:n,className:"w-3 h-3 rounded-full bg-red-500 hover:bg-red-600 transition-colors"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),te.jsxs("div",{className:"ml-4 flex items-center space-x-2 text-gray-400",children:[te.jsx(h,{className:"w-4 h-4"}),te.jsx("span",{className:"text-sm font-mono",children:r||"image-viewer"})]})]}),te.jsxs("div",{className:"flex items-center space-x-2",children:[c&&te.jsxs("div",{className:"text-gray-400 text-sm font-mono",children:[u+1," / ",d]}),te.jsx("button",{onClick:()=>{N(!b),I()},className:"p-1.5 text-gray-400 hover:text-white bg-gray-800 hover:bg-gray-700 rounded-md transition-colors",children:b?te.jsx(T,{className:"w-4 h-4"}):te.jsx(E,{className:"w-4 h-4"})})]})]}),te.jsxs("div",{className:"relative overflow-hidden bg-gray-900/50",style:{height:b?"calc(100vh - 40px)":"80vh"},children:[te.jsxs("div",{className:"absolute left-4 top-4 z-10 flex items-center space-x-2 bg-gray-900/90 p-1 rounded-lg backdrop-blur-sm border border-gray-700",children:[te.jsx("button",{onClick:()=>{v((e=>Math.min(e+.25,3)))},className:"p-1.5 text-gray-400 hover:text-green-400 transition-colors",title:"Zoom In",children:te.jsx(j,{className:"w-4 h-4"})}),te.jsx("button",{onClick:()=>{v((e=>Math.max(e-.25,.5)))},className:"p-1.5 text-gray-400 hover:text-green-400 transition-colors",title:"Zoom Out",children:te.jsx(S,{className:"w-4 h-4"})}),te.jsx("button",{onClick:()=>{w((e=>(e+90)%360))},className:"p-1.5 text-gray-400 hover:text-green-400 transition-colors",title:"Rotate",children:te.jsx(C,{className:"w-4 h-4"})}),te.jsx("button",{onClick:I,className:"p-1.5 text-xs font-mono text-gray-400 hover:text-green-400 transition-colors",title:"Reset",children:"reset"})]}),c&&te.jsxs(te.Fragment,{children:[te.jsx("button",{onClick:o,className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-white bg-gray-900/90 hover:bg-gray-800 rounded-lg backdrop-blur-sm border border-gray-700 transition-all",children:te.jsx(A,{className:"w-6 h-6"})}),te.jsx("button",{onClick:l,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 text-gray-400 hover:text-white bg-gray-900/90 hover:bg-gray-800 rounded-lg backdrop-blur-sm border border-gray-700 transition-all",children:te.jsx(_,{className:"w-6 h-6"})})]}),te.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",onClick:I,children:te.jsx("div",{style:{transform:`scale(${y}) rotate(${x}deg)`,transition:"transform 0.3s ease-out"},className:"relative",children:m?m((null==s?void 0:s[u])||{url:i||""}):te.jsx(Jv,{src:(null==(p=null==s?void 0:s[u])?void 0:p.url)||i||"",alt:a||r||"Image",className:"max-h-full object-contain rounded-lg"})})})]}),(a||(null==(f=null==s?void 0:s[u])?void 0:f.caption))&&te.jsx("div",{className:"px-4 py-3 bg-gray-900 border-t border-gray-700",children:te.jsx("p",{className:"text-gray-400 text-sm font-mono",children:(null==(g=null==s?void 0:s[u])?void 0:g.caption)||a})})]})}):null}function tx({publications:e}){return te.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((e=>te.jsx("div",{className:"group",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700 hover:border-green-400/50 transition-all duration-300",children:[te.jsxs("div",{className:"px-4 py-2 bg-gray-900 border-b border-gray-700 flex items-center justify-between",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsxs("div",{className:"flex space-x-2",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),te.jsxs("div",{className:"ml-4 flex items-center space-x-2 text-gray-400",children:[te.jsx(h,{className:"w-4 h-4"}),te.jsx("span",{className:"text-sm font-mono",children:"publication.md"})]})]}),te.jsx("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-green-400 transition-colors",children:te.jsx(I,{className:"w-4 h-4"})})]}),te.jsxs("div",{className:"p-6 space-y-6",children:[te.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden border border-gray-700",children:[te.jsx(Jv,{src:e.coverImage,alt:e.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),te.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-60"})]}),te.jsxs("div",{className:"space-y-4",children:[te.jsxs("div",{className:"space-y-2",children:[te.jsx("h3",{className:"text-lg font-medium text-white group-hover:text-green-400 transition-colors duration-300",children:e.title}),te.jsx("p",{className:"text-sm text-gray-400 line-clamp-3",children:e.abstract})]}),te.jsxs("div",{className:"grid grid-cols-1 gap-3 pt-4 border-t border-gray-700",children:[te.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[te.jsx(k,{className:"w-4 h-4 text-gray-500"}),te.jsx("span",{className:"text-gray-400",children:e.authors.join(", ")})]}),te.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[te.jsx(D,{className:"w-4 h-4 text-gray-500"}),te.jsx("span",{className:"text-gray-400",children:e.journal}),te.jsx("span",{className:"text-gray-600",children:""}),te.jsxs("div",{className:"flex items-center space-x-1",children:[te.jsx(v,{className:"w-4 h-4 text-gray-500"}),te.jsx("span",{className:"text-gray-400",children:e.year})]})]}),e.doi&&te.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[te.jsx(P,{className:"w-4 h-4 text-gray-500"}),te.jsxs("span",{className:"text-gray-400",children:["DOI: ",e.doi]})]}),te.jsxs("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-2 text-sm text-gray-400 hover:text-green-400 transition-colors mt-2 group/link",children:[te.jsx(R,{className:"w-4 h-4"}),te.jsx("span",{children:"Read Publication"}),te.jsx(I,{className:"w-3 h-3 opacity-0 -translate-y-1 group-hover/link:opacity-100 group-hover/link:translate-y-0 transition-all"})]})]})]})]})]})},e.id)))})}function nx({awards:e}){return te.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((e=>te.jsx("div",{className:"group",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700 hover:border-green-400/50 transition-all duration-300",children:[te.jsxs("div",{className:"px-4 py-2 bg-gray-900 border-b border-gray-700 flex items-center justify-between",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsxs("div",{className:"flex space-x-2",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),te.jsxs("div",{className:"ml-4 flex items-center space-x-2 text-gray-400",children:[te.jsx(h,{className:"w-4 h-4"}),te.jsx("span",{className:"text-sm font-mono",children:"award.md"})]})]}),te.jsx(M,{className:"w-4 h-4 text-yellow-500"})]}),te.jsxs("div",{className:"p-6 space-y-6",children:[te.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden border border-gray-700",children:[te.jsx(Jv,{src:e.image,alt:e.title,className:"w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500"}),te.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-60"})]}),te.jsxs("div",{className:"space-y-4",children:[te.jsxs("div",{className:"space-y-2",children:[te.jsx("h3",{className:"text-lg font-medium text-white group-hover:text-green-400 transition-colors duration-300",children:e.title}),te.jsx("p",{className:"text-sm text-gray-400 line-clamp-3",children:e.description})]}),te.jsxs("div",{className:"grid grid-cols-1 gap-3 pt-4 border-t border-gray-700",children:[te.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[te.jsx(g,{className:"w-4 h-4 text-gray-500"}),te.jsx("span",{className:"text-gray-400",children:e.organization})]}),te.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[te.jsx(v,{className:"w-4 h-4 text-gray-500"}),te.jsx("span",{className:"text-gray-400",children:e.year})]}),te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(L,{className:"w-4 h-4 text-gray-500"}),te.jsx("span",{className:"px-2 py-1 text-xs font-mono text-green-400 bg-green-400/10 rounded-md border border-green-400/20",children:e.category.charAt(0).toUpperCase()+e.category.slice(1)})]})]})]})]})]})},e.id)))})}function sx(){const[t,n]=e.useState(null),[s,i]=e.useState([]),[r,a]=e.useState([]),[o,l]=e.useState(null),[d,m]=e.useState(!0),[f,g]=e.useState(null),[y,v]=e.useState(null),[x,w]=e.useState(0);e.useRef(null);const[N,T]=e.useState([]),[E,j]=e.useState([]),[S,C]=e.useState([]);return e.useEffect((()=>{(async()=>{try{m(!0);const[e,t,s,r,o,c,h]=await Promise.all([Yh(),Qh(),Jh(),Xh(),Zh(),eu(),tu()]);e&&n(e),i(t),a(s),r&&l(r),T(o.sort(((e,t)=>t.order-e.order))),j(c),C(h),g(null)}catch(e){g("Failed to load data. Please try again later.")}finally{m(!1)}})()}),[]),d?te.jsx("div",{className:"min-h-screen bg-gray-900 font-mono flex items-center justify-center",children:te.jsxs("div",{className:"flex items-center space-x-3 text-green-400",children:[te.jsx(p,{className:"w-5 h-5 animate-spin"}),te.jsx("span",{children:"Loading profile data..."})]})}):f?te.jsx("div",{className:"min-h-screen bg-gray-900 font-mono flex items-center justify-center",children:te.jsxs("div",{className:"text-center space-y-4",children:[te.jsx("p",{className:"text-red-400",children:f}),te.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-800 text-green-400 rounded-lg hover:bg-gray-700 transition-colors",children:"Retry"})]})}):te.jsx("div",{className:"min-h-screen bg-gray-900 font-mono py-24",children:te.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[te.jsxs("div",{className:"mb-12",children:[te.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[te.jsx(h,{className:"w-5 h-5 text-green-400"}),te.jsx("h1",{className:"text-2xl text-white",children:"~/about"})]}),te.jsxs("p",{className:"text-gray-400 flex items-center space-x-2",children:[te.jsx(c,{className:"w-4 h-4"}),te.jsx("span",{children:"Software Engineer & Former Architect"})]})]}),te.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12",children:[te.jsx("div",{className:"lg:col-span-1",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:[te.jsxs("div",{className:"px-4 py-2 bg-gray-900 border-b border-gray-700 flex items-center justify-between",children:[te.jsxs("div",{className:"flex space-x-2",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),te.jsx("span",{className:"text-xs text-gray-400",children:"profile.jpg"})]}),te.jsx("div",{className:"p-4",children:te.jsx("img",{src:null==t?void 0:t.image,alt:"Profile",className:"w-full h-auto rounded-lg"})})]})}),te.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[te.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[te.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[te.jsx(h,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg text-white",children:"Bio"})]}),te.jsx("div",{className:"space-y-4 text-gray-300",children:te.jsx("p",{children:null==t?void 0:t.bio})})]}),te.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[te.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[te.jsx(c,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg text-white",children:"Contact"})]}),te.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(null==t?void 0:t.email)&&te.jsxs("a",{href:`mailto:${t.email}`,className:"flex items-center space-x-2 text-gray-400 hover:text-green-400 transition-colors",children:[te.jsx(O,{className:"w-4 h-4"}),te.jsx("span",{children:t.email})]}),(null==t?void 0:t.phone)&&te.jsxs("a",{href:`tel:${t.phone}`,className:"flex items-center space-x-2 text-gray-400 hover:text-green-400 transition-colors",children:[te.jsx(V,{className:"w-4 h-4"}),te.jsx("span",{children:t.phone})]}),(null==t?void 0:t.linkedin)&&te.jsxs("a",{href:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-gray-400 hover:text-green-400 transition-colors",children:[te.jsx(F,{className:"w-4 h-4"}),te.jsx("span",{children:"LinkedIn"})]})]})]})]})]}),te.jsx("div",{className:"mb-12",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:[te.jsxs("div",{className:"px-6 py-4 bg-gray-900 border-b border-gray-700 flex items-center space-x-2",children:[te.jsx(u,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg text-white",children:"Skills & Technologies"})]}),te.jsx("div",{className:"p-6",children:te.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(((e,t)=>te.jsx("span",{className:"px-3 py-1 bg-gray-900 text-gray-400 rounded-full text-sm border border-gray-700",children:e},t)))})})]})}),te.jsx("div",{className:"mb-12",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:[te.jsxs("div",{className:"px-6 py-4 bg-gray-900 border-b border-gray-700 flex items-center space-x-2",children:[te.jsx(B,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg text-white",children:"Certificates"})]}),te.jsx("div",{className:"p-6",children:te.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(((e,t)=>te.jsxs("div",{onClick:()=>{v(e),w(t)},className:"bg-gray-900 rounded-lg p-4 border border-gray-700 cursor-pointer hover:border-green-400/50 transition-colors",children:[te.jsxs("div",{className:"flex items-center justify-between mb-3",children:[te.jsx("h3",{className:"text-white font-medium",children:e.title}),e.verified&&te.jsx(b,{className:"w-4 h-4 text-green-400"})]}),te.jsx("p",{className:"text-sm text-gray-400 mb-2",children:e.organization}),te.jsx("p",{className:"text-xs text-gray-500",children:e.year})]},t)))})})]})}),te.jsx("div",{className:"mb-12",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:[te.jsxs("div",{className:"px-6 py-4 bg-gray-900 border-b border-gray-700 flex items-center space-x-2",children:[te.jsx(D,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg text-white",children:"Publications"})]}),te.jsx("div",{className:"p-6",children:te.jsx(tx,{publications:E})})]})}),te.jsx("div",{className:"mb-12",children:te.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:[te.jsxs("div",{className:"px-6 py-4 bg-gray-900 border-b border-gray-700 flex items-center space-x-2",children:[te.jsx(M,{className:"w-4 h-4 text-green-400"}),te.jsx("h2",{className:"text-lg text-white",children:"Awards"})]}),te.jsx("div",{className:"p-6",children:te.jsx(nx,{awards:S})})]})}),y&&te.jsx(ex,{isOpen:!!y,onClose:()=>v(null),image:y.image,title:y.title,caption:`${y.organization} - ${y.year}`,onPrevious:()=>{const e=0===x?r.length-1:x-1;w(e),v(r[e])},onNext:()=>{const e=x===r.length-1?0:x+1;w(e),v(r[e])},showNavigation:r.length>1,currentIndex:x,totalItems:r.length})]})})}function ix(){const[t,n]=e.useState(null),[s,i]=e.useState({firstName:"",lastName:"",email:"",projectType:"",customProjectType:"",message:""}),[r,a]=e.useState({type:"idle"});e.useEffect((()=>{!async function(){const e=await Yh();n(e)}()}),[]);const o=e=>{const{name:t,value:n}=e.target;i((e=>({...e,[t]:n})))};return te.jsx("div",{className:"pt-24 pb-20",children:te.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[te.jsxs("div",{className:"text-center mb-12",children:[te.jsx("h2",{className:"text-4xl font-bold font-playfair mb-4",children:"Let's Talk"}),te.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Have a project in mind? I'd love to hear about it. Let's discuss how we can work together to bring your vision to life."})]}),te.jsxs("div",{className:"grid lg:grid-cols-2 gap-16",children:[te.jsx("div",{children:te.jsxs("form",{onSubmit:async e=>{e.preventDefault(),a({type:"loading"});try{const e=await(async e=>{try{const t=Kl(Gh,"contact"),n={...e,createdAt:new Date};return await _c(t,n),{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"An error occurred while submitting your message"}}})({firstName:s.firstName,lastName:s.lastName,email:s.email,projectType:"Other"===s.projectType?s.customProjectType:s.projectType,message:s.message});e.success?(a({type:"success",message:"Thank you for your message! I will get back to you soon."}),i({firstName:"",lastName:"",email:"",projectType:"",customProjectType:"",message:""})):a({type:"error",message:e.error||"Something went wrong. Please try again."})}catch(t){a({type:"error",message:"Failed to send message. Please try again."})}},className:"space-y-6",children:[te.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[te.jsxs("div",{children:[te.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),te.jsx("input",{type:"text",name:"firstName",value:s.firstName,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",placeholder:"Jane",required:!0})]}),te.jsxs("div",{children:[te.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),te.jsx("input",{type:"text",name:"lastName",value:s.lastName,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",placeholder:"Smith"})]})]}),te.jsxs("div",{children:[te.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),te.jsx("input",{type:"email",name:"email",value:s.email,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",placeholder:"jane@example.com",required:!0})]}),te.jsxs("div",{children:[te.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Type *"}),te.jsxs("select",{name:"projectType",value:s.projectType,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",required:!0,children:[te.jsx("option",{value:"",children:"Select a project type"}),te.jsx("option",{value:"Residential",children:"Residential"}),te.jsx("option",{value:"Commercial",children:"Commercial"}),te.jsx("option",{value:"Interior",children:"Interior Design"}),te.jsx("option",{value:"Landscape",children:"Landscape"}),te.jsx("option",{value:"Employment",children:"Employment"}),te.jsx("option",{value:"Other",children:"Other"})]})]}),"Other"===s.projectType&&te.jsxs("div",{children:[te.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specify Project Type *"}),te.jsx("input",{type:"text",name:"customProjectType",value:s.customProjectType,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",placeholder:"Please specify your project type",required:!0})]}),te.jsxs("div",{children:[te.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),te.jsx("textarea",{name:"message",value:s.message,onChange:o,rows:6,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none resize-none",placeholder:"Tell me about your project...",required:!0})]}),r.message&&te.jsx("div",{className:"p-4 rounded-lg "+("success"===r.type?"bg-green-50 text-green-800":"error"===r.type?"bg-red-50 text-red-800":""),children:r.message}),te.jsx("button",{type:"submit",disabled:"loading"===r.type,className:"w-full flex items-center justify-center px-8 py-4 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors "+("loading"===r.type?"opacity-50 cursor-not-allowed":""),children:"loading"===r.type?te.jsx("span",{children:"Sending..."}):te.jsxs(te.Fragment,{children:[te.jsx("span",{children:"Send Message"}),te.jsx(U,{className:"w-5 h-5 ml-2"})]})})]})}),te.jsxs("div",{className:"space-y-8",children:[te.jsxs("div",{children:[te.jsx("h3",{className:"text-xl font-playfair font-bold mb-6",children:"Contact Information"}),te.jsxs("div",{className:"space-y-6",children:[te.jsxs("div",{className:"flex items-start space-x-3",children:[te.jsx(x,{className:"w-5 h-5 mt-1 flex-shrink-0 text-gray-600"}),te.jsxs("div",{className:"text-gray-600",children:[te.jsx("p",{children:null==t?void 0:t.address}),te.jsxs("p",{children:[null==t?void 0:t.city,", ",null==t?void 0:t.country]})]})]}),te.jsxs("div",{className:"flex items-center space-x-3",children:[te.jsx(O,{className:"w-5 h-5 flex-shrink-0 text-gray-600"}),te.jsx("a",{href:`mailto:${null==t?void 0:t.email}`,className:"text-gray-600 hover:text-black transition-colors",children:null==t?void 0:t.email})]}),te.jsxs("div",{className:"flex items-center space-x-3",children:[te.jsx(V,{className:"w-5 h-5 flex-shrink-0 text-gray-600"}),te.jsx("a",{href:`tel:${null==t?void 0:t.phone}`,className:"text-gray-600 hover:text-black transition-colors",children:null==t?void 0:t.phone})]})]})]}),te.jsxs("div",{children:[te.jsx("h3",{className:"text-xl font-playfair font-bold mb-6",children:"Follow Me"}),te.jsxs("div",{className:"flex space-x-4",children:[te.jsx("a",{href:null==t?void 0:t.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-black transition-colors","aria-label":"LinkedIn",children:te.jsx(F,{className:"w-5 h-5"})}),te.jsx("a",{href:null==t?void 0:t.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-black transition-colors","aria-label":"Instagram",children:te.jsx($,{className:"w-5 h-5"})})]})]})]})]})]})})}function rx(){const t=(new Date).getFullYear(),[n,i]=e.useState(null);return e.useEffect((()=>{!async function(){try{const e=await Yh();i(e)}catch(e){}}()}),[]),te.jsx("footer",{className:"bg-gray-900 text-gray-400 font-mono",children:te.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:te.jsxs("div",{className:"border border-gray-800 rounded-t-lg bg-gray-900",children:[te.jsxs("div",{className:"flex items-center px-4 py-2 bg-gray-800/50 rounded-t-lg",children:[te.jsxs("div",{className:"flex space-x-2",children:[te.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),te.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),te.jsx("div",{className:"flex-1 text-center text-sm text-gray-400",children:"~ portfolio-footer"})]}),te.jsxs("div",{className:"p-6 space-y-8",children:[te.jsxs("div",{className:"space-y-2",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(h,{className:"w-4 h-4 text-green-400"}),te.jsx("span",{className:"text-green-400",children:"$"}),te.jsx("span",{className:"text-white",children:"echo $CONTACT_INFO"})]}),te.jsxs("div",{className:"flex space-x-6 pl-6 pt-2",children:[(null==n?void 0:n.linkedin)&&te.jsx("a",{href:n.linkedin,target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-400 transition-colors",children:te.jsx(F,{className:"w-5 h-5"})}),(null==n?void 0:n.email)&&te.jsx("a",{href:`mailto:${n.email}`,className:"hover:text-green-400 transition-colors",children:te.jsx(O,{className:"w-5 h-5"})}),te.jsx("a",{href:"https://github.com/yourusername",target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-400 transition-colors",children:te.jsx(q,{className:"w-5 h-5"})})]}),((null==n?void 0:n.city)||(null==n?void 0:n.country))&&te.jsxs("p",{className:"pl-6 pt-2 text-sm",children:[te.jsx("span",{className:"text-green-400",children:">"})," ",n.city,n.city&&n.country&&", ",n.country]})]}),(null==n?void 0:n.services)&&n.services.length>0&&te.jsxs("div",{className:"space-y-2",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(h,{className:"w-4 h-4 text-green-400"}),te.jsx("span",{className:"text-green-400",children:"$"}),te.jsx("span",{className:"text-white",children:"ls ./services"})]}),te.jsx("div",{className:"grid grid-cols-2 gap-2 pl-6 pt-2",children:n.services.map(((e,t)=>te.jsxs("div",{className:"text-sm",children:[te.jsx("span",{className:"text-green-400",children:"-"})," ",e]},t)))})]}),te.jsxs("div",{className:"space-y-2",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(h,{className:"w-4 h-4 text-green-400"}),te.jsx("span",{className:"text-green-400",children:"$"}),te.jsx("span",{className:"text-white",children:"ls ./navigation"})]}),te.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pl-6 pt-2",children:[te.jsx(s,{to:"/",className:"hover:text-green-400 transition-colors",children:"~/home"}),te.jsx(s,{to:"/projects",className:"hover:text-green-400 transition-colors",children:"~/projects"}),te.jsx(s,{to:"/about",className:"hover:text-green-400 transition-colors",children:"~/about"}),te.jsx(s,{to:"/contact",className:"hover:text-green-400 transition-colors",children:"~/contact"})]})]}),te.jsxs("div",{className:"pt-6 border-t border-gray-800",children:[te.jsxs("div",{className:"flex items-center space-x-2",children:[te.jsx(h,{className:"w-4 h-4 text-green-400"}),te.jsx("span",{className:"text-green-400",children:"$"}),te.jsx("span",{className:"text-white",children:"echo $COPYRIGHT"})]}),te.jsxs("p",{className:"pl-6 pt-2",children:[te.jsx("span",{className:"text-green-400",children:">"}),"  ",t," ",(null==n?void 0:n.name)||"Your Name",". All rights reserved."]})]})]})]})})})}function ax(){const{pathname:t}=n();return e.useEffect((()=>{window.scrollTo(0,0)}),[t]),null}function ox({title:t="Professional Architect | Innovative Design Solutions",description:s="Explore a portfolio of innovative architectural designs, sustainable solutions, and transformative spaces.",image:i="/og-image.png",type:r="website"}){const a=n(),o="https://singhpragya.netlify.app",l=`${o}${a.pathname}`.replace(/\/+/g,"/").replace("http:/","http://").replace("https:/","https://");return e.useEffect((()=>{document.title=t;const e=document.querySelector('meta[name="description"]');e&&e.setAttribute("content",s);const n=document.querySelector('meta[property="og:url"]');n&&n.setAttribute("content",l);const r=document.querySelector('meta[property="og:title"]');r&&r.setAttribute("content",t);const a=document.querySelector('meta[property="og:description"]');a&&a.setAttribute("content",s);const c=document.querySelector('meta[property="og:image"]');c&&c.setAttribute("content",`${o}${i}`);const h=document.querySelector('meta[property="twitter:url"]');h&&h.setAttribute("content",l);const u=document.querySelector('meta[property="twitter:title"]');u&&u.setAttribute("content",t);const d=document.querySelector('meta[property="twitter:description"]');d&&d.setAttribute("content",s);const m=document.querySelector('meta[property="twitter:image"]');m&&m.setAttribute("content",`${o}${i}`);const p=document.querySelector('link[rel="canonical"]');p&&p.setAttribute("href",l)}),[t,s,i,l,o]),null}function lx({data:t}){return e.useEffect((()=>{let e=document.querySelector("#structured-data");e||(e=document.createElement("script"),e.setAttribute("id","structured-data"),e.setAttribute("type","application/ld+json"),document.head.appendChild(e)),e.textContent=JSON.stringify(t)}),[t]),null}const cx=e=>({"@context":"https://schema.org","@type":"ProfessionalService","@id":"https://singhpragya.netlify.app/",name:(null==e?void 0:e.name)||"Professional Architect",description:(null==e?void 0:e.shortDescription)||"Professional architecture portfolio showcasing innovative design and sustainable solutions",url:"https://singhpragya.netlify.app/",sameAs:[null==e?void 0:e.linkedin,null==e?void 0:e.instagram,null==e?void 0:e.behance].filter(Boolean),image:null==e?void 0:e.profileImage,address:{"@type":"PostalAddress",addressLocality:(null==e?void 0:e.location)||"Manchester",addressCountry:"UK"},priceRange:"$$",openingHours:"Mo-Fr 09:00-18:00",telephone:null==e?void 0:e.phone,email:null==e?void 0:e.email,areaServed:{"@type":"GeoCircle",geoMidpoint:{"@type":"GeoCoordinates",latitude:53.4808,longitude:-2.2426},geoRadius:"100000"}});function hx(){const[t,n]=e.useState(!1),s=()=>{window.scrollY>300?n(!0):n(!1)};e.useEffect((()=>(window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)})),[]);return te.jsx(te.Fragment,{children:t&&te.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},"aria-label":"Back to top",className:"fixed bottom-8 right-8 p-3 bg-black/80 hover:bg-black text-white rounded-full shadow-lg backdrop-blur-sm transition-all duration-300 transform hover:scale-110 z-50 group",children:te.jsx(z,{className:"w-6 h-6 group-hover:-translate-y-0.5 transition-transform duration-300"})})})}function ux(){const[t,n]=e.useState(!1),[s,i]=e.useState(null);return e.useEffect((()=>{!async function(){try{const e=await Yh();i(e)}catch(e){}}()}),[]),te.jsxs(r,{children:[te.jsx(ox,{}),te.jsx(lx,{data:cx(s)}),te.jsx(ax,{}),te.jsxs("div",{className:"min-h-screen flex flex-col",children:[te.jsx(su,{isMenuOpen:t,setIsMenuOpen:n}),te.jsx("main",{className:"flex-grow",children:te.jsxs(a,{children:[te.jsx(o,{path:"/",element:te.jsx(Yv,{})}),te.jsx(o,{path:"/projects",element:te.jsx(Xv,{})}),te.jsx(o,{path:"/projects/:id",element:te.jsx(Zv,{})}),te.jsx(o,{path:"/about",element:te.jsx(sx,{})}),te.jsx(o,{path:"/contact",element:te.jsx(ix,{})})]})}),te.jsx(rx,{}),te.jsx(hx,{})]})]})}const dx={};const mx=function(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisteredSW:r,onRegisterError:a}=e;let o,l;return l=async function(){if("serviceWorker"in navigator){if(o=await function(e,t){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in dx)return;dx[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,s&&i.setAttribute("nonce",s),document.head.appendChild(i),t?new Promise(((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then((t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))}((async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-p40uij6f.js");return{Workbox:e}}),[]).then((({Workbox:e})=>new e("/sw.js",{scope:"/",type:"classic"}))).catch((e=>{null==a||a(e)})),!o)return;o.addEventListener("activated",(e=>{(e.isUpdate||e.isExternal)&&window.location.reload()})),o.addEventListener("installed",(e=>{e.isUpdate||null==s||s()})),o.register({immediate:t}).then((e=>{r?r("/sw.js",e):null==i||i(e)})).catch((e=>{null==a||a(e)}))}}(),async(e=!0)=>{await l}}({onNeedRefresh(){confirm("New content available. Reload?")&&mx()},onOfflineReady(){}}),px=document.getElementById("root");if(!px)throw new Error("Failed to find the root element");ee(px).render(te.jsx(l.StrictMode,{children:te.jsx(ux,{})}));
//# sourceMappingURL=index-BQWQwnrr.js.map
